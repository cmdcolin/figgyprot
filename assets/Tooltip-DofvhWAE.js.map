{"version":3,"file":"Tooltip-DofvhWAE.js","sources":["../../node_modules/@jbrowse/plugin-alignments/esm/LinearSNPCoverageDisplay/components/Tooltip.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef } from 'react';\nimport { toLocale } from '@jbrowse/core/util';\nimport { Tooltip } from '@jbrowse/plugin-wiggle';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(() => ({\n    td: {\n        whiteSpace: 'nowrap',\n    },\n}));\nconst toP = (s = 0) => +(+s).toFixed(1);\nconst pct = (n, total = 1) => `${toP((n / (total || 1)) * 100)}%`;\nconst TooltipContents = forwardRef(function TooltipContents2(props, reactRef) {\n    const { feature, model } = props;\n    const { classes } = useStyles();\n    const start = feature.get('start') + 1;\n    const end = feature.get('end');\n    const name = feature.get('refName');\n    const { refbase, readsCounted, depth, ref, ...info } = feature.get('snpinfo');\n    const loc = [\n        name,\n        start === end ? toLocale(start) : `${toLocale(start)}..${toLocale(end)}`,\n    ]\n        .filter(f => !!f)\n        .join(':');\n    return (_jsx(\"div\", { ref: reactRef, children: _jsxs(\"table\", { children: [_jsx(\"caption\", { children: loc }), _jsx(\"thead\", { children: _jsxs(\"tr\", { children: [_jsx(\"th\", {}), _jsx(\"th\", { children: \"Base\" }), _jsx(\"th\", { children: \"Count\" }), _jsx(\"th\", { children: \"% of Total\" }), _jsx(\"th\", { children: \"Strands\" })] }) }), _jsxs(\"tbody\", { children: [_jsxs(\"tr\", { children: [_jsx(\"td\", {}), _jsx(\"td\", { children: \"Total\" }), _jsx(\"td\", { children: readsCounted }), _jsx(\"td\", { children: \" \" }), _jsx(\"td\", { children: \" \" })] }), _jsxs(\"tr\", { children: [_jsx(\"td\", {}), _jsxs(\"td\", { children: [\"REF \", refbase ? `(${refbase.toUpperCase()})` : ''] }), _jsx(\"td\", { children: ref.entryDepth }), _jsx(\"td\", { children: pct(ref.entryDepth, readsCounted) }), _jsxs(\"td\", { children: [ref['-1'] ? `${ref['-1']}(-)` : '', ref['1'] ? `${ref['1']}(+)` : ''] })] }), Object.entries(info).map(([key, entry]) => Object.entries(entry).map(([base, score]) => (_jsxs(\"tr\", { children: [_jsx(\"td\", { children: _jsx(ColorSquare, { model: model, base: base }) }), _jsxs(\"td\", { children: [base.toUpperCase(), \" \"] }), _jsx(\"td\", { className: classes.td, children: [\n                                        score.entryDepth,\n                                        score.avgProbability !== undefined\n                                            ? `(avg. ${pct(score.avgProbability)} prob.)`\n                                            : '',\n                                    ]\n                                        .filter(f => !!f)\n                                        .join(' ') }), _jsx(\"td\", { children: base === 'depth' || base === 'skip'\n                                        ? '---'\n                                        : pct(score.entryDepth, readsCounted) }), _jsxs(\"td\", { children: [score['-1'] ? `${score['-1']}(-)` : '', score['1'] ? `${score['1']}(+)` : ''] })] }, `${key}_${base}`))))] })] }) }));\n});\nfunction ColorSquare({ base, model, }) {\n    var _a;\n    const { visibleModifications } = model;\n    return base.startsWith('mod_') ? (_jsx(\"div\", { style: {\n            width: 10,\n            height: 10,\n            background: (_a = visibleModifications.get(base.replace('mod_', ''))) === null || _a === void 0 ? void 0 : _a.color,\n        } })) : null;\n}\nconst SNPCoverageTooltip = observer(function (props) {\n    const { model } = props;\n    const { featureUnderMouse: feat } = model;\n    return feat && feat.get('type') === 'skip' ? null : (_jsx(Tooltip, { TooltipContents: TooltipContents, ...props }));\n});\nexport default SNPCoverageTooltip;\n"],"names":["useStyles","makeStyles","toP","s","pct","n","total","TooltipContents","forwardRef","props","reactRef","feature","model","classes","start","end","name","refbase","readsCounted","depth","ref","info","loc","toLocale","f","_jsx","_jsxs","key","entry","base","score","ColorSquare","_a","visibleModifications","SNPCoverageTooltip","observer","feat","Tooltip"],"mappings":"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","x_google_ignoreList":[0]}