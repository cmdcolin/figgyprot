import{o as b,a as u,j as e,d as C,u as y,c as d,m as I,bs as L,P as O,ak as v,f as h,F as A,bt as _,B as w}from"./index-DRDIumvF.js";import{M as B}from"./MenuItem-D5kXI1eL.js";import{R as f}from"./RadioGroup-ol05rf9U.js";import{R as g}from"./Radio-L792mZp9.js";import"./dividerClasses-rNTJcnQi.js";const G=b(function({model:r,selectedAssembly:a}){var n;const t=a?r.tracksForAssembly(a):void 0,p=((n=t==null?void 0:t[0])===null||n===void 0?void 0:n.track.trackId)||"",[l,x]=u.useState(p);return u.useEffect(()=>{const o=t==null?void 0:t.find(i=>l===i.track.trackId);o&&(r.setFileSource(o.loc),r.setFileType(o.type))},[r,l,t]),e.jsx("div",{children:t!=null&&t.length?e.jsx(C,{select:!0,label:"Tracks",variant:"outlined",value:l,onChange:o=>{x(o.target.value)},children:t.map(({track:o,label:i})=>e.jsx(B,{value:o.trackId,children:y.coarseStripHTML(i)},o.trackId))}):e.jsx(d.ErrorMessage,{error:`No tracks found for ${a}`})})}),P=I()({container:{margin:"0 auto",maxWidth:"40em",padding:20}}),q=b(function({model:r}){var a;const n=y.getSession(r),{classes:t}=P(),{assemblyNames:p,assemblyManager:l}=n,{loading:x,fileType:o,fileSource:i,isReadyToOpen:k,fileTypes:S,error:F}=r,[c,T]=u.useState(p[0]),[j,E]=u.useState("custom"),m=((a=l.get(c))===null||a===void 0?void 0:a.error)||F,M=L(r);return e.jsxs("div",{children:[m?e.jsx(d.ErrorMessage,{error:m}):null,e.jsxs(O,{className:t.container,children:[x?e.jsx(d.LoadingEllipses,{variant:"h6"}):null,e.jsx("div",{children:e.jsx(v,{component:"fieldset",children:e.jsx(f,{row:!0,"aria-label":"file type",name:"type",value:o,onChange:s=>{E(s.target.value)},children:Object.entries({custom:"Open file from URL or local computer",existing:"Open from track"}).map(([s,R])=>e.jsx(h,{checked:j===s,value:s,control:e.jsx(g,{}),label:R},s))})})}),j==="custom"?e.jsx("div",{children:e.jsx(v,{component:"fieldset",children:e.jsx(A,{children:e.jsx(d.FileSelector,{inline:!0,location:i,rootModel:M,setLocation:s=>{r.setFileSource(s)}})})})}):c?e.jsx(G,{model:r,selectedAssembly:c}):e.jsx("div",{children:"Select assembly"}),e.jsx("div",{children:e.jsxs(v,{component:"fieldset",children:[e.jsx(_,{component:"legend",children:"File Type"}),e.jsx(f,{row:!0,"aria-label":"file type",name:"type",value:o,onChange:s=>{r.setFileType(s.target.value)},children:S.map(s=>e.jsx(h,{checked:o===s,value:s,control:e.jsx(g,{}),label:s},s))})]})}),e.jsx("div",{children:e.jsx(d.AssemblySelector,{session:n,selected:c,onChange:s=>{T(s)}})}),e.jsx("div",{children:e.jsx(w,{disabled:!k||!!m,variant:"contained","data-testid":"open_spreadsheet",color:"primary",onClick:()=>{r.import(c)},children:"Open"})})]})]})});export{q as default};
//# sourceMappingURL=ImportWizard-DuwSQBvE.js.map
