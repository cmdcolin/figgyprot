import{m as k,a as h,j as e,B as n,a_ as E,a$ as H,b0 as A,b1 as L,u,c as N,D as I,e as T}from"./index-BXtJZUZx.js";import{D as U}from"./DraggableDialog-BK-oxRF1.js";import{C as W,a as G}from"./ColorPicker-C8WtfU-c.js";import{m as C,a as S}from"./util-DV9nkuNE.js";import{D as K}from"./DataGrid-jm6zT_54.js";import"./index-GNpIqif7.js";import"./utils-BwPRrx3T.js";import"./getThemeProps-CjORTqXn.js";import"./MenuItem-DOHbUxf-.js";import"./dividerClasses-F6oYoNIY.js";import"./Divider-C0Sjin2e.js";import"./Badge-BcIIynI9.js";import"./TableCell-3LNUgoLB.js";const R=k()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});function _({rows:t,onChange:s,showTips:c}){const{classes:x}=R(),[m,d]=h.useState(null),[l,p]=h.useState([]),{name:$,color:B,baseUri:Y,...v}=t[0],[y,w]=h.useState("blue"),[j,D]=h.useState({idx:0,field:null});return e.jsxs("div",{children:[e.jsx(n,{disabled:!l.length,onClick:o=>{d(o.currentTarget)},children:"Change color of selected items"}),e.jsxs(n,{disabled:!l.length,onClick:()=>{s(C([...t],l))},children:[e.jsx(E,{}),c?"Move selected items up":null]}),e.jsxs(n,{disabled:!l.length,onClick:()=>{s(S([...t],l))},children:[e.jsx(H,{}),c?"Move selected items down":null]}),e.jsxs(n,{disabled:!l.length,onClick:()=>{s(C([...t],l,t.length))},children:[e.jsx(A,{}),c?"Move selected items to top":null]}),e.jsxs(n,{disabled:!l.length,onClick:()=>{s(S([...t],l,t.length))},children:[e.jsx(L,{}),c?"Move selected items to bottom":null]}),e.jsx(W.ColorPopover,{anchorEl:m,color:y,onChange:o=>{w(o);for(const i of l){const a=t.find(r=>r.name===i);a&&(a.color=o)}s([...t])},onClose:()=>{d(null)}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(K,{disableRowSelectionOnClick:!0,getRowId:o=>o.name,checkboxSelection:!0,onRowSelectionModelChange:o=>{p([...o.ids])},rows:t,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:({value:o,id:i})=>e.jsx(G,{color:o||"blue",onChange:a=>{const r=t.find(g=>g.name===i);r&&(r.color=a),s([...t])}})},{field:"name",headerName:"Name",width:u.measureGridWidth(t.map(o=>o.name))},...Object.keys(v).map(o=>({field:o,renderCell:({value:i})=>e.jsx("div",{className:x.cell,children:e.jsx(N.SanitizedHTML,{html:u.getStr(i)})}),width:u.measureGridWidth(t.map(i=>`${i[o]}`))}))],sortModel:[],onSortModelChange:o=>{const i=o[0],a=(j.idx+1)%2,r=i.field||j.field;D({idx:a,field:r}),s(r?[...t].sort((g,M)=>{const b=u.getStr(g[r]),f=u.getStr(M[r]);return a===1?b.localeCompare(f):f.localeCompare(b)}):t)}})})]})}const O=k()({content:{minWidth:800},float:{float:"right"}});function P(){return e.jsxs(e.Fragment,{children:["Helpful tips",e.jsxs("ul",{children:[e.jsx("li",{children:"You can select rows in the table with the checkboxes"}),e.jsx("li",{children:"Multi-select is enabled with shift-click and control-click"}),e.jsx("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),e.jsx("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),e.jsx("li",{children:"Changes are applied when you hit Submit"}),e.jsx("li",{children:"You can click and drag the dialog box to move it on the screen"}),e.jsx("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]})}function ie({model:t,handleClose:s}){const{classes:c}=O(),{sources:x}=t,[m,d]=h.useState(structuredClone(x||[])),[l,p]=u.useLocalStorage("multiwiggle-showTips",!1);return e.jsxs(U,{open:!0,onClose:s,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor",children:[e.jsxs(I,{className:c.content,children:[e.jsx(n,{variant:"contained",className:c.float,onClick:()=>{p(!l)},children:l?"Hide tips":"Show tips"}),e.jsx("br",{}),l?e.jsx(P,{}):null,e.jsx(_,{rows:m,onChange:d,showTips:l})]}),e.jsxs(T,{children:[e.jsx(n,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{t.clearLayout(),d(t.sources||[])},children:"Clear custom settings"}),e.jsx(n,{variant:"contained",color:"secondary",onClick:()=>{s(),d([...t.sources||[]])},children:"Cancel"}),e.jsx(n,{variant:"contained",color:"primary",type:"submit",onClick:()=>{t.setLayout(m),s()},children:"Submit"})]})]})}export{ie as default};
//# sourceMappingURL=SetColorDialog-CaMMKHWR.js.map
