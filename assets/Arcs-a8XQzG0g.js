const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ArcTooltip-DE0aeYNk.js","./index-CGKDrrCR.js","./index-DIqbght7.css"])))=>i.map(i=>d[i]);
import{cc as w,be as v,o as y,j as u,c as _,cd as F,_ as T}from"./index-CGKDrrCR.js";function O(t,e){var o,i,r,s;const a=e?w(e):void 0,d=t.get("start");let c=t.get("end");const f=t.get("strand"),l=t.get("mate"),m=t.get("refName");let p,x=0,k=0,h=0,b=0;if(["<TRA","<DEL","<INV","<INS","<DUP","<CNV"].some(n=>e==null?void 0:e.startsWith(n))){const n=t.get("INFO"),g=(i=(o=n==null?void 0:n.END)===null||o===void 0?void 0:o[0])!==null&&i!==void 0?i:c;p=(s=(r=n==null?void 0:n.CHR2)===null||r===void 0?void 0:r[0])!==null&&s!==void 0?s:m,x=g,k=g-1,c=d+1}else if(a!=null&&a.MatePosition){const n=a.MatePosition.split(":");b=a.MateDirection==="left"?1:-1,h=a.Join==="left"?-1:1,x=+n[1],k=+n[1]-1,p=n[0]}return{k1:{refName:m,start:d,end:c,strand:f,mateDirection:b},k2:l??{refName:p||"unknown",end:x,start:k,mateDirection:h}}}function V(t,e){var o;const{k1:i,k2:r}=O(t,e);return[t.get("name"),t.get("id"),v.assembleLocString(i),v.assembleLocString(r),(o=t.get("INFO"))===null||o===void 0?void 0:o.SVTYPE,e].filter(s=>!!s).join("<br/>")}const W=_.lazy(()=>T(()=>import("./ArcTooltip-DE0aeYNk.js"),__vite__mapDeps([0,1,2]),import.meta.url)),E=y(function({model:t,feature:e,alt:o,assembly:i,view:r}){var s,a;const[d,c]=_.useState(!1),{height:f}=t,{k1:l,k2:m}=O(e,o),p=_.useRef(null),x=F.getConf(t,"color",{feature:e,alt:o}),k=i.getCanonicalRefName(l.refName)||l.refName,h=i.getCanonicalRefName(m.refName)||m.refName,b=l.start,S=m.start,n=(s=r.bpToPx({refName:k,coord:b}))===null||s===void 0?void 0:s.offsetPx,g=(a=r.bpToPx({refName:h,coord:S}))===null||a===void 0?void 0:a.offsetPx;if(n!==void 0&&g!==void 0){const A=(g-n)/2,D=Math.abs(A),C=Math.min(f,D),R=n-r.offsetPx,$=g-r.offsetPx,N=R,P=$,M=d?"black":x,j=3;return D>1?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:`M ${N} 0 C ${N} ${C}, ${P} ${C}, ${P} 0`,ref:p,...v.getStrokeProps(M),strokeWidth:j,onMouseOut:()=>{c(!1)},onMouseOver:()=>{c(!0)},onClick:()=>{t.selectFeature(e)},fill:"none",pointerEvents:"stroke"}),l.mateDirection?u.jsx("line",{...v.getStrokeProps(M),strokeWidth:j,onMouseOut:()=>{c(!1)},onMouseOver:()=>{c(!0)},onClick:()=>{t.selectFeature(e)},x1:N,x2:N+l.mateDirection*20,y1:1.5,y2:1.5}):null,m.mateDirection?u.jsx("line",{...v.getStrokeProps(M),strokeWidth:j,onMouseOut:()=>{c(!1)},onMouseOver:()=>{c(!0)},onClick:()=>{t.selectFeature(e)},x1:P,x2:P+m.mateDirection*20,y1:1.5,y2:1.5}):null,d?u.jsx(_.Suspense,{fallback:null,children:u.jsx(W,{contents:V(e,o)})}):null]}):null}return null}),I=y(function({model:t,exportSVG:e,children:o}){const{height:i}=t,r=v.getContainingView(t),s=Math.round(r.dynamicBlocks.totalWidthPx);return e?o:u.jsx("svg",{width:s,height:i,children:o})}),B=y(function({model:t,exportSVG:e}){const o=v.getContainingView(t),i=v.getSession(t),{assemblyManager:r}=i,{features:s}=t,a=r.get(o.assemblyNames[0]);return a?u.jsx(I,{model:t,exportSVG:e,children:s==null?void 0:s.map(d=>{var c;const f=d.get("ALT");return(c=f==null?void 0:f.map(l=>u.jsx(E,{session:i,feature:d,alt:l,view:o,model:t,assembly:a},`${d.id()}-${l}`)))!==null&&c!==void 0?c:u.jsx(E,{session:i,feature:d,view:o,model:t,assembly:a},d.id())})}):null});export{B as A};
//# sourceMappingURL=Arcs-a8XQzG0g.js.map
