const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LaunchBreakendPanel-B-tjCaGv.js","./index-CT2bM4yV.js","./index-DIqbght7.css","./VariantConsequenceDataGrid-CQ4bc2n1.js"])))=>i.map(i=>d[i]);
import{eC as T,g3 as be,g4 as Pt,c as N,cz as B,bM as M,j as b,ag as H,bO as A,bN as v,g5 as Tt,g6 as ht,ev as kt,g7 as Bt,cI as At,g8 as Lt,fc as Rt,fd as Et,g9 as It,T as ke,e as Gt,b0 as Ht,h as Vt,C as zt,bL as Wt,cF as Ut,o as Jt,P as Kt,cc as Qt,_ as mt}from"./index-CT2bM4yV.js";var gt={},V={};Object.defineProperty(V,"__esModule",{value:!0});V.isEmpty=Yt;V.generateTitle=Zt;V.generateMaxWidth=en;V.accessNested=tn;const je=T(),Xt=be;function Yt(e){return Object.keys(e).length===0}function Zt(e,t,s){return[(0,Xt.ellipses)(`${e||t||""}`),`${s}`].filter(n=>!!n).join(" - ")}function en(e,t){return Math.ceil((0,je.max)(e.map(s=>(0,je.measureText)([...t,s[0]].join("."),12))))+10}function tn(e,t={}){let s=t;for(const n of e)(0,je.isObject)(s)&&(s=s[n]);return typeof s=="string"?s:(0,je.isObject)(s)&&typeof s.Description=="string"?s.Description:void 0}var xt={},Be={},ee={},te={},ze;function jt(){if(ze)return te;ze=1,Object.defineProperty(te,"__esModule",{value:!0}),te.useFeatureSequence=r;const e=N,t=Pt(),s=T(),n=5e5;function r(c,d,a,x){const[_,l]=(0,e.useState)(),[p,j]=(0,e.useState)();return(0,e.useEffect)(()=>{var h,f;if(!c)return;const{assemblyManager:o,rpcManager:i}=(0,s.getSession)(c),u=((f=(h=c.view)===null||h===void 0?void 0:h.assemblyNames)===null||f===void 0?void 0:f[0])||"";async function m(g,S,D){const y=await o.waitForAssembly(u);if(!y)throw new Error("assembly not found");const w="getSequence",q=await i.call(w,"CoreGetFeatures",{adapterConfig:(0,t.getConf)(y,["sequence","adapter"]),sessionId:w,regions:[{start:g,end:S,refName:y.getCanonicalRefName(D),assemblyName:u}]}),[C]=q;return(C==null?void 0:C.get("seq"))||""}(async()=>{try{j(void 0);const{start:g,end:S,refName:D}=d;if(!x&&S-g>n)l({error:`Genomic sequence larger than ${n}bp, use "force load" button to display`});else{const y=g-a,w=S+a,q=await m(g,S,D),C=await m(Math.max(0,y),g,D),E=await m(S,w,D);l({seq:q,upstream:C,downstream:E})}}catch(g){console.error(g),j(g)}})()},[d,c,a,x]),{sequence:_,error:p}}return te}var ne={},re={},We;function nn(){if(We)return re;We=1,Object.defineProperty(re,"__esModule",{value:!0});const e=b,t=N,s=H,n=A,r=M,d=(0,B.makeStyles)()(l=>({formElt:{margin:l.spacing(3),width:400},dialogContent:{width:"80em"},root:{padding:4}}));function a(l){return(0,e.jsx)("div",{children:(0,e.jsx)(n.TextField,{...l})})}function x({children:l}){return(0,e.jsx)("div",{children:(0,e.jsx)(n.FormControl,{children:l})})}const _=(0,r.observer)(function({handleClose:l,model:p}){const{classes:j}=d(),{upperCaseCDS:h}=p,[f,o]=(0,t.useState)(`${p.intronBp}`),[i,u]=(0,t.useState)(`${p.upDownBp}`),m=!Number.isNaN(+f),g=!Number.isNaN(+i);return(0,e.jsxs)(s.Dialog,{maxWidth:"xl",open:!0,onClose:()=>{l()},title:"Feature sequence settings",children:[(0,e.jsxs)(n.DialogContent,{className:j.dialogContent,children:[(0,e.jsx)(a,{label:"Number of intronic bases around splice site to display",className:j.formElt,value:f,helperText:m?"":"Not a number",error:!m,onChange:S=>{o(S.target.value)}}),(0,e.jsx)(a,{label:"Number of bases up/down stream of feature to display",className:j.formElt,value:i,helperText:g?"":"Not a number",error:!g,onChange:S=>{u(S.target.value)}}),(0,e.jsxs)(x,{children:[(0,e.jsx)(n.FormLabel,{children:"Sequence capitalization"}),(0,e.jsxs)(n.RadioGroup,{value:h?"cds":"unchanged",onChange:S=>{p.setUpperCaseCDS(S.target.value==="cds")},children:[(0,e.jsx)(n.FormControlLabel,{value:"cds",control:(0,e.jsx)(n.Radio,{className:j.root,size:"small"}),label:"Capitalize CDS and lower case everything else"}),(0,e.jsx)(n.FormControlLabel,{value:"unchanged",control:(0,e.jsx)(n.Radio,{className:j.root,size:"small"}),label:"Capitalization from reference genome sequence"})]})]})]}),(0,e.jsxs)(n.DialogActions,{children:[(0,e.jsx)(n.Button,{onClick:()=>{p.setIntronBp(+f),p.setUpDownBp(+i),l()},disabled:!m||!g,color:"primary",variant:"contained",children:"Submit"}),(0,e.jsx)(n.Button,{onClick:()=>{l()},color:"secondary",autoFocus:!0,variant:"contained",children:"Cancel"})]})]})});return re.default=_,re}var Ue;function vt(){if(Ue)return ne;Ue=1;var e=v&&v.__createBinding||(Object.create?function(f,o,i,u){u===void 0&&(u=i);var m=Object.getOwnPropertyDescriptor(o,i);(!m||("get"in m?!o.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(f,u,m)}:function(f,o,i,u){u===void 0&&(u=i),f[u]=o[i]}),t=v&&v.__setModuleDefault||(Object.create?function(f,o){Object.defineProperty(f,"default",{enumerable:!0,value:o})}:function(f,o){f.default=o}),s=v&&v.__importStar||function(){var f=function(o){return f=Object.getOwnPropertyNames||function(i){var u=[];for(var m in i)Object.prototype.hasOwnProperty.call(i,m)&&(u[u.length]=m);return u},f(o)};return function(o){if(o&&o.__esModule)return o;var i={};if(o!=null)for(var u=f(o),m=0;m<u.length;m++)u[m]!=="default"&&e(i,o,u[m]);return t(i,o),i}}(),n=v&&v.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ne,"__esModule",{value:!0});const r=b,c=N,d=n(Tt),a=n(ht),x=n(kt()),_=At,l=M,p=n(Bt),j=(0,c.lazy)(()=>Promise.resolve().then(()=>s(nn()))),h=(0,l.observer)((0,c.forwardRef)(function({model:o,extraItems:i=[]},u){if(typeof u=="function")throw new Error("needs a non function ref");const[m,g]=(0,c.useState)(!1),{showCoordinatesSetting:S,showGenomicCoordsOption:D}=o;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.default,{menuItems:[{label:"Copy plaintext",onClick:()=>{const y=u==null?void 0:u.current;y&&(0,x.default)(y.textContent||"",{format:"text/plain"})}},{label:"Copy HTML",onClick:()=>{const y=u==null?void 0:u.current;y&&(0,x.default)(y.outerHTML,{format:"text/html"})}},{label:"Download plaintext",onClick:()=>{const y=u==null?void 0:u.current;y&&(0,_.saveAs)(new Blob([y.textContent||""],{type:"text/plain;charset=utf-8"}),"sequence.txt")}},{label:"Download HTML",onClick:()=>{const y=u==null?void 0:u.current;y&&(0,_.saveAs)(new Blob([y.outerHTML||""],{type:"text/html;charset=utf-8"}),"sequence.html")}},...i,{label:"Show coordinates?",type:"subMenu",subMenu:[{label:"No coordinates",type:"radio",checked:S==="none",onClick:()=>{o.setShowCoordinates("none")}},{label:"Coordinates relative to feature start",type:"radio",checked:S==="relative",onClick:()=>{o.setShowCoordinates("relative")}},...D?[{label:"Coordinates relative to genome (only available for continuous genome based sequence types)",type:"radio",checked:S==="genomic",onClick:()=>{o.setShowCoordinates("genomic")}}]:[]]},{label:"Settings",icon:a.default,onClick:()=>{g(!0)}}],children:(0,r.jsx)(d.default,{})}),m?(0,r.jsx)(j,{model:o,handleClose:()=>{g(!1)}}):null]})}));return ne.default=h,ne}var se={},Je;function bt(){if(Je)return se;Je=1,Object.defineProperty(se,"__esModule",{value:!0});const e=b,t=A,s=M,r=(0,B.makeStyles)()({formControl:{margin:0,marginLeft:4}}),c=(0,s.observer)(function({model:d}){const{classes:a}=r(),{intronBp:x,upDownBp:_,mode:l,hasCDS:p,hasExonOrCDS:j}=d;return(0,e.jsx)(t.FormControl,{className:a.formControl,children:(0,e.jsx)(t.Select,{size:"small",value:l,onChange:h=>{d.setMode(h.target.value)},children:Object.entries({...p?{cds:"CDS"}:{},...p?{protein:"Protein"}:{},...j?{cdna:"cDNA"}:{},...j?{gene:"Genomic w/ full introns"}:{},...j?{gene_updownstream:`Genomic w/ full introns +/- ${_}bp up+down stream`}:{},...j?{gene_collapsed_intron:`Genomic w/ ${x}bp intron`}:{},...j?{gene_updownstream_collapsed_intron:`Genomic w/ ${x}bp intron +/- ${_}bp up+down stream `}:{},...j?{}:{genomic:"Genomic"},...j?{}:{genomic_sequence_updownstream:`Genomic +/- ${_}bp up+down stream`}}).map(([h,f])=>(0,e.jsx)(t.MenuItem,{value:h,children:f},h))})})});return se.default=c,se}var oe={},ie={},ae={},F={},Ke;function Se(){if(Ke)return F;Ke=1,Object.defineProperty(F,"__esModule",{value:!0}),F.genomeColor=F.updownstreamColor=F.cdsColor=F.proteinColor=F.utrColor=F.intronColor=void 0,F.splitString=e,F.intronColor=void 0,F.utrColor="rgb(200,240,240)",F.proteinColor="rgb(220,160,220)",F.cdsColor="rgb(220,220,180)",F.updownstreamColor="rgba(250,200,200)",F.genomeColor="rgb(200,280,200)";function e({str:t,charactersPerRow:s,showCoordinates:n,currRemainder:r=0,splitSize:c=10}){var d;const a=Math.ceil(t.length/s),x=new Array(a);let _=r%10,l=0,p=0;for(;l<a+1;++l){const j=l===0?s-r:s,h=t.slice(p,p+j);if(!h)break;if(n){let f="";for(let o=0,i=_;o<h.length;o++,i++)i%c===0&&(f+=" ",i=0),f+=h[o];f&&(x[l]=f)}else x[l]=h;_=0,p+=j}return{segments:x,remainder:((((d=x.at(-1))===null||d===void 0?void 0:d.replaceAll(" ","").length)||0)+(l<2?r:0))%s}}return F}var le={},Qe;function ye(){if(Qe)return le;Qe=1,Object.defineProperty(le,"__esModule",{value:!0});const e=b,t=N,n=(0,M.observer)(function({chunks:r,start:c,color:d,strand:a=1,coordStart:x=c,model:_}){const{charactersPerRow:l,showCoordinates:p}=_;return r.map((j,h)=>{var f;const o=x-c%l,i=h===0&&c%l===0||h>0?`${`${o+h*a*l}`.padStart(4)}   `:"",u=h===r.length-1&&(((f=r.at(-1))===null||f===void 0?void 0:f.replaceAll(" ","").length)||0)+(h===0?c%l:0)!==l?null:p?` 
`:"";return(0,e.jsxs)(t.Fragment,{children:[p?i:null,(0,e.jsx)("span",{style:{background:d},children:j}),u]},`${j}-${h}`)})});return le.default=n,le}var Xe;function rn(){if(Xe)return ae;Xe=1;var e=v&&v.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(ae,"__esModule",{value:!0});const t=b,s=M,n=Se(),r=e(ye()),c=(0,s.observer)(function({utr:d,cds:a,exons:x,sequence:_,upstream:l,downstream:p,feature:j,includeIntrons:h,collapseIntron:f,model:o}){var i;const{upperCaseCDS:u,intronBp:m,charactersPerRow:g,showCoordinates:S,showCoordinatesSetting:D}=o,y=a.length>0,w=(a.length?[...a,...d].sort((O,k)=>O.start-k.start):x).filter(O=>O.start!==O.end),q=O=>u?O.toLowerCase():O,C=O=>u?O.toUpperCase():O,E=j.strand===-1?-1:1,J=D==="genomic"&&h&&!f,P=J?E:1;let L=J?E>0?j.start+1-((l==null?void 0:l.length)||0):j.end+((l==null?void 0:l.length)||0):0,R=0,z=0,Ge=null;if(l){const{segments:O,remainder:k}=(0,n.splitString)({str:q(l),charactersPerRow:g,showCoordinates:S});Ge=(0,t.jsx)(r.default,{model:o,color:n.updownstreamColor,strand:P,start:R,coordStart:L,chunks:O}),z=k,R=R+l.length*P,L=L+l.length*P}const De=[];for(let O=0;O<w.length;O++){const k=w[O],K=_.slice(k.end,(i=w[O+1])===null||i===void 0?void 0:i.start),Q=_.slice(k.start,k.end),{segments:Ft,remainder:Nt}=(0,n.splitString)({str:y?k.type==="CDS"?C(Q):q(Q):C(Q),charactersPerRow:g,currRemainder:z,showCoordinates:S});if(De.push((0,t.jsx)(r.default,{model:o,color:k.type==="CDS"?n.cdsColor:n.utrColor,strand:P,start:R,coordStart:L,chunks:Ft},`${JSON.stringify(k)}-mid`)),z=Nt,R=R+Q.length*P,L=L+Q.length*P,K&&h&&O<w.length-1){const we=q(f&&K.length>m*2?`${K.slice(0,m)}...${K.slice(-m)}`:K),{segments:Ve,remainder:Mt}=(0,n.splitString)({str:we,charactersPerRow:g,currRemainder:z,showCoordinates:S});Ve.length&&(De.push((0,t.jsx)(r.default,{model:o,strand:P,coordStart:L,start:R,chunks:Ve},`${JSON.stringify(k)}-intron`)),z=Mt,R=R+we.length*P,L=L+we.length*P)}}let He=null;if(p){const{segments:O}=(0,n.splitString)({str:q(p),charactersPerRow:g,currRemainder:z,showCoordinates:S});He=(0,t.jsx)(r.default,{start:R,model:o,strand:P,chunks:O,coordStart:L,color:n.updownstreamColor})}return(0,t.jsxs)(t.Fragment,{children:[Ge,De,He]})});return ae.default=c,ae}var ce={},Ye;function sn(){if(Ye)return ce;Ye=1;var e=v&&v.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ce,"__esModule",{value:!0});const t=b,s=M,n=be,r=Se(),c=e(ye()),d=(0,s.observer)(function({cds:a,sequence:x,model:_}){const{charactersPerRow:l,showCoordinates:p}=_,{segments:j}=(0,r.splitString)({str:(0,n.stitch)(a,x),charactersPerRow:l,showCoordinates:p});return(0,t.jsx)(c.default,{model:_,color:r.cdsColor,chunks:j,start:0})});return ce.default=d,ce}var ue={},Ze;function on(){if(Ze)return ue;Ze=1;var e=v&&v.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(ue,"__esModule",{value:!0});const t=b,s=M,n=Se(),r=e(ye()),c=(0,s.observer)(function({sequence:d,upstream:a,feature:x,downstream:_,model:l}){const{charactersPerRow:p,showCoordinatesSetting:j,showCoordinates:h}=l;let f=0,o=null,i=0;const u=x.strand===-1?-1:1,m=j==="genomic",g=m?u:1;let S=m?u>0?x.start+1-((a==null?void 0:a.length)||0):x.end+((a==null?void 0:a.length)||0):0;if(a){const{segments:C,remainder:E}=(0,n.splitString)({str:a,charactersPerRow:p,showCoordinates:h});o=(0,t.jsx)(r.default,{model:l,color:n.updownstreamColor,start:f,coordStart:S,chunks:C}),i=E,f=f+a.length*g,S=S+a.length*g}const{segments:D,remainder:y}=(0,n.splitString)({str:d,charactersPerRow:p,showCoordinates:h,currRemainder:i}),w=(0,t.jsx)(r.default,{model:l,color:n.genomeColor,start:f,coordStart:S,chunks:D});i=y,f+=d.length*g,S=S+d.length*g;let q=null;if(_){const{segments:C}=(0,n.splitString)({str:_,charactersPerRow:p,currRemainder:i,showCoordinates:h});q=(0,t.jsx)(r.default,{start:f,model:l,chunks:C,coordStart:S,color:n.updownstreamColor})}return(0,t.jsxs)(t.Fragment,{children:[o,w,q]})});return ue.default=c,ue}var de={},et;function an(){if(et)return de;et=1;var e=v&&v.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(de,"__esModule",{value:!0});const t=b,s=M,n=be,r=Se(),c=e(ye()),d=(0,s.observer)(function({cds:a,sequence:x,codonTable:_,model:l}){const{charactersPerRow:p,showCoordinates:j}=l,h=(0,n.stitch)(a,x);let f="";for(let i=0;i<h.length;i+=3)f+=_[h.slice(i,i+3)]||"&";const{segments:o}=(0,r.splitString)({str:f,charactersPerRow:p,showCoordinates:j});return(0,t.jsx)(c.default,{model:l,color:r.proteinColor,chunks:o,start:0})});return de.default=d,de}var tt;function ln(){if(tt)return ie;tt=1;var e=v&&v.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ie,"__esModule",{value:!0});const t=b,s=M,n=T(),r=be,c=e(rn()),d=e(sn()),a=e(on()),x=e(an()),_=(0,s.observer)(function({mode:l,feature:p,sequence:j,model:h}){var f;let{seq:o,upstream:i="",downstream:u=""}=j;const m=((f=p.subfeatures)===null||f===void 0?void 0:f.sort((y,w)=>y.start-w.start).map(y=>({...y,start:y.start-p.start,end:y.end-p.start})))||[];let g=(0,r.dedupe)(m.filter(y=>y.type==="CDS")),S=(0,r.dedupe)(m.filter(y=>{var w;return(w=y.type)===null||w===void 0?void 0:w.match(/utr/i)})),D=(0,r.dedupe)(m.filter(y=>y.type==="exon"));return!S.length&&g.length&&D.length&&(S=(0,r.calculateUTRs)(g,D)),!S.length&&g.length&&!D.length&&(S=(0,r.calculateUTRs2)(g,{start:0,end:p.end-p.start,type:"gene"})),p.strand===-1&&([o,i,u]=[(0,n.revcom)(o),(0,n.revcom)(u),(0,n.revcom)(i)],g=(0,r.revlist)(g,o.length),D=(0,r.revlist)(D,o.length),S=(0,r.revlist)(S,o.length)),(0,t.jsx)(t.Fragment,{children:l==="genomic"?(0,t.jsx)(a.default,{feature:p,model:h,sequence:o}):l==="genomic_sequence_updownstream"?(0,t.jsx)(a.default,{model:h,feature:p,sequence:o,upstream:i,downstream:u}):l==="cds"?(0,t.jsx)(d.default,{model:h,cds:g,sequence:o}):l==="cdna"?(0,t.jsx)(c.default,{model:h,exons:D,feature:p,cds:g,utr:S,sequence:o}):l==="protein"?(0,t.jsx)(x.default,{model:h,cds:g,codonTable:(0,n.generateCodonTable)(n.defaultCodonTable),sequence:o}):l==="gene"?(0,t.jsx)(c.default,{model:h,exons:D,feature:p,cds:g,utr:S,sequence:o,includeIntrons:!0}):l==="gene_collapsed_intron"?(0,t.jsx)(c.default,{model:h,exons:D,feature:p,cds:g,sequence:o,utr:S,includeIntrons:!0,collapseIntron:!0}):l==="gene_updownstream"?(0,t.jsx)(c.default,{model:h,exons:D,feature:p,cds:g,sequence:o,utr:S,upstream:i,downstream:u,includeIntrons:!0}):l==="gene_updownstream_collapsed_intron"?(0,t.jsx)(c.default,{model:h,exons:D,feature:p,cds:g,sequence:o,utr:S,upstream:i,downstream:u,includeIntrons:!0,collapseIntron:!0}):(0,t.jsx)("div",{children:"Unknown type"})})});return ie.default=_,ie}var fe={},nt;function cn(){if(nt)return fe;nt=1,Object.defineProperty(fe,"__esModule",{value:!0});const e=b,t=M,s=T();function n(c){return c===-1?"(-)":c===1?"(+)":""}const r=(0,t.observer)(function({mode:c,model:d,feature:a}){return(0,e.jsx)("div",{style:{background:"white"},children:`>${[[a.name||a.id,c].filter(x=>!!x).join("-"),`${a.refName}:${(0,s.toLocale)(a.start+1)}-${(0,s.toLocale)(a.end)}${n(a.strand)}`,c.endsWith("updownstream")?`+/- ${(0,s.toLocale)(d.upDownBp)} up/downstream bp`:""].filter(x=>!!x).join(" ")}
`})});return fe.default=r,fe}var rt;function St(){if(rt)return oe;rt=1;var e=v&&v.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(oe,"__esModule",{value:!0});const t=b,s=N,n=M,r=e(ln()),c=e(cn());function d({children:_}){return(0,t.jsx)("pre",{style:{fontFamily:"monospace",color:"black",fontSize:11},children:_})}function a({children:_}){return(0,t.jsx)("div",{style:{fontFamily:"monospace",color:"black",fontSize:11,maxWidth:600,whiteSpace:"wrap",wordBreak:"break-all"},children:_})}const x=(0,n.observer)((0,s.forwardRef)(function(l,p){const{sequence:j,model:h,feature:f}=l,{showCoordinates:o,mode:i}=h,u=o?d:a;return(0,t.jsx)("div",{"data-testid":"sequence_panel",ref:p,style:{maxHeight:300,overflow:"auto"},children:(0,t.jsxs)(u,{children:[(0,t.jsx)(c.default,{model:h,mode:i,feature:f}),(0,t.jsx)(r.default,{model:h,mode:i,feature:f,sequence:j})]})})}));return oe.default=x,oe}var _e={},st;function un(){if(st)return _e;st=1;var e=v&&v.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(_e,"__esModule",{value:!0});const t=b,s=N,n=H,r=A,c=M,d=B,a=e(St()),x=jt(),_=e(vt()),l=e(bt()),p=(0,d.makeStyles)()({dialogContent:{width:"80em"},formControl:{margin:0,marginLeft:4}}),j=(0,c.observer)(function({handleClose:h,model:f,feature:o}){const{sequenceFeatureDetails:i}=f,{upDownBp:u}=i,{classes:m}=p(),g=(0,s.useRef)(null),[S,D]=(0,s.useState)(!1),{sequence:y,error:w}=(0,x.useFeatureSequence)(f,o,u,S);return(0,t.jsxs)(n.Dialog,{maxWidth:"xl",open:!0,onClose:()=>{h()},title:"Sequence view",children:[(0,t.jsxs)(r.DialogContent,{className:m.dialogContent,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.default,{model:i}),(0,t.jsx)(_.default,{ref:g,model:i})]}),(0,t.jsxs)("div",{children:[o.type==="gene"?(0,t.jsx)(r.Typography,{children:"Note: inspect subfeature sequences for protein/CDS computations"}):null,w?(0,t.jsx)(n.ErrorMessage,{error:w}):y?"error"in y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Typography,{color:"error",children:y.error}),(0,t.jsx)(r.Button,{variant:"contained",color:"inherit",onClick:()=>{D(!0)},children:"Force load"})]}):(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(n.LoadingEllipses,{}),children:(0,t.jsx)(a.default,{ref:g,feature:o,sequence:y,model:i})}):(0,t.jsx)(n.LoadingEllipses,{})]})]}),(0,t.jsx)(r.DialogActions,{children:(0,t.jsx)(r.Button,{onClick:()=>{h()},variant:"contained",children:"Close"})})]})});return _e.default=j,_e}var ot;function dn(){if(ot)return ee;ot=1;var e=v&&v.__createBinding||(Object.create?function(o,i,u,m){m===void 0&&(m=u);var g=Object.getOwnPropertyDescriptor(i,u);(!g||("get"in g?!i.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return i[u]}}),Object.defineProperty(o,m,g)}:function(o,i,u,m){m===void 0&&(m=u),o[m]=i[u]}),t=v&&v.__setModuleDefault||(Object.create?function(o,i){Object.defineProperty(o,"default",{enumerable:!0,value:i})}:function(o,i){o.default=i}),s=v&&v.__importStar||function(){var o=function(i){return o=Object.getOwnPropertyNames||function(u){var m=[];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(m[m.length]=g);return m},o(i)};return function(i){if(i&&i.__esModule)return i;var u={};if(i!=null)for(var m=o(i),g=0;g<m.length;g++)m[g]!=="default"&&e(u,i,m[g]);return t(u,i),u}}(),n=v&&v.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ee,"__esModule",{value:!0});const r=b,c=N,d=A,a=M,x=jt(),_=H,l=n(vt()),p=n(bt()),j=(0,c.lazy)(()=>Promise.resolve().then(()=>s(St()))),h=(0,c.lazy)(()=>Promise.resolve().then(()=>s(un()))),f=(0,a.observer)(function({model:o,feature:i}){const{sequenceFeatureDetails:u}=o,{upDownBp:m}=u,g=(0,c.useRef)(null),[S,D]=(0,c.useState)(!1),[y,w]=(0,c.useState)(!1),{sequence:q,error:C}=(0,x.useFeatureSequence)(o,i,m,y);return(0,c.useEffect)(()=>{u.setFeature(i)},[u,i]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(p.default,{model:u}),(0,r.jsx)(l.default,{ref:g,model:u,extraItems:[{label:"Open in dialog",onClick:()=>{setTimeout(()=>{D(!0)},1)}}]})]}),S?(0,r.jsxs)("div",{children:["Open in dialog...",(0,r.jsx)(c.Suspense,{fallback:(0,r.jsx)(_.LoadingEllipses,{}),children:(0,r.jsx)(h,{model:o,feature:i,handleClose:()=>{D(!1)}})})]}):(0,r.jsxs)("div",{children:[i.type==="gene"?(0,r.jsx)(d.Typography,{children:"Note: inspect subfeature sequences for protein/CDS computations"}):null,C?(0,r.jsx)(_.ErrorMessage,{error:C}):q?"error"in q?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Typography,{color:"error",children:q.error}),(0,r.jsx)(d.Button,{variant:"contained",color:"inherit",onClick:()=>{w(!0)},children:"Force load"})]}):(0,r.jsx)(c.Suspense,{fallback:(0,r.jsx)(_.LoadingEllipses,{}),children:(0,r.jsx)(j,{ref:g,feature:i,sequence:q,model:u})}):(0,r.jsx)(_.LoadingEllipses,{})]})]})});return ee.default=f,ee}var pe={},it;function fn(){if(it)return pe;it=1;var e=v&&v.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=c;const t=b,s=H,n=e(ht),r=A;function c({handleClose:d}){return(0,t.jsxs)(s.Dialog,{maxWidth:"xl",open:!0,onClose:()=>{d()},title:"Feature sequence panel help",children:[(0,t.jsxs)(r.DialogContent,{children:[(0,t.jsx)(r.Typography,{children:'The "Feature sequence" panel shows the underlying genomic sequence for a given feature, fetched from the reference genome.'}),(0,t.jsx)(r.Typography,{children:"For gene features, this panel does special calculations to e.g. stitch together the coding sequence, the options are:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"CDS - shows the stitched together CDS sequences"}),(0,t.jsx)("li",{children:'Protein - the translated coding sequence, with the "standard" genetic code'}),(0,t.jsx)("li",{children:"cDNA - shows the 'copy DNA' of transcript, formed from exon sequences"}),(0,t.jsx)("li",{children:"Genomic w/ introns +/- Nbp up+down stream - the sequence underlying the entire gene including including introns, with UTR and CDS highlighted"})]}),(0,t.jsx)(r.Typography,{children:"For other feature types, the options are:"}),(0,t.jsx)("ul",{children:(0,t.jsx)("li",{children:"Genomic +/- Nbp up+down stream - the reference genome sequence underlying the feature, with the up and downstream sequence"})}),(0,t.jsxs)(r.Typography,{children:['Note 1: you can use the "gear icon" ',(0,t.jsx)(n.default,{})," to edit the number of bp displayed up/downstream and in the intron region"]}),(0,t.jsx)(r.Typography,{children:"Note 2: The 'Copy HTML' function retains the colors from the sequence panel but cannot be pasted into some programs like notepad that only expect plain text."})]}),(0,t.jsx)(r.DialogActions,{children:(0,t.jsx)(r.Button,{onClick:()=>{d()},autoFocus:!0,variant:"contained",children:"Close"})})]})}return pe}var _n=v&&v.__createBinding||(Object.create?function(e,t,s,n){n===void 0&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===void 0&&(n=s),e[n]=t[s]}),pn=v&&v.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yt=v&&v.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(s){var n=[];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var s={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&_n(s,t,n[r]);return pn(s,t),s}}(),hn=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Be,"__esModule",{value:!0});const G=b,ve=N,mn=hn(Lt),$e=A,gn=M,xn=B,jn=H,vn=T(),bn=(0,ve.lazy)(()=>Promise.resolve().then(()=>yt(dn()))),Sn=(0,ve.lazy)(()=>Promise.resolve().then(()=>yt(fn()))),yn=(0,xn.makeStyles)()(e=>({formControl:{margin:0},container:{marginTop:e.spacing(4),marginBottom:e.spacing(4)}})),qn=(0,gn.observer)(function({model:e,feature:t}){const{classes:s}=yn(),[n,r]=(0,ve.useState)(!1);return(0,G.jsxs)("div",{className:s.container,children:[(0,G.jsx)($e.FormControl,{className:s.formControl,children:(0,G.jsx)($e.Button,{variant:"contained",onClick:()=>{r(!n)},children:n?"Hide feature sequence":"Show feature sequence"})}),(0,G.jsx)($e.IconButton,{onClick:()=>{(0,vn.getSession)(e).queueDialog(c=>[Sn,{handleClose:c}])},children:(0,G.jsx)(mn.default,{})}),n?(0,G.jsx)(ve.Suspense,{fallback:(0,G.jsx)(jn.LoadingEllipses,{}),children:(0,G.jsx)(bn,{model:e,feature:t},t.uniqueId)}):null]})});Be.default=qn;(function(e){var t=v&&v.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Be;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(s).default}})})(xt);var he={},me={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.default=Nn;const Oe=b,Cn=N,Dn=A,wn=B,$n=H,On=T(),Fn=(0,wn.makeStyles)()(e=>({fieldValue:{wordBreak:"break-word",maxHeight:300,fontSize:12,padding:e.spacing(.5),overflow:"auto"}}));function Nn({value:e}){const{classes:t}=Fn(),s=/^https?:\/\//.exec(`${e}`);return(0,Oe.jsx)("div",{className:t.fieldValue,children:(0,Cn.isValidElement)(e)?e:s?(0,Oe.jsx)(Dn.Link,{href:`${e}`,children:`${e}`}):(0,Oe.jsx)($n.SanitizedHTML,{html:(0,On.isObject)(e)?JSON.stringify(e):String(e)})})}var U={};Object.defineProperty(U,"__esModule",{value:!0});U.default=kn;const Fe=b,Mn=A,Pn=B,Tn=(0,Pn.makeStyles)()(e=>({fieldDescription:{"&:hover":{background:e.palette.mode==="dark"?"#e65100":"yellow"}},fieldName:{wordBreak:"break-all",minWidth:90,borderBottom:"1px solid #0003",fontSize:12,background:e.palette.action.disabledBackground,marginRight:e.spacing(1),padding:e.spacing(.5)}}));function kn({description:e,name:t,width:s,prefix:n=[]}){const{classes:r,cx:c}=Tn(),d=[...n,t].join(".");return e?(0,Fe.jsx)(Mn.Tooltip,{title:e,placement:"left",children:(0,Fe.jsx)("div",{className:c(r.fieldDescription,r.fieldName),children:d})}):(0,Fe.jsx)("div",{className:r.fieldName,style:{width:s},children:d})}var at;function Bn(){if(at)return me;at=1;var e=v&&v.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(me,"__esModule",{value:!0}),me.default=x;const t=b,s=B,n=e(Dt()),r=e(Z),c=e(U),d=T(),a=(0,s.makeStyles)()(_=>({field:{display:"flex",flexWrap:"wrap"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:_.spacing(.5),border:`1px solid ${_.palette.action.selected}`,boxSizing:"border-box",overflow:"auto"}}));function x({name:_,value:l,description:p,prefix:j=[]}){const{classes:h}=a();return l.length===1?(0,d.isObject)(l[0])?(0,t.jsx)(n.default,{attributes:l[0],prefix:[...j,_]}):(0,t.jsxs)("div",{className:h.field,children:[(0,t.jsx)(c.default,{prefix:j,description:p,name:_}),(0,t.jsx)(r.default,{value:l[0]})]}):l.every(f=>(0,d.isObject)(f))?(0,t.jsx)(t.Fragment,{children:l.map((f,o)=>(0,t.jsx)(n.default,{attributes:f,prefix:[...j,`${_}-${o}`]},`${JSON.stringify(f)}-${o}`))}):(0,t.jsxs)("div",{className:h.field,children:[(0,t.jsx)(c.default,{prefix:j,description:p,name:_}),l.map((f,o)=>(0,t.jsx)("div",{className:h.fieldSubvalue,children:(0,t.jsx)(r.default,{value:f})},`${JSON.stringify(f)}-${o}`))]})}return me}var Ae={},An=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.default=Hn;const I=b,Ln=N,Ne=A,lt=Rt,Rn=B,En=An(U),In=H,ct=T(),Gn=(0,Rn.makeStyles)()(e=>({margin:{marginBottom:e.spacing(4)},cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}));function Hn({value:e,prefix:t,name:s}){const{classes:n}=Gn(),[r,c]=(0,Ln.useState)(!1),d=Object.keys(e[0]).sort(),a=new Set(d),x=Object.entries(e).map(([p,j])=>{const{id:h,...f}=j;return{id:p,identifier:h,...f}});for(const p of e)for(const j of Object.keys(p))a.add(j);let _;a.has("id")?(a.delete("id"),_=["identifier",...a]):_=[...a];const l=_.map(p=>(0,ct.measureGridWidth)(x.map(j=>j[p])));return a.size<d.length+5?(0,I.jsxs)("div",{className:n.margin,children:[(0,I.jsx)(En.default,{prefix:t,name:s}),(0,I.jsx)(Ne.FormControlLabel,{control:(0,I.jsx)(Ne.Checkbox,{checked:r,onChange:p=>{c(p.target.checked)}}),label:(0,I.jsx)(Ne.Typography,{variant:"body2",children:"Show options"})}),(0,I.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,I.jsx)(lt.DataGrid,{disableRowSelectionOnClick:!0,rows:x,rowHeight:20,columnHeaderHeight:35,hideFooter:x.length<25,slots:{toolbar:r?lt.GridToolbar:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}},columns:_.map((p,j)=>({field:p,renderCell:h=>{const f=h.value;return(0,I.jsx)("div",{className:n.cell,children:(0,I.jsx)(In.SanitizedHTML,{html:(0,ct.getStr)(f||"")})})},width:l[j]}))})})]}):null}var qe={},qt=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qe,"__esModule",{value:!0});qe.default=Jn;const Me=b,Vn=B,zn=qt(Z),Wn=qt(U),Un=(0,Vn.makeStyles)()({field:{display:"flex",flexWrap:"wrap"}});function Jn({name:e,value:t,description:s,prefix:n,width:r}){const{classes:c}=Un();return t!=null?(0,Me.jsxs)("div",{className:c.field,children:[(0,Me.jsx)(Wn.default,{prefix:n,description:s,name:e,width:r}),(0,Me.jsx)(zn.default,{value:t})]}):null}var Le={},Ct=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Le,"__esModule",{value:!0});Le.default=Zn;const Pe=b,Kn=B,Qn=Ct(Z),Xn=Ct(U),Yn=(0,Kn.makeStyles)()({field:{display:"flex",flexWrap:"wrap"}});function Zn({value:e,prefix:t,name:s}){const{classes:n}=Yn(),{uri:r,baseUri:c=""}=e;let d;try{d=new URL(r,c).href}catch{d=r}return(0,Pe.jsxs)("div",{className:n.field,children:[(0,Pe.jsx)(Xn.default,{prefix:t,name:s}),(0,Pe.jsx)(Qn.default,{value:d})]})}var ut;function Dt(){if(ut)return he;ut=1;var e=v&&v.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(he,"__esModule",{value:!0}),he.default=l;const t=b,s=e(Bn()),n=e(Ae),r=e(qe),c=e(Le),d=V,a=T(),x=170,_=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"];function l(p){const{attributes:j,omit:h=[],omitSingleLevel:f=[],descriptions:o,formatter:i=q=>q,hideUris:u,prefix:m=[]}=p,g=new Set([...h,..._,...f]),{__jbrowsefmt:S,...D}=j,y={...D,...S},w=(0,d.generateMaxWidth)(Object.entries(y).filter(([q,C])=>C!==void 0&&!g.has(q)),m);return(0,t.jsx)(t.Fragment,{children:Object.entries(y).filter(([q,C])=>C!==void 0&&!g.has(q)).map(([q,C])=>{const E=(0,d.accessNested)([...m,q],o);if(Array.isArray(C))return C.length>1&&C.every(J=>(0,a.isObject)(J))?(0,t.jsx)(n.default,{name:q,prefix:m,value:C},q):(0,t.jsx)(s.default,{name:q,value:C,description:E,prefix:m},q);if((0,a.isObject)(C)){const{omitSingleLevel:J,...P}=p;return(0,a.isUriLocation)(C)?u?null:(0,t.jsx)(c.default,{name:q,prefix:m,value:C},q):(0,t.jsx)(l,{...P,attributes:C,descriptions:o,prefix:[...m,q]},q)}else return(0,t.jsx)(r.default,{name:q,value:i(C,q),description:E,prefix:m,width:Math.min(w,x)},q)})})}return he}var Re={},er=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Re,"__esModule",{value:!0});var tr=Re.default=or;const X=b,nr=er(Et),ge=A,rr=B,sr=(0,rr.makeStyles)()(e=>({expansionPanelDetails:{display:"block",padding:e.spacing(1)},icon:{color:e.palette.tertiary.contrastText||"#fff"}}));function or({children:e,title:t,defaultExpanded:s=!0}){const{classes:n}=sr();return(0,X.jsxs)(ge.Accordion,{defaultExpanded:s,children:[(0,X.jsx)(ge.AccordionSummary,{expandIcon:(0,X.jsx)(nr.default,{className:n.icon}),children:(0,X.jsx)(ge.Typography,{variant:"button",children:t})}),(0,X.jsx)(ge.AccordionDetails,{className:n.expansionPanelDetails,children:e})]})}var Ee={},Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.default=ar;const dt=b,ir=T();function ar(e){const{feature:t}=e,s=t.strand,n={"-1":"-",0:"",1:"+"},r=n[s]?`(${n[s]})`:"",c=(0,ir.assembleLocString)(t);return(0,dt.jsx)(dt.Fragment,{children:`${c} ${r}`})}var wt=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.default=ur;const Y=b,lr=wt(Ie),ft=wt(qe),cr=T();function ur(e){const{feature:t}=e,s=t,n={...s,...s.__jbrowsefmt},{start:r,end:c}=n,d={...n,length:(0,cr.toLocale)(c-r)},a={description:"Description",name:"Name",length:"Length",type:"Type"};return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(ft.default,{name:"Position",value:(0,Y.jsx)(lr.default,{...e,feature:n})}),Object.entries(a).map(([x,_])=>[_,d[x]]).filter(([,x])=>x!=null).map(([x,_])=>(0,Y.jsx)(ft.default,{name:x,value:_},x))]})}var Ce=v&&v.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gt,"__esModule",{value:!0});var dr=gt.default=$t;const $=b,fr=It,W=A,_r=V,pr=Ce(xt),hr=Ce(Dt()),Te=Ce(Re),_t=Ce(Ee),mr=H,pt=T(),gr=["name","start","end","strand","refName","description","type"];function $t(e){const{omit:t=[],model:s,feature:n,depth:r=0}=e,{maxDepth:c}=s,{mate:d,name:a="",id:x="",type:_="",subfeatures:l,uniqueId:p}=n,j=(0,pt.getEnv)(s).pluginManager,h=(0,pt.getSession)(s),f=j.evaluateExtensionPoint("Core-extraFeaturePanel",null,{session:h,feature:n,model:s}),o=d;return(0,$.jsxs)(Te.default,{title:(0,_r.generateTitle)(a,x,_),children:[(0,$.jsx)(W.Typography,{children:"Core details"}),(0,$.jsx)(_t.default,{...e}),o?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(W.Divider,{}),(0,$.jsx)(W.Typography,{children:"Mate details"}),(0,$.jsx)(_t.default,{...e,feature:{...o,start:o.start,end:o.end,refName:o.refName,uniqueId:`${p}-mate`}})]}):null,(0,$.jsx)(W.Divider,{}),(0,$.jsx)(W.Typography,{children:"Attributes"}),(0,$.jsx)(hr.default,{attributes:n,...e,omit:t,omitSingleLevel:gr}),(0,$.jsx)(fr.ErrorBoundary,{FallbackComponent:i=>(0,$.jsx)(mr.ErrorMessage,{error:i.error}),children:(0,$.jsx)(pr.default,{...e})}),f?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(W.Divider,{}),(0,$.jsx)(Te.default,{title:f.name,children:(0,$.jsx)(f.Component,{...e})})]}):null,r<c&&(l!=null&&l.length)?(0,$.jsx)(Te.default,{title:"Subfeatures",defaultExpanded:r<1,children:l.map((i,u)=>(0,$.jsx)($t,{feature:{...i,uniqueId:`${p}_${u}`},model:s,depth:r+1},JSON.stringify(i)))}):null]})}function xr({columns:e,filter:t,setFilter:s}){return b.jsxs(b.Fragment,{children:[b.jsx(ke,{children:"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"}),e.map(({field:n})=>b.jsx(Gt,{placeholder:`Filter ${n}`,value:t[n]||"",onChange:r=>{s({...t,[n]:r.target.value})}},`filter-${n}`))]})}function jr(e){var t;const{feature:s,descriptions:n={}}=e,[r,c]=N.useState({}),d=s.samples||{},a=Object.entries(d);let x,_=[];const l=Object.keys(r);try{_=a.map(i=>({...Object.fromEntries(Object.entries(i[1]).map(u=>[u[0],`${u[1]}`])),sample:i[0],id:i[0]})).filter(i=>l.length?l.every(u=>{const m=r[u];return m?new RegExp(m,"i").exec(i[u]):!0}):!0)}catch(i){x=i}const[p,j]=N.useState(!1),h=["sample",...Object.keys(((t=a[0])===null||t===void 0?void 0:t[1])||{})],f=h.map(i=>Ht.measureGridWidth(_.map(u=>u[i]))),o=h.map((i,u)=>{var m,g;return{field:i,description:(g=(m=n==null?void 0:n.FORMAT)===null||m===void 0?void 0:m[i])===null||g===void 0?void 0:g.Description,width:f[u]}});return a.length?b.jsxs(tr,{...e,title:"Samples",children:[x?b.jsx(ke,{color:"error",children:`${x}`}):null,b.jsx(Vt,{control:b.jsx(zt,{checked:p,onChange:i=>{j(i.target.checked)}}),label:b.jsx(ke,{variant:"body2",children:"Show options"})}),p?b.jsx(xr,{setFilter:c,columns:o,filter:r}):null,b.jsx("div",{style:{display:"flex",flexDirection:"column"},children:b.jsx(Wt,{rows:_,hideFooter:_.length<100,columns:o,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:p?Ut:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}})})]}):null}const vr={CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"},xe=N.lazy(()=>mt(()=>import("./LaunchBreakendPanel-B-tjCaGv.js"),__vite__mapDeps([0,1,2]),import.meta.url)),Ot=N.lazy(()=>mt(()=>import("./VariantConsequenceDataGrid-CQ4bc2n1.js"),__vite__mapDeps([3,1,2]),import.meta.url));function br({descriptions:e,feature:t}){var s,n,r,c,d;const a=(n=(s=e==null?void 0:e.INFO)===null||s===void 0?void 0:s.ANN)===null||n===void 0?void 0:n.Description,x=((c=(r=a==null?void 0:a.match(/.*Functional annotations:'(.*)'$/))===null||r===void 0?void 0:r[1])===null||c===void 0?void 0:c.split("|"))||[],_=((d=t.INFO)===null||d===void 0?void 0:d.ANN)||[];return b.jsx(Ot,{fields:x,data:_,title:"Variant ANN field"})}function Sr({descriptions:e,feature:t}){var s,n,r,c,d;const a=(n=(s=e==null?void 0:e.INFO)===null||s===void 0?void 0:s.CSQ)===null||n===void 0?void 0:n.Description,x=((c=(r=a==null?void 0:a.match(/.*Format: (.*)/))===null||r===void 0?void 0:r[1])===null||c===void 0?void 0:c.split("|"))||[],_=((d=t.INFO)===null||d===void 0?void 0:d.CSQ)||[];return b.jsx(Ot,{fields:x,data:_,title:"Variant CSQ field"})}function yr({model:e}){const{featureData:t}=e,s=JSON.parse(JSON.stringify(t)),{type:n=""}=s;return n==="breakend"?b.jsx(xe,{feature:s,locStrings:s.ALT.map(r=>{var c;return((c=Qt(r))===null||c===void 0?void 0:c.MatePosition)||""}),model:e}):n==="translocation"?b.jsx(xe,{feature:s,model:e,locStrings:[`${s.INFO.CHR2[0]}:${s.INFO.END}`]}):n==="paired_feature"?b.jsx(xe,{feature:s,model:e,locStrings:[`${s.mate.refName}:${s.mate.start}`]}):n.includes("inversion")||n.includes("deletion")||n.includes("duplication")||n.includes("cnv")||n.includes("sv")?b.jsx(xe,{feature:{uniqueId:"random",refName:s.refName,start:s.start,end:s.start+1,mate:{refName:s.refName,start:s.end,end:s.end+1}},model:e,locStrings:[`${s.refName}:${s.end}`]}):null}const qr=Jt(function(e){const{model:t}=e,{featureData:s,descriptions:n}=t,r=JSON.parse(JSON.stringify(s)),{samples:c,ALT:d,...a}=r;return b.jsxs(Kt,{"data-testid":"variant-side-drawer",children:[b.jsx(dr,{feature:a,descriptions:{...vr,...n},...e}),b.jsxs(N.Suspense,{fallback:null,children:[b.jsx(Sr,{feature:a,descriptions:n}),b.jsx(br,{feature:a,descriptions:n}),b.jsx(yr,{model:t})]}),b.jsx(jr,{feature:r,...e,descriptions:n})]})}),Dr=Object.freeze(Object.defineProperty({__proto__:null,default:qr},Symbol.toStringTag,{value:"Module"}));export{Dr as V,tr as _};
//# sourceMappingURL=VariantFeatureWidget-Cs03f73R.js.map
