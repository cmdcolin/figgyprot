import{ad as m,j as e,o as d,m as j,c as C,au as c,dH as b,dI as y,dy as S,dJ as w,dK as z,a2 as f,c3 as I,c4 as k,B as R}from"./index-CT2bM4yV.js";import{_ as B,u as x}from"./index-Clz-n0uE.js";import{L as M}from"./Lock-BLIs4xA9.js";import E from"./ExportSvgDialog-D5zS0rQH.js";import{R as F}from"./Ruler-CyVbXVRT.js";const L=m(e.jsx("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen"),V=m(e.jsx("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}),"RotateLeft"),H=m(e.jsx("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"}),"RotateRight"),T=j()(t=>({controls:{position:"absolute",borderRight:`1px solid ${t.palette.divider}`,borderBottom:`1px solid ${t.palette.divider}`,left:0,top:0}})),O=d(function({model:t}){const{classes:o}=T(),[s,n]=C.useState(null);return e.jsxs("div",{className:o.controls,children:[e.jsx(c,{onClick:t.zoomOutButton,title:t.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:t.atMaxBpPerPx||t.lockedFitToWindow,children:e.jsx(b,{})}),e.jsx(c,{onClick:t.zoomInButton,disabled:t.atMinBpPerPx,title:"zoom in",children:e.jsx(y,{})}),e.jsx(c,{onClick:t.rotateCounterClockwiseButton,title:"rotate counter-clockwise",children:e.jsx(V,{})}),e.jsx(c,{onClick:t.rotateClockwiseButton,title:"rotate clockwise",children:e.jsx(H,{})}),e.jsx(c,{onClick:t.toggleFitToWindowLock,title:t.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:t.tooSmallToLock,children:t.lockedFitToWindow?e.jsx(M,{}):e.jsx(L,{})}),e.jsx(c,{onClick:r=>{n(r.currentTarget)},children:e.jsx(S,{})}),t.hideTrackSelectorButton?null:e.jsx(c,{onClick:t.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select",children:e.jsx(w,{})}),s?e.jsx(B,{anchorEl:s,menuItems:[{label:"Export SVG",icon:z,onClick:()=>{f.getSession(t).queueDialog(r=>[E,{model:t,handleClose:r}])}}],onMenuItemClick:(r,a)=>{a(),n(null)},open:!!s,onClose:()=>{n(null)}}):null]})}),W=j()(t=>({importFormContainer:{padding:t.spacing(6)}})),$=d(function({model:t}){const{classes:o}=W(),s=f.getSession(t),{error:n}=t,{assemblyNames:r,assemblyManager:a}=s,[u,h]=C.useState(r[0]),i=a.get(u),g=r.length?i==null?void 0:i.error:"No configured assemblies",l=(i==null?void 0:i.regions)||[],p=g||n;return e.jsxs(I,{className:o.importFormContainer,children:[p?e.jsx(k,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:e.jsx(x.ErrorMessage,{error:p})}):null,e.jsxs(k,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[e.jsx(x.AssemblySelector,{onChange:v=>{t.setError(void 0),h(v)},session:s,selected:u}),e.jsx(R,{disabled:!l.length,onClick:()=>{t.setError(void 0),t.setDisplayedRegions(l)},variant:"contained",color:"primary",children:l.length||p?"Open":"Loading..."})]})]})}),N=3,_=j()(t=>({root:{position:"relative",marginBottom:t.spacing(1),overflow:"hidden"},scroller:{overflow:"auto"}})),P=d(({model:t})=>e.jsxs(e.Fragment,{children:[t.staticSlices.map(o=>e.jsx(F,{model:t,slice:o},f.assembleLocString(o.region.elided?o.region.regions[0]:o.region))),t.tracks.map(o=>{const s=o.displays[0];return e.jsx(s.RenderingComponent,{display:s,view:t},s.id)})]})),K=d(({model:t})=>{const o=!!t.displayedRegions.length&&!!t.figureWidth&&!!t.figureHeight&&t.initialized,s=!o&&!t.disableImportForm,n=o&&!s;return s||t.error?e.jsx($,{model:t}):n?e.jsx(A,{model:t}):null}),A=d(function({model:t}){const{width:o,height:s,id:n,offsetRadians:r,centerXY:a,figureWidth:u,figureHeight:h,hideVerticalResizeHandle:i}=t,{classes:g}=_();return e.jsxs("div",{className:g.root,style:{width:o,height:s},"data-testid":n,children:[e.jsx("div",{className:g.scroller,style:{width:o,height:s},children:e.jsx("svg",{style:{transform:`rotate(${r}rad)`,transition:"transform 0.5s",transformOrigin:a.map(l=>`${l}px`).join(" "),position:"absolute",left:0,top:0},width:u,height:h,children:e.jsx("g",{transform:`translate(${a})`,children:e.jsx(P,{model:t})})})}),e.jsx(O,{model:t}),i?null:e.jsx(x.ResizeHandle,{onDrag:t.resizeHeight,style:{height:N,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}})]})});export{K as default};
//# sourceMappingURL=CircularView-DXPz9OQU.js.map
