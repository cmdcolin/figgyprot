{"version":3,"file":"SearchResultsDialog-CxGa60NI.js","sources":["../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/components/SearchResultsTable.js","../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/components/SearchResultsDialog.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { getEnv, getSession } from '@jbrowse/core/util';\nimport { Button, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, } from '@mui/material';\nimport { getRoot, resolveIdentifier } from 'mobx-state-tree';\nexport default function SearchResultsTable({ searchResults, assemblyName: optAssemblyName, model, handleClose, }) {\n    const session = getSession(model);\n    const { pluginManager } = getEnv(session);\n    const { assemblyManager } = session;\n    const assemblyName = optAssemblyName || model.displayedRegions[0].assemblyName;\n    const assembly = assemblyManager.get(assemblyName);\n    if (!assembly) {\n        throw new Error(`assembly ${assemblyName} not found`);\n    }\n    if (!assembly.regions) {\n        throw new Error(`assembly ${assemblyName} regions not loaded`);\n    }\n    function getTrackName(trackId) {\n        var _a;\n        if (trackId) {\n            const schema = pluginManager.pluggableConfigSchemaType('track');\n            const configuration = resolveIdentifier(schema, getRoot(model), trackId);\n            return ((_a = configuration === null || configuration === void 0 ? void 0 : configuration.name) === null || _a === void 0 ? void 0 : _a.value) || '';\n        }\n        return '';\n    }\n    async function handleClick(location) {\n        var _a;\n        try {\n            const newRegion = (_a = assembly === null || assembly === void 0 ? void 0 : assembly.regions) === null || _a === void 0 ? void 0 : _a.find(region => location === region.refName);\n            if (newRegion) {\n                model.setDisplayedRegions([newRegion]);\n                model.showAllRegions();\n            }\n            else {\n                await model.navToLocString(location, assemblyName);\n            }\n        }\n        catch (e) {\n            console.warn(e);\n            session.notify(`${e}`, 'warning');\n        }\n    }\n    return (_jsx(TableContainer, { component: Paper, children: _jsxs(Table, { children: [_jsx(TableHead, { children: _jsxs(TableRow, { children: [_jsx(TableCell, { children: \"Name\" }), _jsx(TableCell, { align: \"right\", children: \"Location\" }), _jsx(TableCell, { align: \"right\", children: \"Track\" }), _jsx(TableCell, { align: \"right\" })] }) }), _jsx(TableBody, { children: searchResults.map(result => (_jsxs(TableRow, { children: [_jsx(TableCell, { component: \"th\", scope: \"row\", children: result.getLabel() }), _jsx(TableCell, { align: \"right\", children: result.getLocation() }), _jsx(TableCell, { align: \"right\", children: getTrackName(result.getTrackId()) || 'N/A' }), _jsx(TableCell, { align: \"right\", children: _jsx(Button, { onClick: async () => {\n                                        try {\n                                            await handleClick(result.getLocation() || result.getLabel());\n                                            const resultTrackId = result.getTrackId();\n                                            if (resultTrackId) {\n                                                model.showTrack(resultTrackId);\n                                            }\n                                        }\n                                        catch (e) {\n                                            console.error(e);\n                                            session.notifyError(`${e}`, e);\n                                        }\n                                        handleClose();\n                                    }, color: \"primary\", variant: \"contained\", children: \"Go\" }) })] }, result.getId()))) })] }) }));\n}\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { Dialog } from '@jbrowse/core/ui';\nimport { Button, DialogActions, DialogContent, Divider, Typography, } from '@mui/material';\nimport SearchResultsTable from './SearchResultsTable';\nexport default function SearchResultsDialog({ model, assemblyName, searchQuery, searchResults, handleClose, }) {\n    return (_jsxs(Dialog, { open: true, maxWidth: \"xl\", onClose: handleClose, title: \"Search results\", children: [_jsx(DialogContent, { children: !(searchResults === null || searchResults === void 0 ? void 0 : searchResults.length) ? (_jsxs(Typography, { children: [\"No results found for \", _jsx(\"b\", { children: searchQuery })] })) : (_jsxs(_Fragment, { children: [_jsxs(Typography, { children: [\"Showing results for \", _jsx(\"b\", { children: searchQuery })] }), _jsx(SearchResultsTable, { model: model, handleClose: handleClose, assemblyName: assemblyName, searchResults: searchResults })] })) }), _jsx(Divider, {}), _jsx(DialogActions, { children: _jsx(Button, { onClick: () => {\n                        handleClose();\n                    }, color: \"primary\", children: \"Cancel\" }) })] }));\n}\n"],"names":["SearchResultsTable","searchResults","optAssemblyName","model","handleClose","session","getSession","pluginManager","getEnv","assemblyManager","assemblyName","assembly","getTrackName","trackId","_a","schema","configuration","resolveIdentifier","getRoot","handleClick","location","newRegion","region","e","_jsx","TableContainer","Paper","_jsxs","Table","TableHead","TableRow","TableCell","TableBody","result","Button","resultTrackId","SearchResultsDialog","searchQuery","Dialog","DialogContent","_Fragment","Typography","Divider","DialogActions"],"mappings":"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","x_google_ignoreList":[0,1]}