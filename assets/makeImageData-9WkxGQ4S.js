import{cU as V,cV as q,cW as A,cX as W,cY as $,cZ as x,c_ as B,c$ as H,d0 as I,d1 as R,d2 as Q,cQ as U}from"./index-CGKDrrCR.js";function E(){var e=0,n=1,c,r,d,o,f=q,b=!1,s;function t(a){return a==null||isNaN(a=+a)?s:f(d===0?.5:(a=(o(a)-c)*d,b?Math.max(0,Math.min(1,a)):a))}t.domain=function(a){return arguments.length?([e,n]=a,c=o(e=+e),r=o(n=+n),d=c===r?0:1/(r-c),t):[e,n]},t.clamp=function(a){return arguments.length?(b=!!a,t):b},t.interpolator=function(a){return arguments.length?(f=a,t):f};function u(a){return function(h){var i,g;return arguments.length?([i,g]=h,f=a(i,g),t):[f(0),f(1)]}}return t.range=u($),t.rangeRound=u(x),t.unknown=function(a){return arguments.length?(s=a,t):s},function(a){return o=a,c=a(e),r=a(n),d=c===r?0:1/(r-c),t}}function P(e,n){return n.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function T(){var e=V(E()(q));return e.copy=function(){return P(e,T())},A.apply(e,arguments)}function _(){var e=W(E()).domain([1,10]);return e.copy=function(){return P(e,_()).base(e.base())},A.apply(e,arguments)}function X(e){const n=e.length/6|0,c=new Array(n);let r=0;for(;r<n;)c[r]=`#${e.slice(r*6,++r*6)}`;return c}function Y(e){const n=e.length;return function(c){return e[Math.max(0,Math.min(n-1,Math.floor(c*n)))]}}const Z=Y(X("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));async function F(e,n){const{features:c,config:r,bpPerPx:d,stopToken:o,resolution:f,sessionId:b,adapterConfig:s,useLogScale:t,colorScheme:u,regions:a,pluginManager:h,yScalar:i}=n,{statusCallback:g=()=>{}}=n;g("Drawing Hi-C matrix");const m=a[0],{dataAdapter:D}=await B(h,b,s),w=await D.getResolution(d/f),L=(m.end-m.start)/d,p=w/(d*Math.sqrt(2)),N=H.colord(I.readConfObject(r,"baseColor")),y=Math.floor(m.start/w);if(c.length){let l=0;R(o);for(const{bin1:v,bin2:j,counts:k}of c)l=Math.max(k,l);R(o);const M={juicebox:["rgba(0,0,0,0)","red"],fall:Q(["rgb(255, 255, 255)","rgb(255, 255, 204)","rgb(255, 237, 160)","rgb(254, 217, 118)","rgb(254, 178, 76)","rgb(253, 141, 60)","rgb(252, 78, 42)","rgb(227, 26, 28)","rgb(189, 0, 38)","rgb(128, 0, 38)","rgb(0, 0, 0)"]),viridis:Z},C=t?l:l/20,S=M[u]||M.juicebox,O=t?_(S).domain([1,C]):T(S).domain([0,C]);i&&e.scale(1,i),e.save(),m.reversed===!0&&(e.scale(-1,1),e.translate(-L,0)),e.rotate(-Math.PI/4),U.forEachWithStopTokenCheck(c,o,({bin1:v,bin2:j,counts:k})=>{e.fillStyle=I.readConfObject(r,"color",{count:k,maxScore:l,baseColor:N,scale:O,useLogScale:t}),e.fillRect((v-y)*p,(j-y)*p,p,p)}),e.restore()}}export{F as makeImageData};
//# sourceMappingURL=makeImageData-9WkxGQ4S.js.map
