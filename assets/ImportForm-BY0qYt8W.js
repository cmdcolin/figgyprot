import{o as R,u as w,j as s,bf as F,bg as I,m as k,a as u,c as E,aj as m,ar as L,i as M,B as N,bh as O,bi as G}from"./index-DQP-8m57.js";import{C as T}from"./Container-BqSiQx_j.js";import{G as V}from"./Grid-DSjVwpqQ.js";import"./getThemeProps-CxhQYenD.js";import"./useThemeProps-BmWfpJIl.js";const B=R(function({model:e,selectedAsm:a,value:r,setValue:l,setOption:c}){const d=w.getSession(e),{assemblyManager:p,textSearchManager:o}=d,{rankSearchResults:g}=e,t=e.searchScope(a),h=p.get(a);return s.jsx(F,{fetchResults:n=>I({queryString:n,assembly:h,textSearchManager:o,rankSearchResults:g,searchScope:t}),model:e,assemblyName:a,value:r,minWidth:270,onChange:n=>{l(n)},onSelect:n=>{c(n)},TextFieldProps:{variant:"outlined",helperText:"Enter sequence name, feature name, or location"}})}),D=k()(e=>({importFormContainer:{padding:e.spacing(2)},button:{margin:e.spacing(2)},container:{padding:e.spacing(4)}})),W=R(function({model:e}){var a;const{classes:r}=D(),l=w.getSession(e),{assemblyNames:c,assemblyManager:d}=l,{error:p}=e,[o,g]=u.useState(c[0]),[t,h]=u.useState(),n=d.get(o),x=c.length?n==null?void 0:n.error:"No configured assemblies",y=x||p,[i,S]=u.useState(""),b=n==null?void 0:n.regions,A=!!b,j=b&&((a=b[0])===null||a===void 0?void 0:a.refName)||"";return u.useEffect(()=>{S(j)},[j,o]),s.jsxs("div",{className:r.container,children:[y?s.jsx(E.ErrorMessage,{error:y}):null,s.jsx(T,{className:r.importFormContainer,children:s.jsx("form",{onSubmit:async f=>{var v;if(f.preventDefault(),e.setError(void 0),i)try{(t==null?void 0:t.getDisplayString())===i&&t.hasLocation()?await O({option:t,model:e,assemblyName:o}):!((v=t==null?void 0:t.results)===null||v===void 0)&&v.length?e.setSearchResults(t.results,t.getLabel(),o):n&&await G({input:i,assembly:n,model:e})}catch(C){console.error(C),l.notify(`${C}`,"warning")}},children:s.jsxs(V,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[s.jsx(m,{children:s.jsx(E.AssemblySelector,{onChange:f=>{g(f)},localStorageKey:"lgv",session:l,selected:o})}),o?x?s.jsx(L,{style:{color:"red"}}):A?s.jsx(m,{children:s.jsx(B,{value:i,setValue:S,selectedAsm:o,setOption:h,model:e})}):s.jsx(M,{size:20,disableShrink:!0}):null,s.jsx(m,{children:s.jsx(N,{type:"submit",disabled:!i,className:r.button,variant:"contained",color:"primary",children:"Open"})}),s.jsx(m,{children:s.jsx(N,{disabled:!i,className:r.button,onClick:()=>{e.setError(void 0),e.showAllRegionsInAssembly(o)},variant:"contained",color:"secondary",children:"Show all regions in assembly"})})]})})})]})});export{W as default};
//# sourceMappingURL=ImportForm-BY0qYt8W.js.map
