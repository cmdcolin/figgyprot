var y=Object.defineProperty;var x=(s,a,e)=>a in s?y(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var d=(s,a,e)=>x(s,typeof a!="symbol"?a+"":a,e);import{B as F}from"./index-8HxHVJ6-.js";import{ah as g,u as m}from"./index-DQP-8m57.js";import{r as w}from"./rxjs-ZYIyRYdN.js";class _ extends F.BaseFeatureDataAdapter{constructor(){super(...arguments);d(this,"feats")}async loadDataP(){const{features:e}=JSON.parse(await g.openLocation(this.getConf("location")).readFile("utf8")),r=this.getConf("scoreField");return e.map(({begin:i,end:p,...t},c)=>{var n,o,f,u,l;return{...t,uniqueId:`feat-${c}`,start:+i,end:+p+1,score:r==="population_frequency"?(o=(n=t.populationFrequencies)==null?void 0:n[0])==null?void 0:o.frequency:r==="variant_impact_score"?(u=(f=t.predictions)==null?void 0:f[0])==null?void 0:u.score:void 0,description:(l=t.descriptions)==null?void 0:l.map(h=>h.value).join(","),name:[t.mutatedType?`${t.wildType}->${t.mutatedType}`:`${t.wildType}->del`]}})}async loadData(e={}){return this.feats=this.feats??this.loadDataP().catch(r=>{throw this.feats=void 0,r}),this.feats}async getRefNames(e={}){return[]}getFeatures(e,r={}){return w.ObservableCreate(async i=>{const{start:p,end:t,refName:c}=e,n=await this.loadData();for(const o of n)m.doesIntersect2(o.start,o.end,p,t)&&i.next(new m.SimpleFeature({...o,refName:c}));i.complete()})}freeResources(){}}d(_,"capabilities",["getFeatures","getRefNames"]);export{_ as default};
//# sourceMappingURL=UniProtVariationAdapter-D42c5RbB.js.map
