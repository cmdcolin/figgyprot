import{o as y,c as u,j as e,e as R,M as I,cB as b,cC as d,m as L,bX as O,P as A,ap as j,cD as m,h as f,R as g,F as B,cE as _,B as w}from"./index-CGKDrrCR.js";const G=y(function({model:r,selectedAssembly:a}){var n;const t=a?r.tracksForAssembly(a):void 0,p=((n=t==null?void 0:t[0])===null||n===void 0?void 0:n.track.trackId)||"",[l,x]=u.useState(p);return u.useEffect(()=>{const o=t==null?void 0:t.find(c=>l===c.track.trackId);o&&(r.setFileSource(o.loc),r.setFileType(o.type))},[r,l,t]),e.jsx("div",{children:t!=null&&t.length?e.jsx(R,{select:!0,label:"Tracks",variant:"outlined",value:l,onChange:o=>{x(o.target.value)},children:t.map(({track:o,label:c})=>e.jsx(I,{value:o.trackId,children:b.coarseStripHTML(c)},o.trackId))}):e.jsx(d.ErrorMessage,{error:`No tracks found for ${a}`})})}),P=L()({container:{margin:"0 auto",maxWidth:"40em",padding:20}}),z=y(function({model:r}){var a;const n=b.getSession(r),{classes:t}=P(),{assemblyNames:p,assemblyManager:l}=n,{loading:x,fileType:o,fileSource:c,isReadyToOpen:S,fileTypes:k,error:F}=r,[i,T]=u.useState(p[0]),[h,C]=u.useState("custom"),v=((a=l.get(i))===null||a===void 0?void 0:a.error)||F,E=O(r);return e.jsxs("div",{children:[v?e.jsx(d.ErrorMessage,{error:v}):null,e.jsxs(A,{className:t.container,children:[x?e.jsx(d.LoadingEllipses,{variant:"h6"}):null,e.jsx("div",{children:e.jsx(j,{component:"fieldset",children:e.jsx(m,{row:!0,"aria-label":"file type",name:"type",value:o,onChange:s=>{C(s.target.value)},children:Object.entries({custom:"Open file from URL or local computer",existing:"Open from track"}).map(([s,M])=>e.jsx(f,{checked:h===s,value:s,control:e.jsx(g,{}),label:M},s))})})}),h==="custom"?e.jsx("div",{children:e.jsx(j,{component:"fieldset",children:e.jsx(B,{children:e.jsx(d.FileSelector,{inline:!0,location:c,rootModel:E,setLocation:s=>{r.setFileSource(s)}})})})}):i?e.jsx(G,{model:r,selectedAssembly:i}):e.jsx("div",{children:"Select assembly"}),e.jsx("div",{children:e.jsxs(j,{component:"fieldset",children:[e.jsx(_,{component:"legend",children:"File Type"}),e.jsx(m,{row:!0,"aria-label":"file type",name:"type",value:o,onChange:s=>{r.setFileType(s.target.value)},children:k.map(s=>e.jsx(f,{checked:o===s,value:s,control:e.jsx(g,{}),label:s},s))})]})}),e.jsx("div",{children:e.jsx(d.AssemblySelector,{session:n,selected:i,onChange:s=>{T(s)}})}),e.jsx("div",{children:e.jsx(w,{disabled:!S||!!v,variant:"contained","data-testid":"open_spreadsheet",color:"primary",onClick:()=>{r.import(i)},children:"Open"})})]})]})});export{z as default};
//# sourceMappingURL=ImportWizard-BHzNL_on.js.map
