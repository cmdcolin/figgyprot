import{b3 as d,J as l,b4 as u,am as p,an as g}from"./index-CGKDrrCR.js";function m(n){const a=n.slice(n.lastIndexOf("/")+1);return a.slice(0,a.lastIndexOf("."))}class b extends d.BaseFeatureDataAdapter{async getAdapters(){const a=this.getSubAdapter;if(!a)throw new Error("no getSubAdapter available");let t=this.getConf("subadapters");return t!=null&&t.length||(t=this.getConf("bigWigs").map(s=>({type:"BigWigAdapter",source:m(s),bigWigLocation:{uri:s}}))),Promise.all(t.map(async r=>{const s=(await a(r)).dataAdapter;return{source:r.name||s.id,...r,dataAdapter:s}}))}async getRefNames(a){const t=await this.getAdapters(),r=await Promise.all(t.map(s=>s.dataAdapter.getRefNames(a)));return[...new Set(r.flat())]}async getGlobalStats(a){const t=await this.getAdapters(),r=(await Promise.all(t.map(e=>{var c,o;return(o=(c=e.dataAdapter).getGlobalStats)===null||o===void 0?void 0:o.call(c,a)}))).filter(e=>!!e),s=l.min(r.map(e=>e.scoreMin)),i=l.max(r.map(e=>e.scoreMax));return{scoreMin:s,scoreMax:i}}getFeatures(a,t={}){return u(async r=>{const s=await this.getAdapters();p.merge(...s.map(i=>i.dataAdapter.getFeatures(a,t).pipe(g.map(e=>e.get("source")?e:new l.SimpleFeature({...e.toJSON(),uniqueId:`${i.source}-${e.id()}`,source:i.source}))))).subscribe(r)},t.stopToken)}async getMultiRegionFeatureDensityStats(a){return{featureDensity:0}}async getSources(a){return(await this.getAdapters()).map(({dataAdapter:r,source:s,name:i,...e})=>({name:s,__name:i,...e}))}freeResources(){}}b.capabilities=["hasResolution","hasLocalStats","hasGlobalStats"];export{b as default};
//# sourceMappingURL=MultiWiggleAdapter-NK72GL9A.js.map
