import{j as n,bN as D,d5 as ne,o as x,m as M,e1 as te,T as y,a8 as S,c as h,F as se,dy as re,e2 as oe,a9 as ae,at as ie,e3 as F,cS as Z,dO as ce}from"./index-CGKDrrCR.js";import{_ as I,u as G}from"./index-CmLsXt2o.js";import"./Dialog-DMOWZHAH.js";var p={},le=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(p,"__esModule",{value:!0});p.ContentCopy=de;p.Indexing=fe;p.ContentCut=he;p.ContentPaste=pe;var ue=p.TrackSelector=ve;p.SaveAs=me;p.Save=be;p.DNA=xe;p.Cable=Ce;const c=n,v=le(ne);function de(e){return(0,c.jsx)(v.default,{...e,children:(0,c.jsx)("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"})})}function fe(e){return(0,c.jsx)(v.default,{...e,children:(0,c.jsx)("path",{d:"M19.31 18.9L22.39 22L21 23.39L17.88 20.32C17.19 20.75 16.37 21 15.5 21C13 21 11 19 11 16.5C11 14 13 12 15.5 12C18 12 20 14 20 16.5C20 17.38 19.75 18.21 19.31 18.9M15.5 19C16.88 19 18 17.88 18 16.5C18 15.12 16.88 14 15.5 14C14.12 14 13 15.12 13 16.5C13 17.88 14.12 19 15.5 19M21 4V6H3V4H21M3 16V14H9V16H3M3 11V9H21V11H18.97C17.96 10.37 16.77 10 15.5 10C14.23 10 13.04 10.37 12.03 11H3Z"})})}function he(e){return(0,c.jsx)(v.default,{...e,children:(0,c.jsx)("path",{d:"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z"})})}function pe(e){return(0,c.jsx)(v.default,{...e,children:(0,c.jsx)("path",{d:"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"})})}function ve(e){return(0,c.jsx)(v.default,{...e,children:(0,c.jsx)("path",{d:"M21 19v-2H8v2h13m0-6v-2H8v2h13M8 7h13V5H8v2M4 5v2h2V5H4M3 5a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z"})})}function me(e){return(0,c.jsx)(v.default,{...e,children:(0,c.jsx)("path",{fill:"currentColor",d:"M10,19L10.14,18.86C8.9,18.5 8,17.36 8,16A3,3 0 0,1 11,13C12.36,13 13.5,13.9 13.86,15.14L20,9V7L16,3H4C2.89,3 2,3.9 2,5V19A2,2 0 0,0 4,21H10V19M4,5H14V9H4V5M20.04,12.13C19.9,12.13 19.76,12.19 19.65,12.3L18.65,13.3L20.7,15.35L21.7,14.35C21.92,14.14 21.92,13.79 21.7,13.58L20.42,12.3C20.31,12.19 20.18,12.13 20.04,12.13M18.07,13.88L12,19.94V22H14.06L20.12,15.93L18.07,13.88Z"})})}function be(e){return(0,c.jsx)(v.default,{...e,children:(0,c.jsx)("path",{fill:"currentColor",d:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"})})}function xe(e){return(0,c.jsx)(v.default,{...e,children:(0,c.jsx)("path",{fill:"currentColor",d:"M4,2H6V4C6,5.44 6.68,6.61 7.88,7.78C8.74,8.61 9.89,9.41 11.09,10.2L9.26,11.39C8.27,10.72 7.31,10 6.5,9.21C5.07,7.82 4,6.1 4,4V2M18,2H20V4C20,6.1 18.93,7.82 17.5,9.21C16.09,10.59 14.29,11.73 12.54,12.84C10.79,13.96 9.09,15.05 7.88,16.22C6.68,17.39 6,18.56 6,20V22H4V20C4,17.9 5.07,16.18 6.5,14.79C7.91,13.41 9.71,12.27 11.46,11.16C13.21,10.04 14.91,8.95 16.12,7.78C17.32,6.61 18,5.44 18,4V2M14.74,12.61C15.73,13.28 16.69,14 17.5,14.79C18.93,16.18 20,17.9 20,20V22H18V20C18,18.56 17.32,17.39 16.12,16.22C15.26,15.39 14.11,14.59 12.91,13.8L14.74,12.61M7,3H17V4L16.94,4.5H7.06L7,4V3M7.68,6H16.32C16.08,6.34 15.8,6.69 15.42,7.06L14.91,7.5H9.07L8.58,7.06C8.2,6.69 7.92,6.34 7.68,6M9.09,16.5H14.93L15.42,16.94C15.8,17.31 16.08,17.66 16.32,18H7.68C7.92,17.66 8.2,17.31 8.58,16.94L9.09,16.5M7.06,19.5H16.94L17,20V21H7V20L7.06,19.5Z"})})}function Ce(e){return(0,c.jsx)(v.default,{...e,children:(0,c.jsx)("path",{d:"M20 5V4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v1h-1v4c0 .55.45 1 1 1h1v7c0 1.1-.9 2-2 2s-2-.9-2-2V7c0-2.21-1.79-4-4-4S5 4.79 5 7v7H4c-.55 0-1 .45-1 1v4h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1v-4c0-.55-.45-1-1-1H7V7c0-1.1.9-2 2-2s2 .9 2 2v10c0 2.21 1.79 4 4 4s4-1.79 4-4v-7h1c.55 0 1-.45 1-1V5h-1z"})})}const ge=M()(()=>({bp:{display:"flex",alignItems:"center",marginLeft:10},searchBox:{display:"flex"}})),je=x(function({view:e}){const{classes:r}=ge(),{assemblyNames:o,coarseTotalBp:t}=e;return n.jsxs("span",{className:r.searchBox,children:[n.jsx(te,{model:e,showHelp:!1}),n.jsxs(y,{variant:"body2",color:"textSecondary",className:r.bp,children:[o.join(",")," ",S.toLocale(Math.round(t))," bp"]})]})}),Me=M()({inline:{display:"inline-flex"}}),He=x(function({model:e}){const{classes:r}=Me(),{views:o}=e,[t,d]=h.useState(o.length<=3),[i,f]=h.useState(o.length<=3);return n.jsxs(se,{row:!0,children:[n.jsx(I,{menuItems:[{label:"Synteny track selectors",type:"subMenu",subMenu:o.slice(0,-1).map((a,l)=>({label:`Row ${l+1}->${l+2} (${o[l].assemblyNames.join(",")}->${o[l+1].assemblyNames.join(",")})`,onClick:()=>{e.activateTrackSelector(l)}}))},{label:"Row track selectors",type:"subMenu",subMenu:o.map((a,l)=>({label:`Row ${l+1} track selector (${a.assemblyNames.join(",")})`,onClick:()=>a.activateTrackSelector()}))}],children:n.jsx(ue,{})}),n.jsx(I,{menuItems:[{label:"Row view menus",type:"subMenu",subMenu:o.map((a,l)=>({label:`View ${l+1} Menu`,subMenu:a.menuItems()}))},...e.headerMenuItems()],children:n.jsx(re,{})}),n.jsx(I,{menuItems:[{label:"Show search boxes",type:"checkbox",checked:t,onClick:()=>{d(!t)}},{label:"Orientation - Side-by-side",type:"radio",checked:i,onClick:()=>{f(!i)}},{label:"Orientation - Vertical",type:"radio",checked:!i,onClick:()=>{f(!i)}}],children:n.jsx(oe,{})}),t?n.jsx("span",{className:i?r.inline:void 0,children:o.map(a=>n.jsx(je,{view:a},a.id))}):null]})}),J=M()({container:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},resizeHandle:{height:4,background:"#ccc"}});function Ve({view:e}){const{pluginManager:r}=S.getEnv(e),{ReactComponent:o}=r.getViewType(e.type);return n.jsx(o,{model:e})}const ye=x(function({model:e}){const{classes:r}=J(),{views:o,levels:t}=e;return n.jsx("div",{className:r.container,children:o.map((d,i)=>n.jsxs(n.Fragment,{children:[i>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:r.container,children:n.jsx(Se,{model:e,level:i-1})}),n.jsx(G.ResizeHandle,{onDrag:f=>{var a,l;return(a=t[i-1])===null||a===void 0?void 0:a.setHeight((((l=t[i-1])===null||l===void 0?void 0:l.height)||0)+f)},className:r.resizeHandle})]}):null,n.jsx(Ve,{view:d})]},d.id))})}),Se=x(function({model:e,level:r}){var o;const{classes:t}=J();return n.jsx(n.Fragment,{children:(o=e.levels[r])===null||o===void 0?void 0:o.tracks.map(d=>{const[i]=d.displays,{RenderingComponent:f}=i,a=ae.getConf(d,"trackId");return f?n.jsx("div",{className:t.overlay,style:{height:i.height,overflow:"hidden"},children:n.jsx(f,{model:i})},a):null})})}),Ae=M()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",background:"red",zIndex:1001}}),Le=x(function({model:e,coordX:r}){const{classes:o}=Ae();return n.jsx(ie,{open:!0,placement:"top",title:e.views.map(t=>t.pxToBp(r)).map((t,d)=>n.jsx("div",{children:S.stringify(t,!0)},[JSON.stringify(t),d].join("-"))),arrow:!0,children:n.jsx("div",{className:o.guide,style:{left:r}})})}),we=M()(e=>({rubberband:{height:"100%",background:ce(e.palette.tertiary.main,.7),position:"absolute",zIndex:900,textAlign:"center",overflow:"hidden"},rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberbandText:{color:e.palette.tertiary.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}})),ke=x(function({model:r,ControlComponent:o=n.jsx("div",{})}){const[t,d]=h.useState(),[i,f]=h.useState(),[a,l]=h.useState(),[_,k]=h.useState(),C=h.useRef(null),A=h.useRef(null),{classes:m}=we(),H=t!==void 0&&a===void 0;h.useEffect(()=>{function s(V,b){if(t===void 0)return;let g=t,j=V;j<g&&([g,j]=[j,g]);const L=b.pxToBp(g),w=b.pxToBp(j);return{leftOffset:L,rightOffset:w}}function u(V){if(C.current&&H){const b=V.clientX-C.current.getBoundingClientRect().left;f(b)}}function P(V){if(t!==void 0&&C.current){const{clientX:b,clientY:g}=V,j=C.current,L=b-j.getBoundingClientRect().left;l({offsetX:L,clientX:b,clientY:g}),Z(()=>{for(const w of r.views){const z=s(L,w);if(z){const{leftOffset:W,rightOffset:ee}=z;w.setOffsets(W,ee)}}}),k(void 0)}}return H?(window.addEventListener("mousemove",u),window.addEventListener("mouseup",P),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",P)}):()=>{}},[t,H,r]),h.useEffect(()=>{!H&&i!==void 0&&t!==void 0&&Math.abs(i-t)<=3&&N()},[H,i,t]);function T(s){s.preventDefault(),s.stopPropagation();const u=s.clientX-s.target.getBoundingClientRect().left;d(u),f(u)}function $(s){const u=s.target;k(s.clientX-u.getBoundingClientRect().left)}function E(){k(void 0),Z(()=>{for(const s of r.views)s.setOffsets(void 0,void 0)})}function N(){l(void 0),d(void 0),f(void 0)}const U=!!a;function Y(s,u){u(),N()}if(t===void 0)return n.jsxs(n.Fragment,{children:[_!==void 0?n.jsx(Le,{model:r,coordX:_}):null,n.jsx("div",{ref:C,className:m.rubberbandControl,onMouseDown:T,onMouseOut:E,onMouseMove:$,children:o})]});const X=a?a.offsetX:i||0,O=Math.min(X,t),B=Math.abs(X-t),{views:R}=r,q=R.map(s=>s.pxToBp(O)),K=R.map(s=>s.pxToBp(O+B)),Q=R.map(s=>Math.ceil(B*s.bpPerPx));return n.jsxs(n.Fragment,{children:[A.current?n.jsxs(n.Fragment,{children:[n.jsx(F,{className:m.popover,classes:{paper:m.paper},open:!0,anchorEl:A.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0,children:q.map((s,u)=>n.jsx(y,{children:S.stringify(s,!0)},[JSON.stringify(s),u,"left"].join("-")))}),n.jsx(F,{className:m.popover,classes:{paper:m.paper},open:!0,anchorEl:A.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0,children:K.map((s,u)=>n.jsx(y,{children:S.stringify(s,!0)},[JSON.stringify(s),u,"right"].join("-")))})]}):null,n.jsx("div",{ref:A,className:m.rubberband,style:{left:O,width:B},children:n.jsx(y,{variant:"h6",className:m.rubberbandText,children:Q.map((s,u)=>n.jsx(y,{children:`${s.toLocaleString("en-US")}bp`},`${s}_${u}`))})}),n.jsx("div",{className:m.rubberbandControl,ref:C,onMouseDown:T,onMouseOut:E,onMouseMove:$,children:o}),a?n.jsx(G.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:a.clientX,top:a.clientY},onMenuItemClick:Y,open:U,onClose:N,menuItems:r.rubberBandMenuItems()}):null]})}),Ne=M()(e=>({rubberbandContainer:{position:"relative",overflow:"hidden"},rubberbandDiv:{width:"100%",background:e.palette.action.disabledBackground,height:15,"&:hover":{background:e.palette.action.selected}}})),Ie=x(function({model:e}){const{classes:r}=Ne();return n.jsxs("div",{className:r.rubberbandContainer,children:[n.jsx(He,{model:e}),n.jsx(ke,{model:e,ControlComponent:n.jsx("div",{className:r.rubberbandDiv})}),n.jsx(ye,{model:e})]})});export{Ie as default};
//# sourceMappingURL=LinearComparativeView-CGbeK8Au.js.map
