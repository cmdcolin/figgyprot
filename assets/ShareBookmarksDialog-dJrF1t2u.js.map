{"version":3,"file":"ShareBookmarksDialog-dJrF1t2u.js","sources":["../../node_modules/@jbrowse/plugin-grid-bookmark/node_modules/@jbrowse/core/ui/Icons.js","../../node_modules/@jbrowse/plugin-grid-bookmark/esm/GridBookmarkWidget/components/dialogs/ShareBookmarksDialog.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContentCopy = ContentCopy;\nexports.Indexing = Indexing;\nexports.ContentCut = ContentCut;\nexports.ContentPaste = ContentPaste;\nexports.TrackSelector = TrackSelector;\nexports.SaveAs = SaveAs;\nexports.Save = Save;\nexports.DNA = DNA;\nexports.Cable = Cable;\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\nconst SvgIcon_1 = __importDefault(require(\"@mui/material/SvgIcon\"));\nfunction ContentCopy(props) {\n    return ((0, jsx_runtime_1.jsx)(SvgIcon_1.default, { ...props, children: (0, jsx_runtime_1.jsx)(\"path\", { d: \"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\" }) }));\n}\nfunction Indexing(props) {\n    return ((0, jsx_runtime_1.jsx)(SvgIcon_1.default, { ...props, children: (0, jsx_runtime_1.jsx)(\"path\", { d: \"M19.31 18.9L22.39 22L21 23.39L17.88 20.32C17.19 20.75 16.37 21 15.5 21C13 21 11 19 11 16.5C11 14 13 12 15.5 12C18 12 20 14 20 16.5C20 17.38 19.75 18.21 19.31 18.9M15.5 19C16.88 19 18 17.88 18 16.5C18 15.12 16.88 14 15.5 14C14.12 14 13 15.12 13 16.5C13 17.88 14.12 19 15.5 19M21 4V6H3V4H21M3 16V14H9V16H3M3 11V9H21V11H18.97C17.96 10.37 16.77 10 15.5 10C14.23 10 13.04 10.37 12.03 11H3Z\" }) }));\n}\nfunction ContentCut(props) {\n    return ((0, jsx_runtime_1.jsx)(SvgIcon_1.default, { ...props, children: (0, jsx_runtime_1.jsx)(\"path\", { d: \"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z\" }) }));\n}\nfunction ContentPaste(props) {\n    return ((0, jsx_runtime_1.jsx)(SvgIcon_1.default, { ...props, children: (0, jsx_runtime_1.jsx)(\"path\", { d: \"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z\" }) }));\n}\nfunction TrackSelector(props) {\n    return ((0, jsx_runtime_1.jsx)(SvgIcon_1.default, { ...props, children: (0, jsx_runtime_1.jsx)(\"path\", { d: \"M21 19v-2H8v2h13m0-6v-2H8v2h13M8 7h13V5H8v2M4 5v2h2V5H4M3 5a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z\" }) }));\n}\nfunction SaveAs(props) {\n    return ((0, jsx_runtime_1.jsx)(SvgIcon_1.default, { ...props, children: (0, jsx_runtime_1.jsx)(\"path\", { fill: \"currentColor\", d: \"M10,19L10.14,18.86C8.9,18.5 8,17.36 8,16A3,3 0 0,1 11,13C12.36,13 13.5,13.9 13.86,15.14L20,9V7L16,3H4C2.89,3 2,3.9 2,5V19A2,2 0 0,0 4,21H10V19M4,5H14V9H4V5M20.04,12.13C19.9,12.13 19.76,12.19 19.65,12.3L18.65,13.3L20.7,15.35L21.7,14.35C21.92,14.14 21.92,13.79 21.7,13.58L20.42,12.3C20.31,12.19 20.18,12.13 20.04,12.13M18.07,13.88L12,19.94V22H14.06L20.12,15.93L18.07,13.88Z\" }) }));\n}\nfunction Save(props) {\n    return ((0, jsx_runtime_1.jsx)(SvgIcon_1.default, { ...props, children: (0, jsx_runtime_1.jsx)(\"path\", { fill: \"currentColor\", d: \"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z\" }) }));\n}\nfunction DNA(props) {\n    return ((0, jsx_runtime_1.jsx)(SvgIcon_1.default, { ...props, children: (0, jsx_runtime_1.jsx)(\"path\", { fill: \"currentColor\", d: \"M4,2H6V4C6,5.44 6.68,6.61 7.88,7.78C8.74,8.61 9.89,9.41 11.09,10.2L9.26,11.39C8.27,10.72 7.31,10 6.5,9.21C5.07,7.82 4,6.1 4,4V2M18,2H20V4C20,6.1 18.93,7.82 17.5,9.21C16.09,10.59 14.29,11.73 12.54,12.84C10.79,13.96 9.09,15.05 7.88,16.22C6.68,17.39 6,18.56 6,20V22H4V20C4,17.9 5.07,16.18 6.5,14.79C7.91,13.41 9.71,12.27 11.46,11.16C13.21,10.04 14.91,8.95 16.12,7.78C17.32,6.61 18,5.44 18,4V2M14.74,12.61C15.73,13.28 16.69,14 17.5,14.79C18.93,16.18 20,17.9 20,20V22H18V20C18,18.56 17.32,17.39 16.12,16.22C15.26,15.39 14.11,14.59 12.91,13.8L14.74,12.61M7,3H17V4L16.94,4.5H7.06L7,4V3M7.68,6H16.32C16.08,6.34 15.8,6.69 15.42,7.06L14.91,7.5H9.07L8.58,7.06C8.2,6.69 7.92,6.34 7.68,6M9.09,16.5H14.93L15.42,16.94C15.8,17.31 16.08,17.66 16.32,18H7.68C7.92,17.66 8.2,17.31 8.58,16.94L9.09,16.5M7.06,19.5H16.94L17,20V21H7V20L7.06,19.5Z\" }) }));\n}\nfunction Cable(props) {\n    return ((0, jsx_runtime_1.jsx)(SvgIcon_1.default, { ...props, children: (0, jsx_runtime_1.jsx)(\"path\", { d: \"M20 5V4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v1h-1v4c0 .55.45 1 1 1h1v7c0 1.1-.9 2-2 2s-2-.9-2-2V7c0-2.21-1.79-4-4-4S5 4.79 5 7v7H4c-.55 0-1 .45-1 1v4h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1v-4c0-.55-.45-1-1-1H7V7c0-1.1.9-2 2-2s2 .9 2 2v10c0 2.21 1.79 4 4 4s4-1.79 4-4v-7h1c.55 0 1-.45 1-1V5h-1z\" }) }));\n}\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { Dialog, ErrorMessage } from '@jbrowse/core/ui';\nimport { ContentCopy as ContentCopyIcon } from '@jbrowse/core/ui/Icons';\nimport { getSession, isSessionWithShareURL } from '@jbrowse/core/util';\nimport { Alert, Button, DialogActions, DialogContent, DialogContentText, TextField, Typography, } from '@mui/material';\nimport copy from 'copy-to-clipboard';\nimport { observer } from 'mobx-react';\nimport { getSnapshot } from 'mobx-state-tree';\nimport { makeStyles } from 'tss-react/mui';\nimport { shareSessionToDynamo } from '../../sessionSharing';\nconst useStyles = makeStyles()(() => ({\n    flexItem: {\n        margin: 5,\n    },\n    content: {\n        display: 'flex',\n        flexFlow: 'column',\n        gap: '5px',\n    },\n}));\nconst ShareBookmarksDialog = observer(function ({ onClose, model, }) {\n    const { classes } = useStyles();\n    const [url, setUrl] = useState('');\n    const [error, setError] = useState();\n    const [loading, setLoading] = useState(true);\n    const session = getSession(model);\n    const { selectedBookmarks } = model;\n    const shareAll = selectedBookmarks.length === 0;\n    const bookmarksToShare = selectedBookmarks.length === 0\n        ? model.allBookmarksModel\n        : model.sharedBookmarksModel;\n    useEffect(() => {\n        ;\n        (async () => {\n            try {\n                if (!isSessionWithShareURL(session)) {\n                    throw new Error('No shareURL configured');\n                }\n                setLoading(true);\n                const snap = getSnapshot(bookmarksToShare);\n                const locationUrl = new URL(window.location.href);\n                const result = await shareSessionToDynamo(snap, session.shareURL, locationUrl.href);\n                const params = new URLSearchParams(locationUrl.search);\n                params.set('bookmarks', `share-${result.json.sessionId}`);\n                params.set('password', result.password);\n                locationUrl.search = params.toString();\n                setUrl(locationUrl.href);\n                setLoading(false);\n            }\n            catch (e) {\n                setError(e);\n            }\n            finally {\n                setLoading(false);\n            }\n        })();\n    }, [bookmarksToShare, session]);\n    return (_jsxs(Dialog, { open: true, onClose: onClose, title: \"Share bookmarks\", children: [_jsxs(DialogContent, { className: classes.content, children: [_jsx(Alert, { severity: \"info\", children: shareAll ? (_jsxs(_Fragment, { children: [_jsx(\"span\", { children: \"All bookmarks will be shared.\" }), _jsx(\"br\", {}), _jsx(\"span\", { children: \"Use the checkboxes to select individual bookmarks to share.\" })] })) : ('Only selected bookmarks will be shared.') }), _jsx(DialogContentText, { children: \"Copy the URL below to share your bookmarks.\" }), error ? (_jsx(ErrorMessage, { error: error })) : loading ? (_jsx(Typography, { children: \"Generating short URL...\" })) : (_jsx(TextField, { label: \"URL\", value: url, slotProps: {\n                            input: {\n                                readOnly: true,\n                            },\n                        }, variant: \"filled\", fullWidth: true, onClick: event => {\n                            const target = event.target;\n                            target.select();\n                        } })), _jsx(DialogContentText, { children: \"The URL should be pasted into the \\\"Import from share link\\\" field in the \\\"Import\\\" form found in the \\\"Bookmarked regions\\\" drawer.\" })] }), _jsx(DialogActions, { children: _jsx(Button, { className: classes.flexItem, \"data-testid\": \"dialogShare\", variant: \"contained\", color: \"primary\", disabled: loading, startIcon: _jsx(ContentCopyIcon, {}), onClick: async () => {\n                        copy(url);\n                        session.notify('Copied to clipboard', 'success');\n                        onClose();\n                    }, children: \"Copy share link\" }) })] }));\n});\nexport default ShareBookmarksDialog;\n"],"names":["__importDefault","this","mod","Icons","ContentCopy_1","ContentCopy","Indexing","ContentCut","ContentPaste","TrackSelector","SaveAs","Save","DNA","Cable","jsx_runtime_1","require$$0","SvgIcon_1","require$$1","props","useStyles","makeStyles","ShareBookmarksDialog","observer","onClose","model","classes","url","setUrl","useState","error","setError","loading","setLoading","session","getSession","selectedBookmarks","shareAll","bookmarksToShare","useEffect","isSessionWithShareURL","snap","getSnapshot","locationUrl","result","shareSessionToDynamo","params","e","_jsxs","Dialog","DialogContent","_jsx","Alert","_Fragment","DialogContentText","ErrorMessage","Typography","TextField","event","DialogActions","Button","ContentCopyIcon","copy"],"mappings":"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","x_google_ignoreList":[0,1]}