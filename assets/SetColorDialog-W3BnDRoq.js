import{bM as Oe,cz as de,j as s,bO as fe,bN as E,c as H,db as $e,m as ee,D as he,T as De,ag as me,e as Re,f as ge,B as k,bs as Ie,eC as Be,d4 as qe,bL as Te,b0 as $,dc as Fe,dd as Ae,de as Ge,df as Ke}from"./index-CGKDrrCR.js";import{c as Le}from"./cjs-BAkofInS.js";import{s as ze,r as Ue,a as We}from"./util-CGTuupHM.js";var pe={},ve=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pe,"__esModule",{value:!0});const M=s,Ve=H,Ye=ve($e),D=fe,Xe=Oe,Je=ve(Le),Qe=de,Ze=(0,Qe.makeStyles)()(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}));function et(e){const t=(0,Ve.useRef)(null);return(0,M.jsx)(Je.default,{nodeRef:t,cancel:'[class*="MuiDialogContent-root"]',onStart:o=>{var r;return`${(r=o.target)===null||r===void 0?void 0:r.className}`.includes("MuiDialogTitle")},children:(0,M.jsx)(D.Paper,{ref:t,...e})})}const tt=(0,Xe.observer)(function(t){const{classes:o}=Ze(),{title:r,children:n,onClose:a}=t;return(0,M.jsx)(D.Dialog,{...t,PaperComponent:et,children:(0,M.jsxs)(D.ScopedCssBaseline,{children:[(0,M.jsxs)(D.DialogTitle,{style:{cursor:"move"},children:[r,a?(0,M.jsx)(D.IconButton,{className:o.closeButton,onClick:()=>{a()},children:(0,M.jsx)(Ye.default,{})}):null]}),(0,M.jsx)(D.Divider,{}),n]})})});var ot=pe.default=tt;const rt=ee()({textAreaFont:{fontFamily:"Courier New"}});function nt({onClose:e,currLayout:t}){const{classes:o}=rt(),[r,n]=H.useState(""),[a,l]=H.useState();return s.jsxs(s.Fragment,{children:[s.jsxs(he,{children:[s.jsx(De,{children:'Paste CSV or TSV. If a header column is present. First line is a header. If a column called "name" is present, it uses that to connect to IDs in the table, otherwise it uses the first column no.'}),a?s.jsx(me.ErrorMessage,{error:a}):null,s.jsx(Re,{variant:"outlined",multiline:!0,minRows:5,placeholder:`name,population
HG00098,GBR
HG00101,GBR
HG00459,CHS
...`,maxRows:10,fullWidth:!0,value:r,onChange:i=>{n(i.target.value)},slotProps:{input:{classes:{input:o.textAreaFont}}}})]}),s.jsxs(ge,{children:[s.jsx(k,{variant:"contained",color:"secondary",onClick:()=>{const i=r.split(`
`).map(h=>h.trim()).filter(h=>!!h),u=i[0].split(/[,\t]/gm);if(u.includes("name")){l("");const h=Object.fromEntries(t.map(b=>[b.name,b])),x=Object.fromEntries(i.slice(1).map(b=>{const P=b.split(/[,\t]/gm),C=Object.fromEntries(P.map((j,m)=>[u[m],j]));return[C.name,{...C,...h[C.name]}]}));e(t.map(b=>({...b,...x[b.name]})))}else l(new Error('No "name" column found on line 1'))},children:"Update rows"}),s.jsx(k,{variant:"contained",color:"primary",onClick:()=>{const i=r.split(`
`).map(h=>h.trim()).filter(h=>!!h),u=i[0].split(/[,\t]/gm);if(u.includes("name")){l("");const h=Object.fromEntries(t.map(b=>[b.name,b])),x=Object.fromEntries(i.slice(1).map(b=>{const P=b.split(/[,\t]/gm),C=Object.fromEntries(P.map((j,m)=>[u[m],j]));return[C.name,{...C,...h[C.name]}]}));e(t.map(b=>({...x[b.name]})))}else l(new Error('No "name" column found on line 1'))},children:"Replace rows"}),s.jsx(k,{variant:"contained",color:"inherit",onClick:()=>{e()},children:"Cancel"})]})]})}function at(){return s.jsxs(s.Fragment,{children:["Helpful tips",s.jsxs("ul",{children:[s.jsx("li",{children:"You can select rows in the table with the checkboxes"}),s.jsx("li",{children:"Multi-select is enabled with shift-click and control-click"}),s.jsx("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),s.jsx("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),s.jsx("li",{children:"Changes are applied when you hit Submit"}),s.jsx("li",{children:"You can click and drag the dialog box to move it on the screen"}),s.jsx("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]})}function lt({setCurrLayout:e,currLayout:t}){var o;return s.jsxs("div",{children:["Create color palette based on...",Object.keys((o=t[0])!==null&&o!==void 0?o:[]).filter(r=>r!=="name"&&r!=="color"&&r!=="label"&&r!=="id"&&r!=="HP").map(r=>s.jsx(k,{variant:"contained",color:"inherit",onClick:()=>{const n=new Map;for(const l of t){const i=n.get(l[r]);i?n.set(l[r],i+1):n.set(l[r],1)}const a=Object.fromEntries([...n.entries()].sort((l,i)=>l[1]-i[1]).map((l,i)=>[l[0],ze[i]||Ue(l[0])]));e(t.map(l=>({...l,color:a[l[r]]})))},children:r},r)),s.jsx(k,{onClick:()=>{e(t.map(r=>({...r,color:void 0})))},children:"Clear colors"})]})}var te={},g={},st=E&&E.__createBinding||(Object.create?function(e,t,o,r){r===void 0&&(r=o);var n=Object.getOwnPropertyDescriptor(t,o);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,r,n)}:function(e,t,o,r){r===void 0&&(r=o),e[r]=t[o]}),ct=E&&E.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),it=E&&E.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var r=[];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r[r.length]=n);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var r=e(t),n=0;n<r.length;n++)r[n]!=="default"&&st(o,t,r[n]);return ct(o,t),o}}();Object.defineProperty(g,"__esModule",{value:!0});g.setNonce=g.RgbaStringColorPicker=g.RgbaColorPicker=g.RgbStringColorPicker=g.RgbColorPicker=g.HsvaStringColorPicker=g.HsvaColorPicker=g.HsvStringColorPicker=g.HsvColorPicker=g.HslaStringColorPicker=g.HslaColorPicker=g.HslStringColorPicker=g.HslColorPicker=g.HexColorPicker=g.HexColorInput=void 0;const c=it(H);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function F(e,t){if(e==null)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(o=a[r])>=0||(n[o]=e[o]);return n}function T(e){const t=(0,c.useRef)(e),o=(0,c.useRef)(r=>{t.current&&t.current(r)});return t.current=e,o.current}const R=(e,t=0,o=1)=>e>o?o:e<t?t:e,q=e=>"touches"in e,Z=e=>e&&e.ownerDocument.defaultView||self,ae=(e,t,o)=>{const r=e.getBoundingClientRect(),n=q(t)?((a,l)=>{for(let i=0;i<a.length;i++)if(a[i].identifier===l)return a[i];return a[0]})(t.touches,o):t;return{left:R((n.pageX-(r.left+Z(e).pageXOffset))/r.width),top:R((n.pageY-(r.top+Z(e).pageYOffset))/r.height)}},le=e=>{!q(e)&&e.preventDefault()},oe=c.default.memo(e=>{let{onMove:t,onKey:o}=e,r=F(e,["onMove","onKey"]);const n=(0,c.useRef)(null),a=T(t),l=T(o),i=(0,c.useRef)(null),u=(0,c.useRef)(!1),[h,x,b]=(0,c.useMemo)(()=>{const P=m=>{le(m),(q(m)?m.touches.length>0:m.buttons>0)&&n.current?a(ae(n.current,m,i.current)):j(!1)},C=()=>j(!1);function j(m){const d=u.current,f=Z(n.current),p=m?f.addEventListener:f.removeEventListener;p(d?"touchmove":"mousemove",P),p(d?"touchend":"mouseup",C)}return[({nativeEvent:m})=>{const d=n.current;if(d&&(le(m),!((f,p)=>p&&!q(f))(m,u.current)&&d)){if(q(m)){u.current=!0;const f=m.changedTouches||[];f.length&&(i.current=f[0].identifier)}d.focus(),a(ae(d,m,i.current)),j(!0)}},m=>{const d=m.which||m.keyCode;d<37||d>40||(m.preventDefault(),l({left:d===39?.05:d===37?-.05:0,top:d===40?.05:d===38?-.05:0}))},j]},[l,a]);return(0,c.useEffect)(()=>b,[b]),c.default.createElement("div",y({},r,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:n,onKeyDown:x,tabIndex:0,role:"slider"}))}),A=e=>e.filter(Boolean).join(" "),re=({className:e,color:t,left:o,top:r=.5})=>{const n=A(["react-colorful__pointer",e]);return c.default.createElement("div",{className:n,style:{top:100*r+"%",left:100*o+"%"}},c.default.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},w=(e,t=0,o=Math.pow(10,t))=>Math.round(o*e)/o,ut={grad:.9,turn:360,rad:360/(2*Math.PI)},J=e=>(e[0]==="#"&&(e=e.substr(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1}:{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:1}),be=(e,t="deg")=>Number(e)*(ut[t]||1),xe=e=>{const t=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?ne({h:be(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}},dt=xe,ne=({h:e,s:t,l:o,a:r})=>({h:e,s:(t*=(o<50?o:100-o)/100)>0?2*t/(o+t)*100:0,v:o+t,a:r}),W=({h:e,s:t,v:o,a:r})=>{const n=(200-t)*o/100;return{h:w(e),s:w(n>0&&n<200?t*o/100/(n<=100?n:200-n)*100:0),l:w(n/2),a:w(r,2)}},U=e=>{const{h:t,s:o,l:r}=W(e);return`hsl(${t}, ${o}%, ${r}%)`},z=e=>{const{h:t,s:o,l:r,a:n}=W(e);return`hsla(${t}, ${o}%, ${r}%, ${n})`},G=({h:e,s:t,v:o,a:r})=>{e=e/360*6,t/=100,o/=100;const n=Math.floor(e),a=o*(1-t),l=o*(1-(e-n)*t),i=o*(1-(1-e+n)*t),u=n%6;return{r:w(255*[o,l,a,a,i,o][u]),g:w(255*[i,o,o,l,a,a][u]),b:w(255*[a,a,i,o,o,l][u]),a:w(r,2)}},Ce=e=>{const t=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?K({h:be(t[1],t[2]),s:Number(t[3]),v:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}},ft=Ce,_e=e=>{const t=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?V({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}},ht=_e,Q=e=>{const t=e.toString(16);return t.length<2?"0"+t:t},V=({r:e,g:t,b:o,a:r})=>{const n=Math.max(e,t,o),a=n-Math.min(e,t,o),l=a?n===e?(t-o)/a:n===t?2+(o-e)/a:4+(e-t)/a:0;return{h:w(60*(l<0?l+6:l)),s:w(n?a/n*100:0),v:w(n/255*100),a:r}},K=e=>({h:w(e.h),s:w(e.s),v:w(e.v),a:w(e.a,2)}),je=c.default.memo(({className:e,hue:t,onChange:o})=>{const r=A(["react-colorful__hue",e]);return c.default.createElement("div",{className:r},c.default.createElement(oe,{onMove:n=>{o({h:360*n.left})},onKey:n=>{o({h:R(t+360*n.left,0,360)})},"aria-label":"Hue","aria-valuetext":w(t)},c.default.createElement(re,{className:"react-colorful__hue-pointer",left:t/360,color:U({h:t,s:100,v:100,a:1})})))}),we=c.default.memo(({hsva:e,onChange:t})=>{const o={backgroundColor:U({h:e.h,s:100,v:100,a:1})};return c.default.createElement("div",{className:"react-colorful__saturation",style:o},c.default.createElement(oe,{onMove:r=>{t({s:100*r.left,v:100-100*r.top})},onKey:r=>{t({s:R(e.s+100*r.left,0,100),v:R(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":`Saturation ${w(e.s)}%, Brightness ${w(e.v)}%`},c.default.createElement(re,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:U(e)})))}),N=(e,t)=>{if(e===t)return!0;for(const o in e)if(e[o]!==t[o])return!1;return!0},I=(e,t)=>e.replace(/\s/g,"")===t.replace(/\s/g,"");function ye(e,t,o){const r=T(o),[n,a]=(0,c.useState)(()=>e.toHsva(t)),l=(0,c.useRef)({color:t,hsva:n});(0,c.useEffect)(()=>{if(!e.equal(t,l.current.color)){const u=e.toHsva(t);l.current={hsva:u,color:t},a(u)}},[t,e]),(0,c.useEffect)(()=>{let u;N(n,l.current.hsva)||e.equal(u=e.fromHsva(n),l.current.color)||(l.current={hsva:n,color:u},r(u))},[n,e,r]);const i=(0,c.useCallback)(u=>{a(h=>Object.assign({},h,u))},[]);return[n,i]}const mt=typeof window<"u"?c.useLayoutEffect:c.useEffect;let ke;const gt=()=>ke||(typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0),pt=e=>{ke=e},se=new Map,Se=e=>{mt(()=>{const t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!se.has(t)){const o=t.createElement("style");o.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,se.set(t,o);const r=gt();r&&o.setAttribute("nonce",r),t.head.appendChild(o)}},[])},O=e=>{let{className:t,colorModel:o,color:r=o.defaultColor,onChange:n}=e,a=F(e,["className","colorModel","color","onChange"]);const l=(0,c.useRef)(null);Se(l);const[i,u]=ye(o,r,n),h=A(["react-colorful",t]);return c.default.createElement("div",y({},a,{ref:l,className:h}),c.default.createElement(we,{hsva:i,onChange:u}),c.default.createElement(je,{hue:i.h,onChange:u,className:"react-colorful__last-control"}))},vt={defaultColor:"000",toHsva:e=>V(J(e)),fromHsva:e=>(({r:t,g:o,b:r})=>"#"+Q(t)+Q(o)+Q(r))(G(e)),equal:(e,t)=>e.toLowerCase()===t.toLowerCase()||N(J(e),J(t))},bt=e=>c.default.createElement(O,y({},e,{colorModel:vt})),xt=({className:e,hsva:t,onChange:o})=>{const r={backgroundImage:`linear-gradient(90deg, ${z(Object.assign({},t,{a:0}))}, ${z(Object.assign({},t,{a:1}))})`},n=A(["react-colorful__alpha",e]);return c.default.createElement("div",{className:n},c.default.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),c.default.createElement(oe,{onMove:a=>{o({a:a.left})},onKey:a=>{o({a:R(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":`${w(100*t.a)}%`},c.default.createElement(re,{className:"react-colorful__alpha-pointer",left:t.a,color:z(t)})))},B=e=>{let{className:t,colorModel:o,color:r=o.defaultColor,onChange:n}=e,a=F(e,["className","colorModel","color","onChange"]);const l=(0,c.useRef)(null);Se(l);const[i,u]=ye(o,r,n),h=A(["react-colorful",t]);return c.default.createElement("div",y({},a,{ref:l,className:h}),c.default.createElement(we,{hsva:i,onChange:u}),c.default.createElement(je,{hue:i.h,onChange:u}),c.default.createElement(xt,{hsva:i,onChange:u,className:"react-colorful__last-control"}))},Ct={defaultColor:{h:0,s:0,l:0,a:1},toHsva:ne,fromHsva:W,equal:N},_t=e=>c.default.createElement(B,y({},e,{colorModel:Ct})),jt={defaultColor:"hsla(0, 0%, 0%, 1)",toHsva:xe,fromHsva:z,equal:I},wt=e=>c.default.createElement(B,y({},e,{colorModel:jt})),yt={defaultColor:{h:0,s:0,l:0},toHsva:({h:e,s:t,l:o})=>ne({h:e,s:t,l:o,a:1}),fromHsva:e=>(({h:t,s:o,l:r})=>({h:t,s:o,l:r}))(W(e)),equal:N},kt=e=>c.default.createElement(O,y({},e,{colorModel:yt})),St={defaultColor:"hsl(0, 0%, 0%)",toHsva:dt,fromHsva:U,equal:I},Et=e=>c.default.createElement(O,y({},e,{colorModel:St})),Pt={defaultColor:{h:0,s:0,v:0,a:1},toHsva:e=>e,fromHsva:K,equal:N},Ht=e=>c.default.createElement(B,y({},e,{colorModel:Pt})),Mt={defaultColor:"hsva(0, 0%, 0%, 1)",toHsva:Ce,fromHsva:e=>{const{h:t,s:o,v:r,a:n}=K(e);return`hsva(${t}, ${o}%, ${r}%, ${n})`},equal:I},Nt=e=>c.default.createElement(B,y({},e,{colorModel:Mt})),Ot={defaultColor:{h:0,s:0,v:0},toHsva:({h:e,s:t,v:o})=>({h:e,s:t,v:o,a:1}),fromHsva:e=>{const{h:t,s:o,v:r}=K(e);return{h:t,s:o,v:r}},equal:N},$t=e=>c.default.createElement(O,y({},e,{colorModel:Ot})),Dt={defaultColor:"hsv(0, 0%, 0%)",toHsva:ft,fromHsva:e=>{const{h:t,s:o,v:r}=K(e);return`hsv(${t}, ${o}%, ${r}%)`},equal:I},Rt=e=>c.default.createElement(O,y({},e,{colorModel:Dt})),It={defaultColor:{r:0,g:0,b:0,a:1},toHsva:V,fromHsva:G,equal:N},Bt=e=>c.default.createElement(B,y({},e,{colorModel:It})),qt={defaultColor:"rgba(0, 0, 0, 1)",toHsva:_e,fromHsva:e=>{const{r:t,g:o,b:r,a:n}=G(e);return`rgba(${t}, ${o}, ${r}, ${n})`},equal:I},Tt=e=>c.default.createElement(B,y({},e,{colorModel:qt})),Ft={defaultColor:{r:0,g:0,b:0},toHsva:({r:e,g:t,b:o})=>V({r:e,g:t,b:o,a:1}),fromHsva:e=>(({r:t,g:o,b:r})=>({r:t,g:o,b:r}))(G(e)),equal:N},At=e=>c.default.createElement(O,y({},e,{colorModel:Ft})),Gt={defaultColor:"rgb(0, 0, 0)",toHsva:ht,fromHsva:e=>{const{r:t,g:o,b:r}=G(e);return`rgb(${t}, ${o}, ${r})`},equal:I},Kt=e=>c.default.createElement(O,y({},e,{colorModel:Gt})),Lt=/^#?([0-9A-F]{3,8})$/i,zt=e=>{const{color:t="",onChange:o,onBlur:r,escape:n,validate:a,format:l,process:i}=e,u=F(e,["color","onChange","onBlur","escape","validate","format","process"]),[h,x]=(0,c.useState)(()=>n(t)),b=T(o),P=T(r),C=(0,c.useCallback)(m=>{const d=n(m.target.value);x(d),a(d)&&b(i?i(d):d)},[n,i,a,b]),j=(0,c.useCallback)(m=>{a(m.target.value)||x(n(t)),P(m)},[t,n,a,P]);return(0,c.useEffect)(()=>{x(n(t))},[t,n]),c.default.createElement("input",y({},u,{value:l?l(h):h,spellCheck:"false",onChange:C,onBlur:j}))},ce=e=>"#"+e,Ut=e=>{const{prefixed:t,alpha:o}=e,r=F(e,["prefixed","alpha"]),n=(0,c.useCallback)(l=>l.replace(/([^0-9A-F]+)/gi,"").substr(0,o?8:6),[o]),a=(0,c.useCallback)(l=>((i,u)=>{const h=Lt.exec(i),x=h?h[1].length:0;return x===3||x===6||!!u&&x===4||!!u&&x===8})(l,o),[o]);return c.default.createElement(zt,y({},r,{escape:n,format:t?ce:void 0,process:ce,validate:a}))};g.setNonce=pt;g.HexColorPicker=bt;g.HslaColorPicker=_t;g.HslaStringColorPicker=wt;g.HslColorPicker=kt;g.HslStringColorPicker=Et;g.HsvaColorPicker=Ht;g.HsvaStringColorPicker=Nt;g.HsvColorPicker=$t;g.HsvStringColorPicker=Rt;g.RgbaColorPicker=Bt;g.RgbaStringColorPicker=Tt;g.RgbColorPicker=At;g.RgbStringColorPicker=Kt;g.HexColorInput=Ut;(function(e){var t=E&&E.__createBinding||(Object.create?function(d,f,p,v){v===void 0&&(v=p);var _=Object.getOwnPropertyDescriptor(f,p);(!_||("get"in _?!f.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return f[p]}}),Object.defineProperty(d,v,_)}:function(d,f,p,v){v===void 0&&(v=p),d[v]=f[p]}),o=E&&E.__setModuleDefault||(Object.create?function(d,f){Object.defineProperty(d,"default",{enumerable:!0,value:f})}:function(d,f){d.default=f}),r=E&&E.__importStar||function(){var d=function(f){return d=Object.getOwnPropertyNames||function(p){var v=[];for(var _ in p)Object.prototype.hasOwnProperty.call(p,_)&&(v[v.length]=_);return v},d(f)};return function(f){if(f&&f.__esModule)return f;var p={};if(f!=null)for(var v=d(f),_=0;_<v.length;_++)v[_]!=="default"&&t(p,f,v[_]);return o(p,f),p}}();Object.defineProperty(e,"__esModule",{value:!0}),e.PopoverPicker=void 0,e.ColorPopover=j,e.ColorPicker=m;const n=s,a=H,l=qe,i=fe,u=de,h=r(We),x=Be(),b=g,P=(0,u.makeStyles)()({picker:{position:"relative"},swatches:{display:"flex",padding:12,flexWrap:"wrap"},swatch:{width:24,height:24,margin:4,border:"none",padding:0,cursor:"pointer",outline:"none"}}),C=({color:d,onChange:f})=>{const[p,v]=(0,a.useState)(null),{classes:_}=P();return(0,n.jsxs)("div",{className:_.picker,children:[(0,n.jsx)("div",{className:_.swatch,style:{backgroundColor:d},onClick:Y=>{v(Y.currentTarget)}}),(0,n.jsx)(j,{anchorEl:p,onClose:()=>{v(null)},color:d,onChange:f})]})};e.PopoverPicker=C;function j({anchorEl:d,onChange:f,onClose:p,color:v}){return(0,n.jsx)(i.Popover,{open:!!d,anchorEl:d,onClose:p,children:(0,n.jsx)(m,{color:v,onChange:f})})}function m({onChange:d,color:f}){const{classes:p}=P(),[v,_]=(0,x.useLocalStorage)("colorPickerPalette","set1"),Y=h[v],Ee=Object.keys(h),[Pe,He]=(0,a.useState)(f),Me=(0,l.colord)(f).toRgbString(),Ne=(0,x.useDebounce)(Me,1e3),X=S=>{He(S);try{d((0,l.colord)(S).toRgbString())}catch{}};return(0,n.jsxs)("div",{style:{display:"flex",padding:10},children:[(0,n.jsx)("div",{style:{width:200,margin:5},children:(0,n.jsx)(b.RgbaStringColorPicker,{color:Ne,onChange:X})}),(0,n.jsxs)("div",{style:{width:200,margin:5},children:[(0,n.jsx)(i.Select,{value:v,onChange:S=>{const L=S.target.value;_(L)},children:Ee.map(S=>(0,n.jsx)(i.MenuItem,{value:S,children:S},S))}),(0,n.jsx)("div",{className:p.swatches,children:Y.map((S,L)=>(0,n.jsx)("button",{type:"button",className:p.swatch,style:{background:S},onClick:()=>{X(S)}},`${S}-${L}`))}),(0,n.jsx)(i.TextField,{helperText:"Manually set color (hex, rgb, or css color name)",value:Pe,onChange:S=>{X(S.target.value)}})]})]})}e.default=e.PopoverPicker})(te);const Wt=Ie(te),Vt=ee()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});function Yt({rows:e,onChange:t,setSelected:o}){const{classes:r}=Vt(),[n,a]=H.useState({idx:0,field:null});if(e.length){const{id:l,name:i,label:u,color:h,baseUri:x,HP:b,...P}=e[0];return s.jsx("div",{style:{height:400,width:"100%"},children:s.jsx(Te,{checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:C=>{o(C)},rows:e,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:C=>{const{value:j,id:m}=C;return s.jsx(Wt,{color:j||"blue",onChange:d=>{const f=e.find(p=>p.name===m);f&&(f.color=d),t([...e])}})}},{field:"label",headerName:"Name",width:$.measureGridWidth(e.map(C=>C.label))},...Object.keys(P).map(C=>({field:C,renderCell:({value:j})=>s.jsx("div",{className:r.cell,children:s.jsx(me.SanitizedHTML,{html:$.getStr(j)})}),width:$.measureGridWidth(e.map(j=>`${j[C]}`))}))],sortModel:[],onSortModelChange:C=>{const j=C[0],m=(n.idx+1)%2,d=j.field||n.field;a({idx:m,field:d}),t(d?[...e].sort((f,p)=>{const v=$.getStr(f[d]),_=$.getStr(p[d]);return m===1?v.localeCompare(_):_.localeCompare(v)}):e)}})})}else return s.jsx("div",{children:"No rows, check sample metadata configuration"})}function ie(e,t,o=1){const r=t.map(a=>e.findIndex(l=>l.name===a)).sort((a,l)=>a-l);let n=0;for(const a of r){const l=Math.max(n,a-o);l>=n&&e.splice(l,0,e.splice(a,1)[0]),n=n+1}return e}function ue(e,t,o=1){const r=t.map(a=>e.findIndex(l=>l.name===a)).sort((a,l)=>l-a);let n=e.length-1;for(const a of r){const l=Math.min(n,a+o);l<=n&&e.splice(l,0,e.splice(a,1)[0]),n=n-1}return e}function Xt({selected:e,onChange:t,rows:o,showTips:r}){const[n,a]=H.useState(null),[l,i]=H.useState("blue");return s.jsxs(s.Fragment,{children:[s.jsx(k,{disabled:!e.length,onClick:u=>{a(u.currentTarget)},children:"Change color of selected items"}),s.jsxs(k,{onClick:()=>{t(ie([...o],e))},disabled:!e.length,children:[s.jsx(Fe,{}),r?"Move selected items up":null]}),s.jsxs(k,{onClick:()=>{t(ue([...o],e))},disabled:!e.length,children:[s.jsx(Ae,{}),r?"Move selected items down":null]}),s.jsxs(k,{onClick:()=>{t(ie([...o],e,o.length))},disabled:!e.length,children:[s.jsx(Ge,{}),r?"Move selected items to top":null]}),s.jsxs(k,{onClick:()=>{t(ue([...o],e,o.length))},disabled:!e.length,children:[s.jsx(Ke,{}),r?"Move selected items to bottom":null]}),s.jsx(te.ColorPopover,{anchorEl:n,color:l,onChange:u=>{i(u);for(const h of e){const x=o.find(b=>b.name===h);x&&(x.color=u)}t([...o])},onClose:()=>{a(null)}})]})}function Jt({rows:e,onChange:t,showTips:o}){const[r,n]=H.useState([]);return s.jsxs("div",{children:[s.jsx(Xt,{selected:r,rows:e,showTips:o,onChange:t}),s.jsx(Yt,{rows:e,onChange:t,setSelected:n})]})}const Qt=ee()({content:{minWidth:800},fr:{float:"right",display:"flex",gap:8},textAreaFont:{fontFamily:"Courier New"}});function oo({model:e,handleClose:t}){const{classes:o}=Qt(),{sources:r}=e,[n,a]=H.useState(!1),[l,i]=H.useState(r||[]),[u,h]=$.useLocalStorage("multivariant-showTips",!1);return s.jsx(ot,{open:!0,onClose:t,maxWidth:"xl",title:"Multi-variant color/arrangement editor",children:n?s.jsx(nt,{currLayout:l,onClose:x=>{x&&i(x),a(!1)}}):s.jsxs(s.Fragment,{children:[s.jsxs(he,{className:o.content,children:[s.jsxs("div",{className:o.fr,children:[s.jsx(k,{variant:"contained",onClick:()=>{h(!u)},children:u?"Hide tips":"Show tips"}),s.jsx(k,{color:"secondary",variant:"contained",onClick:()=>{a(!n)},children:"Show Bulk row editor"})]}),u?s.jsx(at,{}):null,s.jsx("br",{}),s.jsx(lt,{currLayout:l,setCurrLayout:i}),s.jsx(Jt,{rows:l,onChange:i,showTips:u})]}),s.jsxs(ge,{children:[s.jsx(k,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{e.clearLayout(),i(e.sources||[])},children:"Clear custom settings"}),s.jsx(k,{variant:"contained",color:"secondary",onClick:()=>{t(),i([...e.sources||[]])},children:"Cancel"}),s.jsx(k,{variant:"contained",color:"primary",type:"submit",onClick:()=>{e.setLayout(l),t()},children:"Submit"})]})]})})}export{oo as default};
//# sourceMappingURL=SetColorDialog-W3BnDRoq.js.map
