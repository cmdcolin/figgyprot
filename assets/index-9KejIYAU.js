import{o as d,c as l,j as e,D as A,e as b,f as L,B as p,M as T,bB as c,bu as k,m as N,di as D,ad as E,bL as M,au as C,dv as O,bF as h,dw as U}from"./index-CGKDrrCR.js";const H=d(function({adapterSelection:n,setAdapterSelection:i,adapterTypes:s}){return e.jsx(b,{value:n,variant:"outlined",select:!0,helperText:"Type of adapter to use",fullWidth:!0,onChange:t=>{i(t.target.value)},children:s.map(t=>e.jsx(T,{value:t,children:t},t))})}),$=d(function({fastaLocation:n,setFastaLocation:i}){return e.jsxs(e.Fragment,{children:[e.jsx(k,{severity:"warning",style:{margin:30},children:"Note: use only relatively small files for this type, it is loaded into memory"}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"fastaLocation",location:n,setLocation:s=>{i(s)}})})]})}),G=d(function({fastaLocation:n,faiLocation:i,setFaiLocation:s,setFastaLocation:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"fastaLocation",location:n,setLocation:a=>{t(a)}})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"faiLocation",location:i,setLocation:a=>{s(a)}})})]})}),q=d(function({fastaLocation:n,faiLocation:i,gziLocation:s,setFaiLocation:t,setGziLocation:a,setFastaLocation:r}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"fastaLocation",location:n,setLocation:o=>{r(o)}})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"faiLocation",location:i,setLocation:o=>{t(o)}})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"gziLocation",location:s,setLocation:o=>{a(o)}})})]})}),P=d(function({twoBitLocation:n,chromSizesLocation:i,setTwoBitLocation:s,setChromSizesLocation:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"twoBitLocation",location:n,setLocation:a=>{s(a)}})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"chromSizesLocation (optional, can be added to speed up loading 2bit files with many contigs)",location:i,setLocation:a=>{t(a)}})})]})}),x={uri:""},I=["IndexedFastaAdapter","BgzipFastaAdapter","UnindexedFastaAdapter","TwoBitAdapter"],R=d(function({session:n,onClose:i}){const[s,t]=l.useState(""),[a,r]=l.useState(""),[o,u]=l.useState(I[0]),[m,y]=l.useState(x),[j,g]=l.useState(x),[F,w]=l.useState(x),[v,B]=l.useState(x),[S,z]=l.useState(x);return e.jsxs(e.Fragment,{children:[e.jsxs(A,{children:[e.jsx(b,{id:"assembly-name",label:"Assembly name",helperText:"The assembly name e.g. hg38",variant:"outlined",value:s,onChange:f=>{t(f.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-name"}}}),e.jsx(b,{id:"assembly-name",label:"Assembly display name",helperText:'(optional) A human readable display name for the assembly e.g. "Homo sapiens (hg38)"',variant:"outlined",value:a,onChange:f=>{r(f.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-display-name"}}}),e.jsx(H,{adapterSelection:o,adapterTypes:I,setAdapterSelection:u}),o==="IndexedFastaAdapter"?e.jsx(G,{fastaLocation:m,faiLocation:j,setFaiLocation:g,setFastaLocation:y}):o==="UnindexedFastaAdapter"?e.jsx($,{fastaLocation:m,setFastaLocation:y}):o==="TwoBitAdapter"?e.jsx(P,{twoBitLocation:v,chromSizesLocation:S,setTwoBitLocation:B,setChromSizesLocation:z}):e.jsx(q,{fastaLocation:m,gziLocation:F,faiLocation:j,setFaiLocation:g,setGziLocation:w,setFastaLocation:y})]}),e.jsxs(L,{children:[e.jsx(p,{variant:"contained",color:"primary",onClick:()=>{s===""?n.notify("Can't create an assembly without a name"):(i(),n.addAssembly({name:s,displayName:a,sequence:{type:"ReferenceSequenceTrack",trackId:`${s}-${performance.now()}`,adapter:o==="IndexedFastaAdapter"?{type:"IndexedFastaAdapter",fastaLocation:m,faiLocation:j}:o==="BgzipFastaAdapter"?{type:"BgzipFastaAdapter",fastaLocation:m,faiLocation:j,gziLocation:F}:o==="UnindexedFastaAdapter"?{type:"UnindexedFastaAdapter",fastaLocation:m}:{type:"TwoBitAdapter",twoBitLocation:v,chromSizesLocation:S}}}),n.notify(`Added "${s}"`,"success"))},children:"Submit"}),e.jsx(p,{variant:"contained",color:"secondary",onClick:()=>{i()},children:"Cancel"})]})]})}),V=N()({container:{overflow:"auto",maxHeight:600}}),W=d(function({assembly:n,onClose:i}){const{classes:s}=V();return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsx("div",{className:s.container,children:n?e.jsx(D,{model:{target:n}}):e.jsx("div",{children:"No assembly"})})}),e.jsx(L,{children:e.jsx(p,{variant:"contained",onClick:()=>{i()},children:"Back"})})]})}),J=E(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Create"),K=d(function({onEditAssembly:n,onAddAssembly:i,onClose:s,session:t}){return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx(M,{rowHeight:25,columnHeaderHeight:35,hideFooter:t.assemblies.length<25,rows:t.assemblies.map(a=>({id:h.readConfObject(a,"name"),name:h.readConfObject(a,"name"),displayName:h.readConfObject(a,"displayName"),aliases:h.readConfObject(a,"aliases"),assembly:a})),columns:[{field:"name"},{field:"displayName"},{field:"aliases"},{field:"actions",renderCell:({row:a})=>{const{assembly:r,name:o}=a,u=t.sessionAssemblies.includes(r)?!0:t.adminMode;return e.jsxs(e.Fragment,{children:[e.jsx(C,{disabled:!u,onClick:()=>{n(r)},children:e.jsx(J,{})}),e.jsx(C,{"data-testid":`${o}-delete`,disabled:!u,onClick:()=>{u&&(t.removeAssembly?t.removeAssembly(o):t.notify("Unable to find removeAssembly function"))},children:e.jsx(O,{})})]})}}]})})}),e.jsxs(L,{children:[e.jsx(p,{color:"secondary",variant:"contained",onClick:()=>{s()},children:"Close"}),e.jsx(p,{variant:"contained",startIcon:e.jsx(U,{}),onClick:()=>{i()},children:"Add new assembly"})]})]})}),X=d(function({session:n,onClose:i}){const[s,t]=l.useState(!1),[a,r]=l.useState();return e.jsx(c.Dialog,{open:!0,title:"Assembly manager",onClose:()=>{i()},children:a?e.jsx(W,{assembly:a,onClose:()=>{r(void 0)}}):s?e.jsx(R,{session:n,onClose:()=>{t(!1)}}):e.jsx(K,{session:n,onClose:()=>{i()},onAddAssembly:()=>{t(!0)},onEditAssembly:o=>{r(o)}})})});export{X as default};
//# sourceMappingURL=index-9KejIYAU.js.map
