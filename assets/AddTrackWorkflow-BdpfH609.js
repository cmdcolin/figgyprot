import{o as g,m as b,c as d,j as e,P as m,e as p,B as h,X as f,J as c}from"./index-CGKDrrCR.js";const x=b()(i=>({paper:{margin:i.spacing(),padding:i.spacing()},submit:{marginTop:25,marginBottom:100,display:"block"}}));function y(i){const{webUtils:r}=window.require("electron");return c.isElectron?{localPath:r.getPathForFile(i),locationType:"LocalPathLocation"}:f.storeBlobLocation({blob:i})}function w({trackName:i,val:r,model:o}){var l;const s=c.getSession(o);try{const a=[`${i.toLowerCase().replaceAll(" ","_")}-${Date.now()}`,s.adminMode?"":"-sessionTrack"].join("");let t;try{t=JSON.parse(r)}catch{t=r.split(/\n|\r\n|\r/).map(u=>u.trim()).filter(u=>!!u)}const n=typeof t[0]=="string"?{bigWigs:t}:{subadapters:t};c.isSessionWithAddTracks(s)&&(s.addTrackConf({trackId:a,type:"MultiQuantitativeTrack",name:i,assemblyNames:[o.assembly],adapter:{type:"MultiWiggleAdapter",...n}}),(l=o.view)===null||l===void 0||l.showTrack(a)),o.clearData(),c.isSessionModelWithWidgets(s)&&s.hideWidget(o)}catch(a){console.error(a),s.notifyError(`${a}`,a)}}const v=g(function({model:i}){const{classes:r}=x(),[o,l]=d.useState(""),[s,a]=d.useState(`MultiWiggle${+Date.now()}`);return e.jsxs(m,{className:r.paper,children:[e.jsxs("ul",{children:[e.jsx("li",{children:"Enter list of URLs for bigwig files in the textbox"}),e.jsx("li",{children:"Or, use the button below the text box to select files from your computer"})]}),e.jsx(p,{multiline:!0,fullWidth:!0,rows:10,value:o,placeholder:"Paste list of URLs here, or use file selector below",variant:"outlined",onChange:t=>{l(t.target.value)}}),e.jsxs(h,{variant:"outlined",component:"label",children:["Choose Files from your computer",e.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:({target:t})=>{l(JSON.stringify([...t.files||[]].map(n=>({type:"BigWigAdapter",bigWigLocation:y(n),source:n.name})),null,2))}})]}),e.jsx(p,{value:s,helperText:"Track name",onChange:t=>{a(t.target.value)}}),e.jsx(h,{variant:"contained",className:r.submit,onClick:()=>{w({trackName:s,val:o,model:i})},children:"Submit"}),e.jsx("p",{children:"Additional notes: "}),e.jsxs("ul",{children:[e.jsxs("li",{children:["The list of bigwig files in the text box can be a list of URLs, or a list of elements like"," ",e.jsx("code",{children:'[{"type":"BigWigAdapter","bigWigLocation":{"uri":"http://host/file.bw"}, "color":"green","source":"name for subtrack"}]'})," ","to apply e.g. the color attribute to the view"]}),e.jsx("li",{children:'Adding local files will update the textbox with JSON contents that are ready to submit with the "Submit" button'})]})]})});export{v as default};
//# sourceMappingURL=AddTrackWorkflow-BdpfH609.js.map
