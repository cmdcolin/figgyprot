import{o as m,di as j,j as e,c,bB as S,ad as v,e as b,M as E,au as N,m as k,bG as g,dj as I,dk as M,dl as B,dm as W,B as C,dn as y}from"./index-CGKDrrCR.js";const L=m(function({connectionType:s,model:t,session:o}){const i=s.configEditorComponent||j;return e.jsx(c.Suspense,{fallback:e.jsx(S.LoadingEllipses,{}),children:e.jsx(i,{model:{target:t},session:o})})}),V=v(e.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew"),w=m(function({connectionTypeChoices:t,connectionType:o,setConnectionType:i}){const u=t[0];return c.useEffect(()=>{o||i(u)},[o,u,i]),e.jsx("form",{autoComplete:"off",children:o?e.jsx(b,{value:o.name,label:"connectionType",helperText:o.description?e.jsxs(e.Fragment,{children:[o.description,o.url?e.jsx(N,{href:o.url,rel:"noopener noreferrer",target:"_blank",children:e.jsx(V,{})}):null]}):null,select:!0,fullWidth:!0,onChange:n=>{i(t.find(p=>p.name===n.target.value))},variant:"outlined",children:t.map(n=>e.jsx(E,{value:n.name,children:n.displayName||n.name},n.name))}):null})}),z=k()(s=>({root:{marginTop:s.spacing(1)},stepper:{backgroundColor:s.palette.background.default},button:{marginTop:s.spacing(1),marginRight:s.spacing(1)},actionsContainer:{marginBottom:s.spacing(2)}})),f=["Select a Connection Type","Configure Connection"],A=m(function({model:s}){const[t,o]=c.useState(),[i,u]=c.useState(),[n,p]=c.useState(0),{classes:r}=z(),a=g.getSession(s),{pluginManager:h}=g.getEnv(a),l=c.useMemo(()=>t==null?void 0:t.configSchema.create({connectionId:i},g.getEnv(s)),[i,t,s]);return e.jsx("div",{className:r.root,children:e.jsx(I,{className:r.stepper,activeStep:n,orientation:"vertical",children:f.map(x=>e.jsxs(M,{children:[e.jsx(B,{children:x}),e.jsxs(W,{children:[n===0?e.jsx(w,{connectionTypeChoices:h.getConnectionElements(),connectionType:t,setConnectionType:d=>{o(d),d&&u(`${d.name}-${Date.now()}`)}}):t&&l?e.jsx(L,{connectionType:t,model:l,session:a}):null,e.jsxs("div",{className:r.actionsContainer,children:[e.jsx(C,{disabled:n===0,onClick:()=>{p(n-1)},className:r.button,children:"Back"}),e.jsx(C,{disabled:!(n===0&&t||n===1&&l),variant:"contained",color:"primary",onClick:()=>{if(n===f.length-1){if(l&&y(a)){const d=a.addConnectionConf(l);a.makeConnection(d)}else a.notify("No config model to add");g.isSessionModelWithWidgets(a)&&a.hideWidget(s)}else p(n+1)},className:r.button,"data-testid":"addConnectionNext",children:n===f.length-1?"Connect":"Next"})]})]})]},x))})})});export{A as default};
//# sourceMappingURL=AddConnectionWidget-CEdtVbrA.js.map
