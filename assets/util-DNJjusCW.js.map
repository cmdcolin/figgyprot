{"version":3,"file":"util-DNJjusCW.js","sources":["../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/svgcomponents/SVGRegionSeparators.js","../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/svgcomponents/SVGRuler.js","../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/svgcomponents/SVGTrackLabel.js","../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/svgcomponents/SVGTracks.js","../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/svgcomponents/util.js"],"sourcesContent":["import { jsx as _jsx, Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function SVGRegionSeparators({ model, height, }) {\n    const { dynamicBlocks, offsetPx, interRegionPaddingWidth } = model;\n    return (_jsx(_Fragment, { children: dynamicBlocks.contentBlocks.slice(1).map(block => (_jsx(\"rect\", { x: block.offsetPx - offsetPx - interRegionPaddingWidth, width: interRegionPaddingWidth, y: 0, height: height, fill: \"grey\" }, block.key))) }));\n}\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { getTickDisplayStr, stripAlpha } from '@jbrowse/core/util';\nimport { useTheme } from '@mui/material';\nimport { makeTicks } from '../util';\nimport SVGRegionSeparators from './SVGRegionSeparators';\nfunction Ruler({ start, end, bpPerPx, reversed = false, major = true, minor = true, hideText = false, }) {\n    const ticks = makeTicks(start, end, bpPerPx, major, minor);\n    const theme = useTheme();\n    const c = stripAlpha(theme.palette.text.secondary);\n    return (_jsxs(_Fragment, { children: [ticks.map(tick => {\n                const x = (reversed ? end - tick.base : tick.base - start) / bpPerPx;\n                return (_jsx(\"line\", { x1: x, x2: x, y1: 0, y2: tick.type === 'major' ? 6 : 4, strokeWidth: 1, stroke: c }, `tick-${tick.base}`));\n            }), !hideText\n                ? ticks\n                    .filter(tick => tick.type === 'major')\n                    .map(tick => {\n                    const x = (reversed ? end - tick.base : tick.base - start) / bpPerPx;\n                    return (_jsx(\"text\", { x: x - 3, y: 7 + 11, fontSize: 11, fill: c, children: getTickDisplayStr(tick.base + 1, bpPerPx) }, `label-${tick.base}`));\n                })\n                : null] }));\n}\nexport default function SVGRuler({ model, fontSize, }) {\n    const { dynamicBlocks: { contentBlocks }, offsetPx: viewOffsetPx, bpPerPx, } = model;\n    const renderRuler = contentBlocks.length < 5;\n    const theme = useTheme();\n    const c = stripAlpha(theme.palette.text.primary);\n    return (_jsxs(_Fragment, { children: [_jsx(SVGRegionSeparators, { model: model, height: 30 }), contentBlocks.map(block => {\n                const { start, end, key, reversed, offsetPx, refName, widthPx } = block;\n                const offset = offsetPx - viewOffsetPx;\n                const clipid = `clip-${key}`;\n                return (_jsxs(\"g\", { children: [_jsx(\"defs\", { children: _jsx(\"clipPath\", { id: clipid, children: _jsx(\"rect\", { x: 0, y: 0, width: widthPx, height: 100 }) }) }), _jsx(\"g\", { transform: `translate(${offset} 0)`, children: _jsxs(\"g\", { clipPath: `url(#${clipid})`, children: [_jsx(\"text\", { x: 4, y: fontSize, fontSize: fontSize, fill: c, children: refName }), _jsx(\"g\", { transform: \"translate(0 20)\", children: _jsx(Ruler, { hideText: !renderRuler, start: start, end: end, bpPerPx: bpPerPx, reversed: reversed }) })] }) })] }, key));\n            })] }));\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { coarseStripHTML, stripAlpha } from '@jbrowse/core/util';\nimport { useTheme } from '@mui/material';\nexport default function SVGTrackLabel({ trackLabels, trackName, fontSize, trackLabelOffset, x, }) {\n    const theme = useTheme();\n    const fill = stripAlpha(theme.palette.text.primary);\n    const xoff = trackLabels === 'overlay' ? 5 : 0;\n    const yoff = trackLabels === 'offset' ? 5 : 0;\n    const name = coarseStripHTML(trackName);\n    return trackLabels !== 'none' ? (_jsx(\"g\", { children: trackLabels === 'left' ? (_jsx(\"text\", { x: trackLabelOffset - 40, y: 20, fill: fill, fontSize: fontSize, dominantBaseline: \"hanging\", textAnchor: \"end\", children: name })) : (_jsx(\"text\", { x: x + xoff, y: yoff, fill: fill, fontSize: fontSize, dominantBaseline: \"hanging\", children: name })) })) : null;\n}\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { getSession } from '@jbrowse/core/util';\nimport { getTrackName } from '@jbrowse/core/util/tracks';\nimport SVGRegionSeparators from './SVGRegionSeparators';\nimport SVGTrackLabel from './SVGTrackLabel';\nexport default function SVGTracks({ displayResults, model, textHeight, fontSize, trackLabels = 'offset', trackLabelOffset = 0, }) {\n    const session = getSession(model);\n    const textOffset = trackLabels === 'offset' ? textHeight : 0;\n    return (_jsx(_Fragment, { children: displayResults.reduce(({ prevOffset, reactElements }, { track, result }) => {\n            const conf = track.configuration;\n            const trackName = getTrackName(conf, session);\n            const display = track.displays[0];\n            const x = Math.max(-model.offsetPx, 0);\n            const currOffset = prevOffset + display.height + textOffset;\n            return {\n                prevOffset: currOffset,\n                reactElements: [\n                    ...reactElements,\n                    _jsxs(\"g\", { transform: `translate(0 ${prevOffset})`, children: [_jsxs(\"g\", { transform: `translate(${trackLabelOffset} ${textOffset})`, children: [_jsx(SVGRegionSeparators, { model: model, height: display.height }), result] }), _jsx(SVGTrackLabel, { trackName: trackName, fontSize: fontSize, trackLabels: trackLabels, trackLabelOffset: trackLabelOffset, x: x })] }, conf.trackId),\n                ],\n            };\n        }, {\n            prevOffset: 0,\n            reactElements: [],\n        }).reactElements }));\n}\n","import { sum } from '@jbrowse/core/util';\nexport function totalHeight(tracks, textHeight, trackLabels) {\n    return sum(tracks.map(t => t.displays[0].height +\n        (['none', 'left'].includes(trackLabels) ? 0 : textHeight)));\n}\n"],"names":["SVGRegionSeparators","model","height","dynamicBlocks","offsetPx","interRegionPaddingWidth","_jsx","_Fragment","block","Ruler","start","end","bpPerPx","reversed","major","minor","hideText","ticks","makeTicks","theme","useTheme","c","stripAlpha","_jsxs","tick","x","getTickDisplayStr","SVGRuler","fontSize","contentBlocks","viewOffsetPx","renderRuler","key","refName","widthPx","offset","clipid","SVGTrackLabel","trackLabels","trackName","trackLabelOffset","fill","xoff","yoff","name","coarseStripHTML","SVGTracks","displayResults","textHeight","session","getSession","textOffset","prevOffset","reactElements","track","result","conf","getTrackName","display","totalHeight","tracks","sum","t"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}