{"version":3,"file":"ExportSvgDialog-CKbtlGU9.js","sources":["../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyView/components/TextField2.js","../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyView/components/ExportSvgDialog.js"],"sourcesContent":["import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { TextField } from '@mui/material';\nexport default function TextField2({ children, ...rest }) {\n    return (_jsx(\"div\", { children: _jsx(TextField, { ...rest, children: children }) }));\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { Dialog, ErrorMessage } from '@jbrowse/core/ui';\nimport { getSession, useLocalStorage } from '@jbrowse/core/util';\nimport { Button, Checkbox, CircularProgress, DialogActions, DialogContent, FormControlLabel, MenuItem, Typography, } from '@mui/material';\nimport TextField2 from './TextField2';\nfunction LoadingMessage() {\n    return (_jsxs(\"div\", { children: [_jsx(CircularProgress, { size: 20, style: { marginRight: 20 } }), _jsx(Typography, { display: \"inline\", children: \"Creating SVG\" })] }));\n}\nfunction useSvgLocal(key, val) {\n    return useLocalStorage(`svg-${key}`, val);\n}\nexport default function ExportSvgDialog({ model, handleClose, }) {\n    const session = getSession(model);\n    const offscreenCanvas = typeof OffscreenCanvas !== 'undefined';\n    const [rasterizeLayers, setRasterizeLayers] = useState(offscreenCanvas);\n    const [loading, setLoading] = useState(false);\n    const [filename, setFilename] = useSvgLocal('file', 'jbrowse.svg');\n    const [trackLabels, setTrackLabels] = useSvgLocal('tracklabels', 'offset');\n    const [themeName, setThemeName] = useSvgLocal('theme', session.themeName || 'default');\n    const [error, setError] = useState();\n    return (_jsxs(Dialog, { open: true, onClose: handleClose, title: \"Export SVG\", children: [_jsxs(DialogContent, { children: [error ? (_jsx(ErrorMessage, { error: error })) : loading ? (_jsx(LoadingMessage, {})) : null, _jsx(TextField2, { helperText: \"filename\", value: filename, onChange: event => {\n                            setFilename(event.target.value);\n                        } }), _jsxs(TextField2, { select: true, label: \"Track label positioning\", variant: \"outlined\", value: trackLabels, style: { width: 150 }, onChange: event => {\n                            setTrackLabels(event.target.value);\n                        }, children: [_jsx(MenuItem, { value: \"offset\", children: \"Offset\" }), _jsx(MenuItem, { value: \"overlay\", children: \"Overlay\" }), _jsx(MenuItem, { value: \"left\", children: \"Left\" }), _jsx(MenuItem, { value: \"none\", children: \"None\" })] }), _jsx(\"br\", {}), session.allThemes ? (_jsx(TextField2, { select: true, label: \"Theme\", variant: \"outlined\", value: themeName, onChange: event => {\n                            setThemeName(event.target.value);\n                        }, children: Object.entries(session.allThemes()).map(([key, val]) => (_jsx(MenuItem, { value: key, children: val.name || '(Unknown name)' }, key))) })) : null, offscreenCanvas ? (_jsx(FormControlLabel, { control: _jsx(Checkbox, { checked: rasterizeLayers, onChange: () => {\n                                setRasterizeLayers(val => !val);\n                            } }), label: \"Rasterize canvas based tracks? File may be much larger if this is turned off\" })) : (_jsx(Typography, { children: \"Note: rasterizing layers not yet supported in this browser, so SVG size may be large\" }))] }), _jsxs(DialogActions, { children: [_jsx(Button, { variant: \"contained\", color: \"secondary\", onClick: () => {\n                            handleClose();\n                        }, children: \"Cancel\" }), _jsx(Button, { variant: \"contained\", color: \"primary\", type: \"submit\", onClick: async () => {\n                            setLoading(true);\n                            setError(undefined);\n                            try {\n                                await model.exportSvg({\n                                    rasterizeLayers,\n                                    filename,\n                                    themeName,\n                                    trackLabels,\n                                });\n                                handleClose();\n                            }\n                            catch (e) {\n                                console.error(e);\n                                setError(e);\n                            }\n                            finally {\n                                setLoading(false);\n                            }\n                        }, children: \"Submit\" })] })] }));\n}\n"],"names":["TextField2","children","rest","_jsx","TextField","LoadingMessage","_jsxs","CircularProgress","Typography","useSvgLocal","key","val","useLocalStorage","ExportSvgDialog","model","handleClose","session","getSession","offscreenCanvas","rasterizeLayers","setRasterizeLayers","useState","loading","setLoading","filename","setFilename","trackLabels","setTrackLabels","themeName","setThemeName","error","setError","Dialog","DialogContent","ErrorMessage","event","MenuItem","FormControlLabel","Checkbox","DialogActions","Button","e"],"mappings":"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","x_google_ignoreList":[0,1]}