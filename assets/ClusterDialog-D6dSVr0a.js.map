{"version":3,"file":"ClusterDialog-D6dSVr0a.js","sources":["../../node_modules/@jbrowse/plugin-wiggle/esm/MultiLinearWiggleDisplay/components/ClusterDialog/ClusterDialogAuto.js","../../node_modules/@jbrowse/plugin-wiggle/esm/MultiLinearWiggleDisplay/components/ClusterDialog/ClusterDialogManual.js","../../node_modules/@jbrowse/plugin-wiggle/esm/MultiLinearWiggleDisplay/components/ClusterDialog/ClusterDialog.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { ErrorMessage } from '@jbrowse/core/ui';\nimport { getContainingView, getSession, isAbortException, useLocalStorage, } from '@jbrowse/core/util';\nimport { createStopToken, stopStopToken } from '@jbrowse/core/util/stopToken';\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks';\nimport { Button, DialogActions, DialogContent, TextField, Typography, } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { isAlive } from 'mobx-state-tree';\nconst ClusterDialogAuto = observer(function ({ model, children, handleClose, }) {\n    const [progress, setProgress] = useState('');\n    const [error, setError] = useState();\n    const [stopToken, setStopToken] = useState('');\n    const [showAdvanced, setShowAdvanced] = useState(false);\n    const [samplesPerPixel, setSamplesPerPixel] = useLocalStorage('cluster-samplesPerPixel', '1');\n    return (_jsxs(_Fragment, { children: [_jsxs(DialogContent, { children: [children, _jsxs(\"div\", { style: { marginTop: 50 }, children: [_jsx(Button, { variant: \"contained\", onClick: () => {\n                                    setShowAdvanced(!showAdvanced);\n                                }, children: showAdvanced ? 'Hide advanced options' : 'Show advanced options' }), showAdvanced ? (_jsxs(\"div\", { style: { marginTop: 20 }, children: [_jsx(Typography, { children: \"This procedure samples the data at each 'pixel' across the visible by default\" }), _jsx(TextField, { label: \"Samples per pixel (>1 for denser sampling, between 0-1 for sparser sampling)\", variant: \"outlined\", size: \"small\", value: samplesPerPixel, onChange: event => {\n                                            setSamplesPerPixel(event.target.value);\n                                        } })] })) : null] }), _jsxs(\"div\", { children: [progress ? (_jsxs(\"div\", { style: { padding: 50 }, children: [_jsxs(\"span\", { style: { width: 400 }, children: [\"Progress: \", progress] }), _jsx(Button, { onClick: () => {\n                                            stopStopToken(stopToken);\n                                        }, children: \"Stop\" })] })) : null, error ? _jsx(ErrorMessage, { error: error }) : null] })] }), _jsxs(DialogActions, { children: [_jsx(Button, { variant: \"contained\", onClick: async () => {\n                            try {\n                                setError(undefined);\n                                setProgress('');\n                                const view = getContainingView(model);\n                                if (!view.initialized) {\n                                    return;\n                                }\n                                const { rpcManager } = getSession(model);\n                                const { sourcesWithoutLayout, adapterConfig } = model;\n                                if (sourcesWithoutLayout) {\n                                    const sessionId = getRpcSessionId(model);\n                                    const stopToken = createStopToken();\n                                    setStopToken(stopToken);\n                                    const ret = (await rpcManager.call(sessionId, 'MultiWiggleClusterScoreMatrix', {\n                                        regions: view.dynamicBlocks.contentBlocks,\n                                        sources: sourcesWithoutLayout,\n                                        sessionId,\n                                        adapterConfig,\n                                        stopToken,\n                                        bpPerPx: view.bpPerPx / +samplesPerPixel,\n                                        statusCallback: (arg) => {\n                                            setProgress(arg);\n                                        },\n                                    }));\n                                    model.setLayout(ret.order.map(idx => {\n                                        const ret = sourcesWithoutLayout[idx];\n                                        if (!ret) {\n                                            throw new Error(`out of bounds at ${idx}`);\n                                        }\n                                        return ret;\n                                    }));\n                                }\n                                handleClose();\n                            }\n                            catch (e) {\n                                if (!isAbortException(e) && isAlive(model)) {\n                                    console.error(e);\n                                    setError(e);\n                                }\n                            }\n                            finally {\n                                setProgress('');\n                                setStopToken('');\n                            }\n                        }, children: \"Run clustering\" }), _jsx(Button, { variant: \"contained\", color: \"secondary\", onClick: () => {\n                            handleClose();\n                            if (stopToken) {\n                                stopStopToken(stopToken);\n                            }\n                        }, children: \"Cancel\" })] })] }));\n});\nexport default ClusterDialogAuto;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { CascadingMenuButton, ErrorMessage, LoadingEllipses, } from '@jbrowse/core/ui';\nimport { getContainingView, getSession, isAbortException, useLocalStorage, } from '@jbrowse/core/util';\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport { Button, DialogActions, DialogContent, FormControlLabel, Radio, RadioGroup, TextField, Typography, } from '@mui/material';\nimport copy from 'copy-to-clipboard';\nimport { saveAs } from 'file-saver';\nimport { observer } from 'mobx-react';\nimport { isAlive } from 'mobx-state-tree';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => ({\n    textAreaFont: {\n        fontFamily: 'Courier New',\n    },\n    mgap: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: theme.spacing(4),\n    },\n}));\nconst ClusterDialogManuals = observer(function ({ model, handleClose, children, }) {\n    const { classes } = useStyles();\n    const [paste, setPaste] = useState('');\n    const [ret, setRet] = useState();\n    const [error, setError] = useState();\n    const [loading, setLoading] = useState(false);\n    const [showAdvanced, setShowAdvanced] = useState(false);\n    const [clusterMethod, setClusterMethod] = useLocalStorage('cluster-clusterMethod', 'single');\n    const [samplesPerPixel, setSamplesPerPixel] = useLocalStorage('cluster-samplesPerPixel', '1');\n    useEffect(() => {\n        ;\n        (async () => {\n            try {\n                setError(undefined);\n                setRet(undefined);\n                setLoading(true);\n                const view = getContainingView(model);\n                const { dynamicBlocks, bpPerPx } = view;\n                const { rpcManager } = getSession(model);\n                const { sourcesWithoutLayout, adapterConfig } = model;\n                const sessionId = getRpcSessionId(model);\n                const ret = (await rpcManager.call(sessionId, 'MultiWiggleGetScoreMatrix', {\n                    regions: dynamicBlocks.contentBlocks,\n                    sources: sourcesWithoutLayout,\n                    sessionId,\n                    adapterConfig,\n                    bpPerPx: bpPerPx / +samplesPerPixel,\n                }));\n                setRet(ret);\n            }\n            catch (e) {\n                if (!isAbortException(e) && isAlive(model)) {\n                    console.error(e);\n                    setError(e);\n                }\n            }\n            finally {\n                setLoading(false);\n            }\n        })();\n    }, [model, samplesPerPixel]);\n    const results = ret\n        ? `inputMatrix<-matrix(c(${Object.values(ret)\n            .map(val => val.join(','))\n            .join(',\\n')}\n),nrow=${Object.values(ret).length},byrow=TRUE)\nrownames(inputMatrix)<-c(${Object.keys(ret)\n            .map(key => `'${key}'`)\n            .join(',')})\nresultClusters<-hclust(dist(inputMatrix), method='${clusterMethod}')\ncat(resultClusters$order,sep='\\\\n')`\n        : undefined;\n    const resultsTsv = ret\n        ? Object.entries(ret)\n            .map(([key, val]) => [key, ...val].join('\\t'))\n            .join('\\n')\n        : undefined;\n    return (_jsxs(_Fragment, { children: [_jsxs(DialogContent, { children: [children, _jsxs(\"div\", { style: { marginTop: 50 }, children: [_jsxs(\"div\", { style: {\n                                    display: 'flex',\n                                    gap: '8px',\n                                    flexWrap: 'wrap',\n                                    marginBottom: '16px',\n                                }, children: [_jsx(Button, { variant: \"contained\", onClick: () => {\n                                            saveAs(new Blob([results || ''], {\n                                                type: 'text/plain;charset=utf-8',\n                                            }), 'cluster.R');\n                                        }, children: \"Download Rscript\" }), ' ', \"or\", ' ', _jsx(Button, { variant: \"contained\", onClick: () => {\n                                            copy(results || '');\n                                        }, children: \"Copy Rscript to clipboard\" }), ' ', _jsx(\"div\", { style: { float: 'right' }, children: _jsx(CascadingMenuButton, { menuItems: [\n                                                {\n                                                    label: 'Download TSV',\n                                                    onClick: () => {\n                                                        saveAs(new Blob([resultsTsv || ''], {\n                                                            type: 'text/plain;charset=utf-8',\n                                                        }), 'scores.tsv');\n                                                    },\n                                                },\n                                                {\n                                                    label: showAdvanced\n                                                        ? 'Hide advanced options'\n                                                        : 'Show advanced options',\n                                                    onClick: () => {\n                                                        setShowAdvanced(!showAdvanced);\n                                                    },\n                                                },\n                                            ], children: _jsx(MenuIcon, {}) }) }), _jsx(\"div\", { children: showAdvanced ? (_jsxs(\"div\", { children: [_jsx(Typography, { variant: \"h6\", children: \"Advanced options\" }), _jsx(RadioGroup, { children: Object.entries({\n                                                        single: 'Single',\n                                                        complete: 'Complete',\n                                                    }).map(([key, val]) => (_jsx(FormControlLabel, { control: _jsx(Radio, { checked: clusterMethod === key, onChange: () => {\n                                                                setClusterMethod(key);\n                                                            } }), label: val }, key))) }), _jsxs(\"div\", { style: { marginTop: 20 }, children: [_jsx(Typography, { children: \"This procedure samples the data at each 'pixel' across the visible by default\" }), _jsx(TextField, { label: \"Samples per pixel (>1 for denser sampling, between 0-1 for sparser sampling)\", variant: \"outlined\", size: \"small\", value: samplesPerPixel, onChange: event => {\n                                                                setSamplesPerPixel(event.target.value);\n                                                            } })] })] })) : null }), results ? (_jsx(\"div\", {})) : loading ? (_jsx(LoadingEllipses, { variant: \"h6\", title: \"Generating score matrix\" })) : error ? (_jsx(ErrorMessage, { error: error })) : null] }), _jsxs(\"div\", { children: [_jsx(Typography, { variant: \"subtitle2\", gutterBottom: true, style: { marginTop: '16px' }, children: \"Clustering Results:\" }), _jsx(TextField, { multiline: true, fullWidth: true, variant: \"outlined\", placeholder: \"Paste results from Rscript here (sequence of numbers, one per line, specifying the new ordering)\", rows: 10, value: paste, onChange: event => {\n                                            setPaste(event.target.value);\n                                        }, slotProps: {\n                                            input: {\n                                                classes: {\n                                                    input: classes.textAreaFont,\n                                                },\n                                            },\n                                        } })] })] })] }), _jsxs(DialogActions, { children: [_jsx(Button, { variant: \"contained\", onClick: () => {\n                            const { sourcesWithoutLayout } = model;\n                            if (sourcesWithoutLayout) {\n                                try {\n                                    model.setLayout(paste\n                                        .split('\\n')\n                                        .map(t => t.trim())\n                                        .filter(f => !!f)\n                                        .map(r => +r)\n                                        .map(idx => {\n                                        const ret = sourcesWithoutLayout[idx - 1];\n                                        if (!ret) {\n                                            throw new Error(`out of bounds at ${idx}`);\n                                        }\n                                        return ret;\n                                    }));\n                                }\n                                catch (e) {\n                                    console.error(e);\n                                    getSession(model).notifyError(`${e}`, e);\n                                }\n                            }\n                            handleClose();\n                        }, children: \"Apply clustering\" }), _jsx(Button, { variant: \"contained\", color: \"secondary\", onClick: () => {\n                            handleClose();\n                        }, children: \"Cancel\" })] })] }));\n});\nexport default ClusterDialogManuals;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { Dialog } from '@jbrowse/core/ui';\nimport { FormControlLabel, Radio, RadioGroup } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport ClusterDialogAuto from './ClusterDialogAuto';\nimport ClusterDialogManual from './ClusterDialogManual';\nfunction Header({ activeMode, setActiveMode, }) {\n    return (_jsx(\"div\", { children: _jsx(RadioGroup, { children: Object.entries({\n                auto: (_jsx(\"div\", { children: \"Run in-app clustering (slow for large data, built in JS clustering)\" })),\n                manual: (_jsx(\"div\", { children: \"Download R script to run clustering (faster for large data, uses hclust, may be more accurate)\" })),\n            }).map(([key, val]) => (_jsx(FormControlLabel, { control: _jsx(Radio, { checked: activeMode === key, onChange: () => {\n                        setActiveMode(key);\n                    } }), label: val }, key))) }) }));\n}\nconst ClusterDialog = observer(function ({ model, handleClose, }) {\n    const [activeMode, setActiveMode] = useState('auto');\n    return (_jsx(Dialog, { open: true, title: \"Cluster by score\", maxWidth: \"xl\", onClose: (_, reason) => {\n            if (reason !== 'backdropClick') {\n                handleClose();\n            }\n        }, children: activeMode === 'auto' ? (_jsx(ClusterDialogAuto, { model: model, handleClose: handleClose, children: _jsx(Header, { activeMode: activeMode, setActiveMode: setActiveMode }) })) : (_jsx(ClusterDialogManual, { model: model, handleClose: handleClose, children: _jsx(Header, { activeMode: activeMode, setActiveMode: setActiveMode }) })) }));\n});\nexport default ClusterDialog;\n"],"names":["ClusterDialogAuto","observer","model","children","handleClose","progress","setProgress","useState","error","setError","stopToken","setStopToken","showAdvanced","setShowAdvanced","samplesPerPixel","setSamplesPerPixel","useLocalStorage","_jsxs","_Fragment","DialogContent","_jsx","Button","Typography","TextField","event","stopStopToken","ErrorMessage","DialogActions","view","getContainingView","rpcManager","getSession","sourcesWithoutLayout","adapterConfig","sessionId","getRpcSessionId","createStopToken","ret","arg","idx","e","isAbortException","isAlive","useStyles","makeStyles","theme","ClusterDialogManuals","classes","paste","setPaste","setRet","loading","setLoading","clusterMethod","setClusterMethod","useEffect","dynamicBlocks","bpPerPx","results","val","key","resultsTsv","saveAs","copy","CascadingMenuButton","MenuIcon","RadioGroup","FormControlLabel","Radio","LoadingEllipses","t","f","r","Header","activeMode","setActiveMode","ClusterDialog","Dialog","_","reason","ClusterDialogManual"],"mappings":"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","x_google_ignoreList":[0,1,2]}