import{bM as L,cz as P,j as e,bO as A,bN as v,c as j,db as B,m as D,B as d,dc as I,dd as R,de as T,df as G,bL as O,J as x,H as U,D as W,f as K}from"./index-CT2bM4yV.js";import{c as q}from"./cjs-BbIJX6ds.js";import{C as z,a as Y}from"./ColorPicker-CiYMoNPF.js";import{m as k,a as y}from"./util-BVhmitgJ.js";var _={},w=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_,"__esModule",{value:!0});const u=e,F=j,J=w(B),g=A,Q=L,V=w(q),X=P,Z=(0,X.makeStyles)()(t=>({closeButton:{position:"absolute",right:t.spacing(1),top:t.spacing(1),color:t.palette.grey[500]}}));function ee(t){const o=(0,F.useRef)(null);return(0,u.jsx)(V.default,{nodeRef:o,cancel:'[class*="MuiDialogContent-root"]',onStart:n=>{var r;return`${(r=n.target)===null||r===void 0?void 0:r.className}`.includes("MuiDialogTitle")},children:(0,u.jsx)(g.Paper,{ref:o,...t})})}const te=(0,Q.observer)(function(o){const{classes:n}=Z(),{title:r,children:m,onClose:i}=o;return(0,u.jsx)(g.Dialog,{...o,PaperComponent:ee,children:(0,u.jsxs)(g.ScopedCssBaseline,{children:[(0,u.jsxs)(g.DialogTitle,{style:{cursor:"move"},children:[r,i?(0,u.jsx)(g.IconButton,{className:n.closeButton,onClick:()=>{i()},children:(0,u.jsx)(J.default,{})}):null]}),(0,u.jsx)(g.Divider,{}),m]})})});var oe=_.default=te;const le=D()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});function se({rows:t,onChange:o,showTips:n}){const{classes:r}=le(),[m,i]=j.useState(null),[s,b]=j.useState([]),{name:re,color:ie,baseUri:ae,...M}=t[0],[$,N]=j.useState("blue"),[p,E]=j.useState({idx:0,field:null});return e.jsxs("div",{children:[e.jsx(d,{disabled:!s.length,onClick:l=>{i(l.currentTarget)},children:"Change color of selected items"}),e.jsxs(d,{onClick:()=>{o(k([...t],s))},disabled:!s.length,children:[e.jsx(I,{}),n?"Move selected items up":null]}),e.jsxs(d,{onClick:()=>{o(y([...t],s))},disabled:!s.length,children:[e.jsx(R,{}),n?"Move selected items down":null]}),e.jsxs(d,{onClick:()=>{o(k([...t],s,t.length))},disabled:!s.length,children:[e.jsx(T,{}),n?"Move selected items to top":null]}),e.jsxs(d,{onClick:()=>{o(y([...t],s,t.length))},disabled:!s.length,children:[e.jsx(G,{}),n?"Move selected items to bottom":null]}),e.jsx(z.ColorPopover,{anchorEl:m,color:$,onChange:l=>{N(l);for(const a of s){const h=t.find(c=>c.name===a);h&&(h.color=l)}o([...t])},onClose:()=>{i(null)}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(O,{getRowId:l=>l.name,checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:l=>{b(l)},rows:t,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:({value:l,id:a})=>e.jsx(Y,{color:l||"blue",onChange:h=>{const c=t.find(f=>f.name===a);c&&(c.color=h),o([...t])}})},{field:"name",headerName:"Name",width:x.measureGridWidth(t.map(l=>l.name))},...Object.keys(M).map(l=>({field:l,renderCell:({value:a})=>e.jsx("div",{className:r.cell,children:e.jsx(U.SanitizedHTML,{html:x.getStr(a)})}),width:x.measureGridWidth(t.map(a=>`${a[l]}`))}))],sortModel:[],onSortModelChange:l=>{const a=l[0],h=(p.idx+1)%2,c=a.field||p.field;E({idx:h,field:c}),o(c?[...t].sort((f,H)=>{const C=x.getStr(f[c]),S=x.getStr(H[c]);return h===1?C.localeCompare(S):S.localeCompare(C)}):t)}})})]})}const ne=D()({content:{minWidth:800},float:{float:"right"}});function me({model:t,handleClose:o}){const{classes:n}=ne(),{sources:r}=t,[m,i]=j.useState(structuredClone(r||[])),[s,b]=x.useLocalStorage("multiwiggle-showTips",!1);return e.jsxs(oe,{open:!0,onClose:o,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor",children:[e.jsxs(W,{className:n.content,children:[e.jsx(d,{variant:"contained",className:n.float,onClick:()=>{b(!s)},children:s?"Hide tips":"Show tips"}),e.jsx("br",{}),s?e.jsxs(e.Fragment,{children:["Helpful tips",e.jsxs("ul",{children:[e.jsx("li",{children:"You can select rows in the table with the checkboxes"}),e.jsx("li",{children:"Multi-select is enabled with shift-click and control-click"}),e.jsx("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),e.jsx("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),e.jsx("li",{children:"Changes are applied when you hit Submit"}),e.jsx("li",{children:"You can click and drag the dialog box to move it on the screen"}),e.jsx("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]}):null,e.jsx(se,{rows:m,onChange:i,showTips:s})]}),e.jsxs(K,{children:[e.jsx(d,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{t.clearLayout(),i(t.sources||[])},children:"Clear custom settings"}),e.jsx(d,{variant:"contained",color:"secondary",onClick:()=>{o(),i([...t.sources||[]])},children:"Cancel"}),e.jsx(d,{variant:"contained",color:"primary",type:"submit",onClick:()=>{t.setLayout(m),o()},children:"Submit"})]})]})}export{me as default};
//# sourceMappingURL=SetColorDialog-CuSl02Ax.js.map
