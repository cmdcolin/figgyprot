{"version":3,"file":"getMultiVariantFeaturesAutorun-BcVR8Lv5.js","sources":["../../node_modules/@jbrowse/plugin-variants/esm/getMultiVariantFeaturesAutorun.js"],"sourcesContent":["import { SimpleFeature, getContainingView, getSession, } from '@jbrowse/core/util';\nimport { isAbortException } from '@jbrowse/core/util/aborting';\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks';\nimport { autorun } from 'mobx';\nimport { addDisposer, isAlive } from 'mobx-state-tree';\nexport function getMultiVariantFeaturesAutorun(self) {\n    addDisposer(self, autorun(async () => {\n        try {\n            const view = getContainingView(self);\n            if (!view.initialized || !self.statsReadyAndRegionNotTooLarge) {\n                return;\n            }\n            const { rpcManager } = getSession(self);\n            const { sources, minorAlleleFrequencyFilter, adapterConfig } = self;\n            if (sources) {\n                const sessionId = getRpcSessionId(self);\n                const { sampleInfo, hasPhased, features } = (await rpcManager.call(sessionId, 'MultiVariantGetSimplifiedFeatures', {\n                    regions: view.dynamicBlocks.contentBlocks,\n                    sources,\n                    minorAlleleFrequencyFilter,\n                    sessionId,\n                    adapterConfig,\n                }));\n                if (isAlive(self)) {\n                    self.setHasPhased(hasPhased);\n                    self.setSampleInfo(sampleInfo);\n                    self.setFeatures(features.map(f => new SimpleFeature(f)));\n                }\n            }\n        }\n        catch (e) {\n            console.error(e);\n            if (!isAbortException(e) && isAlive(self)) {\n                getSession(self).notifyError(`${e}`, e);\n            }\n        }\n    }, { delay: 1000 }));\n}\n"],"names":["getMultiVariantFeaturesAutorun","self","addDisposer","autorun","view","getContainingView","rpcManager","getSession","sources","minorAlleleFrequencyFilter","adapterConfig","sessionId","getRpcSessionId","sampleInfo","hasPhased","features","isAlive","f","SimpleFeature","isAbortException"],"mappings":"8EAKO,SAASA,EAA+BC,EAAM,CACjDC,EAAYD,EAAME,EAAQ,SAAY,CAClC,GAAI,CACA,MAAMC,EAAOC,EAAiB,kBAACJ,CAAI,EACnC,GAAI,CAACG,EAAK,aAAe,CAACH,EAAK,+BAC3B,OAEJ,KAAM,CAAE,WAAAK,CAAU,EAAKC,EAAU,WAACN,CAAI,EAChC,CAAE,QAAAO,EAAS,2BAAAC,EAA4B,cAAAC,CAAe,EAAGT,EAC/D,GAAIO,EAAS,CACT,MAAMG,EAAYC,EAAe,gBAACX,CAAI,EAChC,CAAE,WAAAY,EAAY,UAAAC,EAAW,SAAAC,CAAQ,EAAM,MAAMT,EAAW,KAAKK,EAAW,oCAAqC,CAC/G,QAASP,EAAK,cAAc,cAC5B,QAAAI,EACA,2BAAAC,EACA,UAAAE,EACA,cAAAD,CACpB,CAAiB,EACGM,EAAQf,CAAI,IACZA,EAAK,aAAaa,CAAS,EAC3Bb,EAAK,cAAcY,CAAU,EAC7BZ,EAAK,YAAYc,EAAS,IAAIE,GAAK,IAAIC,EAAa,cAACD,CAAC,CAAC,CAAC,EAE5E,CACA,OACe,EAAG,CACN,QAAQ,MAAM,CAAC,EACX,CAACE,EAAiB,CAAC,GAAKH,EAAQf,CAAI,GACpCM,EAAU,WAACN,CAAI,EAAE,YAAY,GAAG,CAAC,GAAI,CAAC,CAEtD,CACA,EAAO,CAAE,MAAO,GAAI,CAAE,CAAC,CACvB","x_google_ignoreList":[0]}