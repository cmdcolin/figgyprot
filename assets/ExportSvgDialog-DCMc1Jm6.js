import{a8 as p,c as l,j as e,D as E,M as r,h as z,C as w,T as y,f as D,B as j,l as F,e as N}from"./index-CGKDrrCR.js";import{u as v}from"./index-CmLsXt2o.js";import"./Dialog-DMOWZHAH.js";function M(){return e.jsxs("div",{children:[e.jsx(F,{size:20,style:{marginRight:20}}),e.jsx(y,{display:"inline",children:"Creating SVG"})]})}function i(t,a){return p.useLocalStorage(`svg-${t}`,a)}function o({children:t,...a}){return e.jsx("div",{children:e.jsx(N,{...a,children:t})})}function V({model:t,handleClose:a}){const n=p.getSession(t),c=typeof OffscreenCanvas<"u",[u,b]=l.useState(c),[C,d]=l.useState(!1),[h,S]=i("file","jbrowse.svg"),[x,T]=i("tracklabels","offset"),[f,L]=i("theme",n.themeName||"default"),[g,m]=l.useState();return e.jsxs(v.Dialog,{open:!0,onClose:a,title:"Export SVG",children:[e.jsxs(E,{children:[g?e.jsx(v.ErrorMessage,{error:g}):C?e.jsx(M,{}):null,e.jsx(o,{helperText:"filename",value:h,onChange:s=>{S(s.target.value)}}),e.jsxs(o,{select:!0,label:"Track label positioning",variant:"outlined",value:x,style:{width:150},onChange:s=>{T(s.target.value)},children:[e.jsx(r,{value:"offset",children:"Offset"}),e.jsx(r,{value:"overlay",children:"Overlay"}),e.jsx(r,{value:"left",children:"Left"}),e.jsx(r,{value:"none",children:"None"})]}),e.jsx("br",{}),n.allThemes?e.jsx(o,{select:!0,label:"Theme",variant:"outlined",value:f,onChange:s=>{L(s.target.value)},children:Object.entries(n.allThemes()).map(([s,k])=>e.jsx(r,{value:s,children:k.name||"(Unknown name)"},s))}):null,c?e.jsx(z,{control:e.jsx(w,{checked:u,onChange:()=>{b(s=>!s)}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):e.jsx(y,{children:"Note: rasterizing layers not yet supported in this browser, so SVG size may be large"})]}),e.jsxs(D,{children:[e.jsx(j,{variant:"contained",color:"secondary",onClick:()=>{a()},children:"Cancel"}),e.jsx(j,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{d(!0),m(void 0);try{await t.exportSvg({rasterizeLayers:u,filename:h,themeName:f,trackLabels:x}),a()}catch(s){console.error(s),m(s)}finally{d(!1)}},children:"Submit"})]})]})}export{V as default};
//# sourceMappingURL=ExportSvgDialog-DCMc1Jm6.js.map
