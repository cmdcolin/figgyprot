var y=Object.defineProperty;var F=(s,a,e)=>a in s?y(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var d=(s,a,e)=>F(s,typeof a!="symbol"?a+"":a,e);import{B as _,i as g,O as w}from"./index-DxWXH1qf.js";import{ah as m}from"./index-CT2bM4yV.js";class D extends _.BaseFeatureDataAdapter{constructor(){super(...arguments);d(this,"feats")}async loadDataP(){const{features:e}=JSON.parse(await g.openLocation(this.getConf("location")).readFile("utf8")),i=this.getConf("scoreField");return e.map(({begin:n,end:c,...t},p)=>{var r,o,f,u,l;return{...t,uniqueId:`feat-${p}`,start:+n,end:+c+1,score:i==="population_frequency"?(o=(r=t.populationFrequencies)==null?void 0:r[0])==null?void 0:o.frequency:i==="variant_impact_score"?(u=(f=t.predictions)==null?void 0:f[0])==null?void 0:u.score:void 0,description:(l=t.descriptions)==null?void 0:l.map(h=>h.value).join(","),name:[t.mutatedType?`${t.wildType}->${t.mutatedType}`:`${t.wildType}->del`]}})}async loadData(e={}){return this.feats||(this.feats=this.loadDataP().catch(i=>{throw this.feats=void 0,i})),this.feats}async getRefNames(e={}){return[]}getFeatures(e,i={}){return w(async n=>{const{start:c,end:t,refName:p}=e,r=await this.loadData();for(const o of r)m.doesIntersect2(o.start,o.end,c,t)&&n.next(new m.SimpleFeature({...o,refName:p}));n.complete()})}freeResources(){}}d(D,"capabilities",["getFeatures","getRefNames"]);export{D as default};
//# sourceMappingURL=UniProtVariationAdapter-DU-P3itI.js.map
