import{j as s,bN as A,d5 as g,o as b,m as S,c as i,ct as L,k as y,bt as v,D as w,bu as U,bC as M,T as _,e as D,f as I,B as R,cH as T}from"./index-CT2bM4yV.js";import{s as B}from"./sessionSharing-DqGpcA-F.js";import"./GridBookmarkWidget-BDpjZd2n.js";var r={},E=A&&A.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var Z=r.ContentCopy=N;r.Indexing=P;r.ContentCut=F;r.ContentPaste=O;r.TrackSelector=$;r.SaveAs=z;r.Save=G;r.DNA=W;r.Cable=q;const t=s,a=E(g);function N(e){return(0,t.jsx)(a.default,{...e,children:(0,t.jsx)("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"})})}function P(e){return(0,t.jsx)(a.default,{...e,children:(0,t.jsx)("path",{d:"M19.31 18.9L22.39 22L21 23.39L17.88 20.32C17.19 20.75 16.37 21 15.5 21C13 21 11 19 11 16.5C11 14 13 12 15.5 12C18 12 20 14 20 16.5C20 17.38 19.75 18.21 19.31 18.9M15.5 19C16.88 19 18 17.88 18 16.5C18 15.12 16.88 14 15.5 14C14.12 14 13 15.12 13 16.5C13 17.88 14.12 19 15.5 19M21 4V6H3V4H21M3 16V14H9V16H3M3 11V9H21V11H18.97C17.96 10.37 16.77 10 15.5 10C14.23 10 13.04 10.37 12.03 11H3Z"})})}function F(e){return(0,t.jsx)(a.default,{...e,children:(0,t.jsx)("path",{d:"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z"})})}function O(e){return(0,t.jsx)(a.default,{...e,children:(0,t.jsx)("path",{d:"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"})})}function $(e){return(0,t.jsx)(a.default,{...e,children:(0,t.jsx)("path",{d:"M21 19v-2H8v2h13m0-6v-2H8v2h13M8 7h13V5H8v2M4 5v2h2V5H4M3 5a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z"})})}function z(e){return(0,t.jsx)(a.default,{...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M10,19L10.14,18.86C8.9,18.5 8,17.36 8,16A3,3 0 0,1 11,13C12.36,13 13.5,13.9 13.86,15.14L20,9V7L16,3H4C2.89,3 2,3.9 2,5V19A2,2 0 0,0 4,21H10V19M4,5H14V9H4V5M20.04,12.13C19.9,12.13 19.76,12.19 19.65,12.3L18.65,13.3L20.7,15.35L21.7,14.35C21.92,14.14 21.92,13.79 21.7,13.58L20.42,12.3C20.31,12.19 20.18,12.13 20.04,12.13M18.07,13.88L12,19.94V22H14.06L20.12,15.93L18.07,13.88Z"})})}function G(e){return(0,t.jsx)(a.default,{...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"})})}function W(e){return(0,t.jsx)(a.default,{...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M4,2H6V4C6,5.44 6.68,6.61 7.88,7.78C8.74,8.61 9.89,9.41 11.09,10.2L9.26,11.39C8.27,10.72 7.31,10 6.5,9.21C5.07,7.82 4,6.1 4,4V2M18,2H20V4C20,6.1 18.93,7.82 17.5,9.21C16.09,10.59 14.29,11.73 12.54,12.84C10.79,13.96 9.09,15.05 7.88,16.22C6.68,17.39 6,18.56 6,20V22H4V20C4,17.9 5.07,16.18 6.5,14.79C7.91,13.41 9.71,12.27 11.46,11.16C13.21,10.04 14.91,8.95 16.12,7.78C17.32,6.61 18,5.44 18,4V2M14.74,12.61C15.73,13.28 16.69,14 17.5,14.79C18.93,16.18 20,17.9 20,20V22H18V20C18,18.56 17.32,17.39 16.12,16.22C15.26,15.39 14.11,14.59 12.91,13.8L14.74,12.61M7,3H17V4L16.94,4.5H7.06L7,4V3M7.68,6H16.32C16.08,6.34 15.8,6.69 15.42,7.06L14.91,7.5H9.07L8.58,7.06C8.2,6.69 7.92,6.34 7.68,6M9.09,16.5H14.93L15.42,16.94C15.8,17.31 16.08,17.66 16.32,18H7.68C7.92,17.66 8.2,17.31 8.58,16.94L9.09,16.5M7.06,19.5H16.94L17,20V21H7V20L7.06,19.5Z"})})}function q(e){return(0,t.jsx)(a.default,{...e,children:(0,t.jsx)("path",{d:"M20 5V4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v1h-1v4c0 .55.45 1 1 1h1v7c0 1.1-.9 2-2 2s-2-.9-2-2V7c0-2.21-1.79-4-4-4S5 4.79 5 7v7H4c-.55 0-1 .45-1 1v4h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1v-4c0-.55-.45-1-1-1H7V7c0-1.1.9-2 2-2s2 .9 2 2v10c0 2.21 1.79 4 4 4s4-1.79 4-4v-7h1c.55 0 1-.45 1-1V5h-1z"})})}const J=S()(()=>({flexItem:{margin:5},content:{display:"flex",flexFlow:"column",gap:"5px"}})),Y=b(function({onClose:e,model:l}){const{classes:u}=J(),[C,j]=i.useState(""),[H,m]=i.useState(),[f,h]=i.useState(!0),c=L.getSession(l),{selectedBookmarks:x}=l,k=x.length===0,V=x.length===0?l.allBookmarksModel:l.sharedBookmarksModel;return i.useEffect(()=>{(async()=>{try{if(!L.isSessionWithShareURL(c))throw new Error("No shareURL configured");h(!0);const o=y(V),n=new URL(window.location.href),p=await B(o,c.shareURL,n.href),d=new URLSearchParams(n.search);d.set("bookmarks",`share-${p.json.sessionId}`),d.set("password",p.password),n.search=d.toString(),j(n.href),h(!1)}catch(o){m(o)}finally{h(!1)}})()},[V,c]),s.jsxs(v.Dialog,{open:!0,onClose:e,title:"Share bookmarks",children:[s.jsxs(w,{className:u.content,children:[s.jsx(U,{severity:"info",children:k?s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"All bookmarks will be shared."}),s.jsx("br",{}),s.jsx("span",{children:"Use the checkboxes to select individual bookmarks to share."})]}):"Only selected bookmarks will be shared."}),s.jsx(M,{children:"Copy the URL below to share your bookmarks."}),H?s.jsx(v.ErrorMessage,{error:H}):f?s.jsx(_,{children:"Generating short URL..."}):s.jsx(D,{label:"URL",value:C,slotProps:{input:{readOnly:!0}},variant:"filled",fullWidth:!0,onClick:o=>{o.target.select()}}),s.jsx(M,{children:'The URL should be pasted into the "Import from share link" field in the "Import" form found in the "Bookmarked regions" drawer.'})]}),s.jsx(I,{children:s.jsx(R,{className:u.flexItem,"data-testid":"dialogShare",variant:"contained",color:"primary",disabled:f,startIcon:s.jsx(Z,{}),onClick:async()=>{T(C),c.notify("Copied to clipboard","success"),e()},children:"Copy share link"})})]})});export{Y as default};
//# sourceMappingURL=ShareBookmarksDialog-dJrF1t2u.js.map
