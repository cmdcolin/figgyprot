import{m as k,a as h,j as e,B as n,b1 as E,b2 as A,b3 as H,b4 as L,u,c as N,D as I,e as U}from"./index-DRDIumvF.js";import{D as W}from"./DraggableDialog-y5mWZbdU.js";import{C as G,a as K}from"./ColorPicker-D_JqId1D.js";import{m as C,a as S}from"./util-gs0FCK-c.js";import{D as T}from"./DataGrid-COGS3KN-.js";import"./index-erzOx3_L.js";import"./utils-BwPRrx3T.js";import"./getThemeProps-IugnyHrN.js";import"./MenuItem-D5kXI1eL.js";import"./dividerClasses-rNTJcnQi.js";import"./Divider-C_55-x0A.js";import"./Badge-D0gYdILz.js";import"./TableCell-Cy8GZPEs.js";const P=k()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});function R({rows:t,onChange:s,showTips:c}){const{classes:x}=P(),[m,d]=h.useState(null),[l,p]=h.useState([]),{name:B,color:O,baseUri:Y,...v}=t[0],[y,w]=h.useState("blue"),[b,D]=h.useState({idx:0,field:null});return e.jsxs("div",{children:[e.jsx(n,{disabled:!l.length,onClick:o=>{d(o.currentTarget)},children:"Change color of selected items"}),e.jsxs(n,{onClick:()=>{s(C([...t],l))},disabled:!l.length,children:[e.jsx(E,{}),c?"Move selected items up":null]}),e.jsxs(n,{onClick:()=>{s(S([...t],l))},disabled:!l.length,children:[e.jsx(A,{}),c?"Move selected items down":null]}),e.jsxs(n,{onClick:()=>{s(C([...t],l,t.length))},disabled:!l.length,children:[e.jsx(H,{}),c?"Move selected items to top":null]}),e.jsxs(n,{onClick:()=>{s(S([...t],l,t.length))},disabled:!l.length,children:[e.jsx(L,{}),c?"Move selected items to bottom":null]}),e.jsx(G.ColorPopover,{anchorEl:m,color:y,onChange:o=>{w(o);for(const i of l){const a=t.find(r=>r.name===i);a&&(a.color=o)}s([...t])},onClose:()=>{d(null)}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(T,{getRowId:o=>o.name,checkboxSelection:!0,onRowSelectionModelChange:o=>{p([...o.ids])},rows:t,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:({value:o,id:i})=>e.jsx(K,{color:o||"blue",onChange:a=>{const r=t.find(g=>g.name===i);r&&(r.color=a),s([...t])}})},{field:"name",headerName:"Name",width:u.measureGridWidth(t.map(o=>o.name))},...Object.keys(v).map(o=>({field:o,renderCell:({value:i})=>e.jsx("div",{className:x.cell,children:e.jsx(N.SanitizedHTML,{html:u.getStr(i)})}),width:u.measureGridWidth(t.map(i=>`${i[o]}`))}))],sortModel:[],onSortModelChange:o=>{const i=o[0],a=(b.idx+1)%2,r=i.field||b.field;D({idx:a,field:r}),s(r?[...t].sort((g,M)=>{const j=u.getStr(g[r]),f=u.getStr(M[r]);return a===1?j.localeCompare(f):f.localeCompare(j)}):t)}})})]})}const _=k()({content:{minWidth:800},float:{float:"right"}});function se({model:t,handleClose:s}){const{classes:c}=_(),{sources:x}=t,[m,d]=h.useState(structuredClone(x||[])),[l,p]=u.useLocalStorage("multiwiggle-showTips",!1);return e.jsxs(W,{open:!0,onClose:s,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor",children:[e.jsxs(I,{className:c.content,children:[e.jsx(n,{variant:"contained",className:c.float,onClick:()=>{p(!l)},children:l?"Hide tips":"Show tips"}),e.jsx("br",{}),l?e.jsxs(e.Fragment,{children:["Helpful tips",e.jsxs("ul",{children:[e.jsx("li",{children:"You can select rows in the table with the checkboxes"}),e.jsx("li",{children:"Multi-select is enabled with shift-click and control-click"}),e.jsx("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),e.jsx("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),e.jsx("li",{children:"Changes are applied when you hit Submit"}),e.jsx("li",{children:"You can click and drag the dialog box to move it on the screen"}),e.jsx("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]}):null,e.jsx(R,{rows:m,onChange:d,showTips:l})]}),e.jsxs(U,{children:[e.jsx(n,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{t.clearLayout(),d(t.sources||[])},children:"Clear custom settings"}),e.jsx(n,{variant:"contained",color:"secondary",onClick:()=>{s(),d([...t.sources||[]])},children:"Cancel"}),e.jsx(n,{variant:"contained",color:"primary",type:"submit",onClick:()=>{t.setLayout(m),s()},children:"Submit"})]})]})}export{se as default};
//# sourceMappingURL=SetColorDialog-CR3ULFVv.js.map
