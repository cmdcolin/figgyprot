import{o as R,u as w,j as s,c1 as F,c2 as k,m as I,c as u,d as E,c3 as L,c4 as M,ap as d,aw as O,l as T,B as C,c5 as V,c6 as _}from"./index-CT2bM4yV.js";const B=R(function({model:e,selectedAsm:o,value:r,setValue:l,setOption:c}){const m=w.getSession(e),{assemblyManager:g,textSearchManager:a}=m,{rankSearchResults:p}=e,t=e.searchScope(o),h=g.get(o);return s.jsx(F,{fetchResults:n=>k({queryString:n,assembly:h,textSearchManager:a,rankSearchResults:p,searchScope:t}),model:e,assemblyName:o,value:r,minWidth:270,onChange:n=>{l(n)},onSelect:n=>{c(n)},TextFieldProps:{variant:"outlined",helperText:"Enter sequence name, feature name, or location"}})}),D=I()(e=>({importFormContainer:{padding:e.spacing(2)},button:{margin:e.spacing(2)},container:{padding:e.spacing(4)}})),P=R(function({model:e}){var o;const{classes:r}=D(),l=w.getSession(e),{assemblyNames:c,assemblyManager:m}=l,{error:g}=e,[a,p]=u.useState(c[0]),[t,h]=u.useState(),n=m.get(a),x=c.length?n==null?void 0:n.error:"No configured assemblies",b=x||g,[i,S]=u.useState(""),v=n==null?void 0:n.regions,A=!!v,j=v&&((o=v[0])===null||o===void 0?void 0:o.refName)||"";return u.useEffect(()=>{S(j)},[j,a]),s.jsxs("div",{className:r.container,children:[b?s.jsx(E.ErrorMessage,{error:b}):null,s.jsx(L,{className:r.importFormContainer,children:s.jsx("form",{onSubmit:async y=>{var f;if(y.preventDefault(),e.setError(void 0),i)try{(t==null?void 0:t.getDisplayString())===i&&t.hasLocation()?await V({option:t,model:e,assemblyName:a}):!((f=t==null?void 0:t.results)===null||f===void 0)&&f.length?e.setSearchResults(t.results,t.getLabel(),a):n&&await _({input:i,assembly:n,model:e})}catch(N){console.error(N),l.notify(`${N}`,"warning")}},children:s.jsxs(M,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[s.jsx(d,{children:s.jsx(E.AssemblySelector,{onChange:y=>{p(y)},localStorageKey:"lgv",session:l,selected:a})}),a?x?s.jsx(O,{style:{color:"red"}}):A?s.jsx(d,{children:s.jsx(B,{value:i,setValue:S,selectedAsm:a,setOption:h,model:e})}):s.jsx(T,{size:20,disableShrink:!0}):null,s.jsx(d,{children:s.jsx(C,{type:"submit",disabled:!i,className:r.button,variant:"contained",color:"primary",children:"Open"})}),s.jsx(d,{children:s.jsx(C,{disabled:!i,className:r.button,onClick:()=>{e.setError(void 0),e.showAllRegionsInAssembly(a)},variant:"contained",color:"secondary",children:"Show all regions in assembly"})})]})})})]})});export{P as default};
//# sourceMappingURL=ImportForm-bWNRRAs0.js.map
