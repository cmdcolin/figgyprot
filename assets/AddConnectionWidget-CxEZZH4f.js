import{o as f,c3 as j,j as e,a as r,c as S,ac as v,d as b,ao as E,m as N,u as m,B as C,c4 as k}from"./index-DRDIumvF.js";import{M}from"./MenuItem-D5kXI1eL.js";import{S as I,a as W,b as y,c as B}from"./Stepper--peYdWf3.js";import"./dividerClasses-rNTJcnQi.js";import"./Collapse-DUY0HwHW.js";const L=f(function({connectionType:o,model:t,session:s}){const i=o.configEditorComponent||j;return e.jsx(r.Suspense,{fallback:e.jsx(S.LoadingEllipses,{}),children:e.jsx(i,{model:{target:t},session:s})})}),V=v(e.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),z=f(function({connectionTypeChoices:t,connectionType:s,setConnectionType:i}){const u=t[0];return r.useEffect(()=>{s||i(u)},[s,u,i]),e.jsx("form",{autoComplete:"off",children:s?e.jsx(b,{value:s.name,label:"connectionType",helperText:s.description?e.jsxs(e.Fragment,{children:[s.description,s.url?e.jsx(E,{href:s.url,rel:"noopener noreferrer",target:"_blank",children:e.jsx(V,{})}):null]}):null,select:!0,fullWidth:!0,onChange:n=>{i(t.find(p=>p.name===n.target.value))},variant:"outlined",children:t.map(n=>e.jsx(M,{value:n.name,children:n.displayName||n.name},n.name))}):null})}),T=N()(o=>({root:{marginTop:o.spacing(1)},stepper:{backgroundColor:o.palette.background.default},button:{marginTop:o.spacing(1),marginRight:o.spacing(1)},actionsContainer:{marginBottom:o.spacing(2)}})),g=["Select a Connection Type","Configure Connection"],$=f(function({model:o}){const[t,s]=r.useState(),[i,u]=r.useState(),[n,p]=r.useState(0),{classes:c}=T(),a=m.getSession(o),{pluginManager:h}=m.getEnv(a),l=r.useMemo(()=>t==null?void 0:t.configSchema.create({connectionId:i},m.getEnv(o)),[i,t,o]);return e.jsx("div",{className:c.root,children:e.jsx(I,{className:c.stepper,activeStep:n,orientation:"vertical",children:g.map(x=>e.jsxs(W,{children:[e.jsx(y,{children:x}),e.jsxs(B,{children:[n===0?e.jsx(z,{connectionTypeChoices:h.getConnectionElements(),connectionType:t,setConnectionType:d=>{s(d),d&&u(`${d.name}-${Date.now()}`)}}):t&&l?e.jsx(L,{connectionType:t,model:l,session:a}):null,e.jsxs("div",{className:c.actionsContainer,children:[e.jsx(C,{disabled:n===0,onClick:()=>{p(n-1)},className:c.button,children:"Back"}),e.jsx(C,{disabled:!(n===0&&t||n===1&&l),variant:"contained",color:"primary",onClick:()=>{if(n===g.length-1){if(l&&k(a)){const d=a.addConnectionConf(l);a.makeConnection(d)}else a.notify("No config model to add");m.isSessionModelWithWidgets(a)&&a.hideWidget(o)}else p(n+1)},className:c.button,"data-testid":"addConnectionNext",children:n===g.length-1?"Connect":"Next"})]})]})]},x))})})});export{$ as default};
//# sourceMappingURL=AddConnectionWidget-CxEZZH4f.js.map
