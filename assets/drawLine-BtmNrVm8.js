import{S as Y,b5 as _,b7 as A,J as P}from"./index-CGKDrrCR.js";const G=.3,S=2;function W(e,v){const{features:w,regions:C,bpPerPx:f,scaleOpts:p,height:y,ticks:{values:M},displayCrossHatches:E,colorCallback:I,config:N,offset:a=0,stopToken:F}=v,r=C[0],H=(r.end-r.start)/f,i=y-a*2,g=Y.readConfObject(N,"clipColor"),h=_({...p,range:[0,i]}),u=h.domain(),j=u[0],L=u[1],n=o=>P.clamp(i-(h(o)||0),0,i)+a;let c,d=Number.NEGATIVE_INFINITY;const T=[];let m=performance.now();for(const o of w.values()){performance.now()-m>400&&(A(F),m=performance.now());const[s,l]=P.featureSpanPx(o,r,f);Math.floor(s)!==Math.floor(d)&&(T.push(o),d=s);const t=o.get("score"),O=t<j,R=t>L,k=l-s+G,V=I(o,t);e.beginPath(),e.strokeStyle=V;const b=c!==void 0?c:t;r.reversed?(e.moveTo(l,n(b)),e.lineTo(l,n(t)),e.lineTo(s,n(t))):(e.moveTo(s,n(b)),e.lineTo(s,n(t)),e.lineTo(l,n(t))),e.stroke(),c=t,R?(e.fillStyle=g,e.fillRect(s,a,k,S)):O&&p.scaleType!=="log"&&(e.fillStyle=g,e.fillRect(s,i-S,k,i))}if(E){e.lineWidth=1,e.strokeStyle="rgba(200,200,200,0.5)";for(const o of M)e.beginPath(),e.moveTo(0,Math.round(n(o))),e.lineTo(H,Math.round(n(o))),e.stroke()}return{reducedFeatures:T}}export{W as drawLine};
//# sourceMappingURL=drawLine-BtmNrVm8.js.map
